(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"/kxI":function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),i=n("q1tI"),o=n.n(i),l=n("17x9"),c=n.n(l),u=n("TSYQ"),s=n.n(u),f=n("33Jr"),b={tag:f.q,className:c.a.string,cssModule:c.a.object,innerRef:c.a.oneOfType([c.a.object,c.a.string,c.a.func])},d=function(e){var t=e.className,n=e.cssModule,i=e.innerRef,l=e.tag,c=Object(r.a)(e,["className","cssModule","innerRef","tag"]),u=Object(f.m)(s()(t,"card-body"),n);return o.a.createElement(l,Object(a.a)({},c,{className:u,ref:i}))};d.propTypes=b,d.defaultProps={tag:"div"},t.a=d},"6jMY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n("MwQV");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return new Promise((function(n){var r={q:t};if(e&&Array.isArray(e)&&e.length)for(var i in e)r["type[".concat(i,"]")]=e[i];else e&&(r.type=e);a.a.call("get","/methods/integrations/search",r).data((function(e){n(e.map((function(e){return{label:e.name,value:e.id,integration:e}})))}))}))}}var i=r();t.a=i},"6ukn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/tags/search-company-tags",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},"9Wsk":function(e,t,n){"use strict";var a=n("4Jst"),r=n("q1tI"),i=n("2k+j"),o=n("wBLH"),l=n("HhE6"),c=n("vfse"),u=(n("yUKz"),n("cO97"),n("SKuE"),n("/ouT"),n("g/0L"),n("9IRi"),n("ROju"),n("EPfG"),n("5KkY"),n("qEaO"),n("X4k0"),n("i8i4"),n("y74/"),Object(r.forwardRef)((function(e,t){var n=Object(o.a)(e),u=Object(l.a)(n),s=Object(c.a)(u);return r.createElement(i.a,Object(a.a)({ref:t},s))})));t.a=u},BLzl:function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),i=n("q1tI"),o=n.n(i),l=n("17x9"),c=n.n(l),u=n("TSYQ"),s=n.n(u),f=n("33Jr"),b={tag:f.q,inverse:c.a.bool,color:c.a.string,body:c.a.bool,outline:c.a.bool,className:c.a.string,cssModule:c.a.object,innerRef:c.a.oneOfType([c.a.object,c.a.string,c.a.func])},d=function(e){var t=e.className,n=e.cssModule,i=e.color,l=e.body,c=e.inverse,u=e.outline,b=e.tag,d=e.innerRef,p=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),v=Object(f.m)(s()(t,"card",!!c&&"text-white",!!l&&"card-body",!!i&&(u?"border":"bg")+"-"+i),n);return o.a.createElement(b,Object(a.a)({},p,{className:v,ref:d}))};d.propTypes=b,d.defaultProps={tag:"div"},t.a=d},"Bg/h":function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("R5y6"),c=n("9Koi");function u(e){var t=e,n=[];return t.variables&&t.variables.phone_number&&n.push(t.variables.phone_number),t.variables&&t.variables.first_name&&n.push(t.variables.first_name),t.variables&&t.variables.last_name&&n.push(t.variables.last_name),{label:n.join(" ")||t.name,value:t.id}}var s=function(e){return e.map(u)};function f(e){var t=e.values,n=e.errors,a=e.setFieldValue,i=e.className,o=Object(c.a)().t;return r.a.createElement(l.a,{className:i,name:"clients",label:o("instantMessages.form.to-label"),value:t.clients,setFieldValue:a,errors:n,loadOptions:function(){return[]},defaultOptions:[],isMulti:!0})}f.propTypes={values:o.a.object.isRequired,errors:o.a.object.isRequired,setFieldValue:o.a.func.isRequired,className:o.a.string},t.a=f},R5y6:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n("q1tI"),r=n.n(a),i=n("Vy9V"),o=n("9Wsk"),l=n("jrRI"),c=n("3OM0"),u=n("TSYQ"),s=n.n(u),f=n("sPdi"),b=n("17x9"),d=n.n(b),p=n("9Koi");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={control:function(e){return O(O({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})},menu:function(e){return O(O({},e),{},{zIndex:10})}};function j(e){var t,n,a=e.id,u=e.label,b=e.errors,d=e.loadOptions,v=e.name,O=e.setFieldValue,m=e.handleBlur,j=e.value,h=e.className,y=e.labelClass,w=e.placeholder,S=e.isClearable,C=e.cacheOptions,E=e.isMulti,R=e.isDisabled,q=e.defaultOptions,V=Object(p.a)().t,N=S?o.a:i.a;return r.a.createElement(l.a,{className:s()(h)},r.a.createElement(c.a,{className:s()(y),htmlFor:a},u),r.a.createElement(N,{cacheOptions:C,defaultOptions:q,loadOptions:d,onChange:function(e){O(v,e)},value:j,isClearable:S,className:s()({"is-invalid":!!(null===(t=b[v])||void 0===t?void 0:t.length)}),placeholder:w||V("common.default-select-placeholder"),styles:g,isMulti:E,isDisabled:R,onBlur:m}),(null===(n=b[v])||void 0===n?void 0:n.length)?r.a.createElement(f.a,{errors:b[v]}):null)}j.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},j.propTypes={errors:d.a.object.isRequired,id:d.a.oneOfType([d.a.string,d.a.number]),value:d.a.oneOfType([d.a.shape({label:d.a.string,value:d.a.oneOfType([d.a.string,d.a.number])}),d.a.array]),label:d.a.any.isRequired,name:d.a.string.isRequired,handleBlur:d.a.func,setFieldValue:d.a.func.isRequired,loadOptions:d.a.func.isRequired,className:d.a.string,labelClass:d.a.string,placeholder:d.a.string,isClearable:d.a.bool,isMulti:d.a.bool,isDisabled:d.a.bool,cacheOptions:d.a.bool,defaultOptions:d.a.oneOfType([d.a.bool,d.a.array])}},Vy9V:function(e,t,n){"use strict";var a=n("4Jst"),r=n("q1tI"),i=n("2k+j"),o=n("HhE6"),l=n("wBLH"),c=(n("yUKz"),n("cO97"),n("SKuE"),n("/ouT"),n("g/0L"),n("9IRi"),n("ROju"),n("EPfG"),n("5KkY"),n("qEaO"),n("X4k0"),n("i8i4"),n("y74/"),Object(r.forwardRef)((function(e,t){var n=Object(l.a)(e),c=Object(o.a)(n);return r.createElement(i.a,Object(a.a)({ref:t},c))})));t.a=c},"XgT/":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("nc57"),c=n("9Koi"),u=n("ok1R"),s=n("rhny"),f=n("R5y6"),b=n("6jMY"),d=n("6ukn"),p=n("Bg/h"),v=n("sOKU");function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e){var t,n=e.fromList,i=e.values,o=e.errors,l=e.handleTagsChange,m=e.handleIntegrationChange,g=e.handleClientChange,j=e.calculation,h=Object(c.a)().t,y=O(Object(a.useState)(n),2),w=y[0],S=y[1];return r.a.createElement(u.a,null,r.a.createElement(s.a,{md:12},!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:"limiter",name:"tags",label:h("campaigns.form.tags-label"),value:i.tags,setFieldValue:l,errors:o,loadOptions:d.a,isMulti:!0,isClearable:!1}),r.a.createElement(f.a,{className:"limiter",id:"integration",name:"integration",label:h("campaigns.form.channel-label"),value:i.integration,setFieldValue:m,errors:o,loadOptions:b.a})),r.a.createElement("div",{className:"sub-label-bottom text-middle mb-4"},r.a.createElement("p",null,h("campaigns.form.clients-count",{count:j?h("campaigns.form.calculation"):null===(t=i.clients)||void 0===t?void 0:t.length})),r.a.createElement("a",{onClick:function(){return S(!w)}},h(w?"campaigns.form.hide":"campaigns.form.see-all"))),w&&r.a.createElement(p.a,{values:i,errors:o,setFieldValue:g}),r.a.createElement("div",{className:"text-right"},r.a.createElement(v.a,{color:"primary"},h("campaigns.form.subscribe-btn")))))}g.propTypes={fromList:o.a.bool,values:o.a.object.isRequired,errors:o.a.object.isRequired,handleClientChange:o.a.func.isRequired,handleTagsChange:o.a.func.isRequired,handleIntegrationChange:o.a.func.isRequired,calculation:o.a.bool};var j=g,h=n("MwQV");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function E(e){var t=e.initialData,n=e.handleSubmit,i=e.afterSave,o=e.fromFilters,c=Object(a.useCallback)((function(e,t){var a={ids:e.clients?e.clients.map((function(e){return e.value})):[]};n(a).data((function(e){t.setSubmitting(!1),i(e)})).validation((function(e,n){t.setErrors(n),t.setSubmitting(!1)})).catch((function(){t.setSubmitting(!1)}))}),[n,i]),u=S(Object(a.useState)(!1),2),s=u[0],f=u[1],b=Object(a.useCallback)((function(e,n,a,r){f(!0),o?h.a.call("get","/methods/campaigns/clients-from-filters",{filters:JSON.stringify(t.filters),selected:JSON.stringify(t.selected),integration_id:e}).data((function(e){f(!1),setTimeout((function(){r(Object(p.b)(e.clients))}))})):h.a.call("get","/methods/campaigns/clients",{tags:null==n?void 0:n.map((function(e){return e.value})),integration_id:e}).data((function(e){f(!1),setTimeout((function(){r(Object(p.b)(e.clients))}))}))}),[o,t.filters,t.selected]);return r.a.createElement(l.a,{initialValues:t,handleSubmit:c,renderForm:function(e){var t=e.setFieldValue,n=e.values,a=e.errors,i=e.setErrors,l=w(e,["setFieldValue","values","errors","setErrors"]);return r.a.createElement(j,y({},l,{errors:a,setErrors:i,values:n,fromList:o,calculation:s,handleTagsChange:function(e,a){var r,i;t(e,a),b(null===(r=n.integration)||void 0===r?void 0:r.value,a,null===(i=n.sendViaIntegration)||void 0===i?void 0:i.value,(function(e){return t("clients",e)}))},handleIntegrationChange:function(e,a){var r;t(e,a),a||(t("clients",null),t("new_clients",null)),b(a?a.value:null,n.tags,null===(r=n.sendViaIntegration)||void 0===r?void 0:r.value,(function(e){return t("clients",e)}))},handleClientChange:function(e,n){t(e,n)}}))}})}E.propTypes={initialData:o.a.object.isRequired,handleSubmit:o.a.func.isRequired,afterSave:o.a.func.isRequired,fromFilters:o.a.bool};t.a=E},vfse:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("Gyn+"),r=n("XvEU"),i=n("wRwD"),o=n("q1tI"),l=n("qvlS"),c=n("2k+j"),u=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=String(e).toLowerCase(),r=String(n.getOptionValue(t)).toLowerCase(),i=String(n.getOptionLabel(t)).toLowerCase();return r===a||i===a},f={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,a){return!(!e||t.some((function(t){return s(e,t,a)}))||n.some((function(t){return s(e,t,a)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function b(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,s=e.createOptionPosition,b=void 0===s?"last":s,d=e.formatCreateLabel,p=void 0===d?f.formatCreateLabel:d,v=e.isValidNewOption,O=void 0===v?f.isValidNewOption:v,m=e.getNewOptionData,g=void 0===m?f.getNewOptionData:m,j=e.onCreateOption,h=e.options,y=void 0===h?[]:h,w=e.onChange,S=Object(i.a)(e,u),C=S.getOptionValue,E=void 0===C?c.c:C,R=S.getOptionLabel,q=void 0===R?c.b:R,V=S.inputValue,N=S.isLoading,I=S.isMulti,L=S.value,T=S.name,k=Object(o.useMemo)((function(){return O(V,Object(l.i)(L),y,{getOptionValue:E,getOptionLabel:q})?g(V,p(V)):void 0}),[p,g,q,E,V,O,y,L]),M=Object(o.useMemo)((function(){return!n&&N||!k?y:"first"===b?[k].concat(Object(r.a)(y)):[].concat(Object(r.a)(y),[k])}),[n,b,N,k,y]),P=Object(o.useCallback)((function(e,t){if("select-option"!==t.action)return w(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==k)w(e,t);else if(j)j(V);else{var a=g(V,V),i={action:"create-option",name:T,option:a};w(Object(l.d)(I,[].concat(Object(r.a)(Object(l.i)(L)),[a]),a),i)}}),[g,V,I,T,k,j,w,L]);return Object(a.a)(Object(a.a)({},S),{},{options:M,onChange:P})}},wBLH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("ngzn"),r=n("Gyn+"),i=n("TRVv"),o=n("wRwD"),l=n("q1tI"),c=n("qvlS"),u=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function s(e){var t=e.defaultOptions,n=void 0!==t&&t,s=e.cacheOptions,f=void 0!==s&&s,b=e.loadOptions;e.options;var d=e.isLoading,p=void 0!==d&&d,v=e.onInputChange,O=e.filterOption,m=void 0===O?null:O,g=Object(o.a)(e,u),j=g.inputValue,h=Object(l.useRef)(void 0),y=Object(l.useRef)(!1),w=Object(l.useState)(Array.isArray(n)?n:void 0),S=Object(i.a)(w,2),C=S[0],E=S[1],R=Object(l.useState)(void 0!==j?j:""),q=Object(i.a)(R,2),V=q[0],N=q[1],I=Object(l.useState)(!0===n),L=Object(i.a)(I,2),T=L[0],k=L[1],M=Object(l.useState)(void 0),P=Object(i.a)(M,2),A=P[0],x=P[1],D=Object(l.useState)([]),F=Object(i.a)(D,2),_=F[0],K=F[1],B=Object(l.useState)(!1),J=Object(i.a)(B,2),z=J[0],Y=J[1],Q=Object(l.useState)({}),U=Object(i.a)(Q,2),H=U[0],G=U[1],W=Object(l.useState)(void 0),X=Object(i.a)(W,2),$=X[0],Z=X[1],ee=Object(l.useState)(void 0),te=Object(i.a)(ee,2),ne=te[0],ae=te[1];f!==ne&&(G({}),ae(f)),n!==$&&(E(Array.isArray(n)?n:void 0),Z(n)),Object(l.useEffect)((function(){return y.current=!0,function(){y.current=!1}}),[]);var re=Object(l.useCallback)((function(e,t){if(!b)return t();var n=b(e,t);n&&"function"==typeof n.then&&n.then(t,(function(){return t()}))}),[b]);Object(l.useEffect)((function(){!0===n&&re(V,(function(e){y.current&&(E(e||[]),k(!!h.current))}))}),[]);var ie=Object(l.useCallback)((function(e,t){var n=Object(c.l)(e,t,v);if(!n)return h.current=void 0,N(""),x(""),K([]),k(!1),void Y(!1);if(f&&H[n])N(n),x(n),K(H[n]),k(!1),Y(!1);else{var i=h.current={};N(n),k(!0),Y(!A),re(n,(function(e){y&&i===h.current&&(h.current=void 0,k(!1),x(n),K(e||[]),Y(!1),G(e?Object(r.a)(Object(r.a)({},H),{},Object(a.a)({},n,e)):H))}))}}),[f,re,A,H,v]),oe=z?[]:V&&A?_:C||[];return Object(r.a)(Object(r.a)({},g),{},{options:oe,isLoading:T||p,onInputChange:ie,filterOption:m})}}}]);