(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"9qca":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("17x9"),i=a.n(o),l=a("FrZM"),s=a("sOKU"),c=a("L3zb"),u=a("k/iu"),m=a("9Koi"),d=a("Mpt7"),f=a("MwQV");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function p(e){var t=e.attachment,a=e.handleChange,o=Object(m.a)().t,i=b(Object(n.useState)(!!t&&t.get("type")===l.a),2),g=i[0],p=i[1];return r.a.createElement("div",{className:"limiter form-group 3"},r.a.createElement("div",null,r.a.createElement(s.a,{className:"mr-2 mb-4 px-sm-5 px-4",outline:g,onClick:function(){return p(!1)},color:g?"secondary":"primary"},o("chatbot.edit.attachment-file")),r.a.createElement(s.a,{className:"mr-2 mb-4 px-sm-5 px-4",outline:!g,onClick:function(){return p(!0)},color:g?"primary":"secondary"},o("chatbot.edit.attachment-url"))),r.a.createElement("div",{className:"mb-4"},g?r.a.createElement(c.a,{onChange:function(e){var t=Object(d.b)({type:l.a,url:e.target.value});a(t)},defaultValue:t?t.get("url",""):"",placeholder:o("chatbot.edit.attachment-url-input")}):r.a.createElement("div",null,r.a.createElement(u.a,{onChange:function(e){var t=new FormData;return t.append("file",e.target.files[0]),f.a.call("post","/methods/chat-bots/attachment",{},t).data((function(e){a(Object(d.b)(e))}))},name:"customFile",label:o("chatbot.edit.attachment-file-input"),id:"attachment-file"}))),r.a.createElement("div",null,t?r.a.createElement(l.b,{attachment:t}):null))}p.propTypes={attachment:i.a.instanceOf(d.b),handleChange:i.a.func.isRequired},t.a=p},PLmP:function(e,t,a){"use strict";let n=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function r(e="",t="ms"){var a=null;return(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(n,(function(e,t,n){(n=o(n))&&(a=(a||0)+parseFloat(t,10)*n)})),a&&a/(o(t)||1)}function o(e){return r[e]||r[e.toLowerCase().replace(/s$/,"")]}r.nanosecond=r.ns=1e-6,r["µs"]=r["μs"]=r.us=r.microsecond=.001,r.millisecond=r.ms=r[""]=1,r.second=r.sec=r.s=1e3*r.ms,r.minute=r.min=r.m=60*r.s,r.hour=r.hr=r.h=60*r.m,r.day=r.d=24*r.h,r.week=r.wk=r.w=7*r.d,r.month=r.b=30.4375*r.d,r.year=r.yr=r.y=365.25*r.d,t.a=r},R5y6:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a("q1tI"),r=a.n(n),o=a("QDav"),i=a("xilt"),l=a("jrRI"),s=a("3OM0"),c=a("TSYQ"),u=a.n(c),m=a("sPdi"),d=a("17x9"),f=a.n(d),b=a("9Koi");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var y={control:function(e){return p(p({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})},menu:function(e){return p(p({},e),{},{zIndex:10})}};function v(e){var t,a,n=e.id,c=e.label,d=e.errors,f=e.loadOptions,g=e.name,p=e.setFieldValue,h=e.handleBlur,v=e.value,O=e.className,j=e.labelClass,E=e.placeholder,w=e.isClearable,C=e.cacheOptions,k=e.isMulti,x=e.isDisabled,S=e.defaultOptions,R=Object(b.a)().t,q=w?i.a:o.a;return r.a.createElement(l.a,{className:u()(O)},r.a.createElement(s.a,{className:u()(j),htmlFor:n},c),r.a.createElement(q,{cacheOptions:C,defaultOptions:S,loadOptions:f,onChange:function(e){p(g,e)},value:v,isClearable:w,className:u()({"is-invalid":!!(null===(t=d[g])||void 0===t?void 0:t.length)}),placeholder:E||R("common.default-select-placeholder"),styles:y,isMulti:k,isDisabled:x,onBlur:h}),(null===(a=d[g])||void 0===a?void 0:a.length)?r.a.createElement(m.a,{errors:d[g]}):null)}v.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},v.propTypes={errors:f.a.object.isRequired,id:f.a.oneOfType([f.a.string,f.a.number]),value:f.a.oneOfType([f.a.shape({label:f.a.string,value:f.a.oneOfType([f.a.string,f.a.number])}),f.a.array]),label:f.a.any.isRequired,name:f.a.string.isRequired,handleBlur:f.a.func,setFieldValue:f.a.func.isRequired,loadOptions:f.a.func.isRequired,className:f.a.string,labelClass:f.a.string,placeholder:f.a.string,isClearable:f.a.bool,isMulti:f.a.bool,isDisabled:f.a.bool,cacheOptions:f.a.bool,defaultOptions:f.a.oneOfType([f.a.bool,f.a.array])}},UiJU:function(e,t,a){"use strict";var n=a("o0o1"),r=a.n(n),o=a("q1tI"),i=a.n(o),l=a("17x9"),s=a.n(l),c=a("nc57"),u=a("6Rhw"),m=a("x37D"),d=a("9Koi"),f=a("ok1R"),b=a("rhny"),g=a("sOKU"),p=a("ma3e"),h=a("CXWj"),y=a("BLzl"),v=a("/kxI"),O=a("+z1p"),j=a("AEIT"),E=a("jrRI"),w=a("BAJy"),C=a("3OM0"),k=(a("jWsU"),a("9qca"));function x(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var R={toolbar:["bold","italic","underline","link","bulletedList","numberedList","undo","redo"],mention:{feeds:[{marker:"@",feed:function(e){return Promise.resolve([{id:"@".concat(e)}].concat(x([{id:"@first_name"},{id:"@last_name"},{id:"@email"},{id:"@phone_number"}].filter((function(t){return t.id.toLowerCase().includes(e.toLowerCase())})))))}}]}};function q(e){var t=e.item,a=e.onItemChange,n=e.onRemove,r=e.index,o=e.errors,l=Object(d.a)().t;return i.a.createElement(y.a,{className:"mb-2"},i.a.createElement(v.a,null,i.a.createElement(f.a,null,i.a.createElement(b.a,{sm:12,md:6},i.a.createElement(E.a,null,i.a.createElement(C.a,null,l("campaigns.form.message-text-label")),i.a.createElement(j.CKEditor,{editor:O.ClassicEditor,data:t.get("text"),onChange:function(e,n){a(t.set("text",n.getData()))},placeholder:l("campaigns.form.message-text-placeholder"),config:R})),i.a.createElement(E.a,null,i.a.createElement(C.a,null,l("campaigns.form.message-attachment-label")),i.a.createElement(k.a,{attachment:t.get("attachment"),handleChange:function(e){a(t.set("attachment",e))}}))),i.a.createElement(b.a,{sm:12,md:6},i.a.createElement(u.a,{className:"mr-sm-3 mr-2",id:"messages.".concat(r,".trigger"),name:"messages.".concat(r,".trigger"),label:l("campaigns.form.message-trigger-label"),placeholder:l("campaigns.form.message-trigger-placeholder"),value:t.get("trigger"),onChange:function(e){a(t.set("trigger",e.target.value))},errors:o}),i.a.createElement(u.a,{className:"mr-sm-3 mr-2",id:"messages.".concat(r,".delay"),name:"messages.".concat(r,".delay"),label:l("campaigns.form.message-delay-label"),placeholder:l("campaigns.form.message-delay-placeholder"),value:t.get("delay"),onChange:function(e){a(t.set("delay",e.target.value))},errors:o})),i.a.createElement(b.a,{sm:12},x(Array(7).keys()).map((function(e){var n;return i.a.createElement("span",{key:e},i.a.createElement(w.a,{id:"messages.".concat(r,".day-config.").concat(e),className:"day-select-btn",name:"messages.".concat(r,".day-config.").concat(e),type:"checkbox",checked:t.get("days_config").includes(e),onChange:function(n){if(+n.target.checked)a(t.set("days_config",t.get("days_config").push(e).sort()));else{var r=t.get("days_config").filter((function(t){return t!==e})).sort(),o=t.set("days_config",r);r.count()||(o=o.set("only_working_time",!1)),a(o)}},invalid:!!(null===(n=o[name])||void 0===n?void 0:n.length),label:l("common.daysOfWeek.".concat(e))}))}))),i.a.createElement(b.a,{sm:10},i.a.createElement(h.a,{id:"messages.".concat(r,".only_working_time"),name:"messages.".concat(r,".only_working_time"),label:l("campaigns.form.message-only-working-time-label"),disabled:!t.get("days_config").count(),value:t.get("only_working_time"),setFieldValue:function(e,n){a(t.set("only_working_time",n))},errors:o})),i.a.createElement(b.a,{sm:2,className:"text-right pt-2"},i.a.createElement("button",{className:"btn btn-link no-shadow",type:"button",onClick:n},i.a.createElement(p.xb,{className:"color-gray icon-size-20"}))))))}q.propTypes={item:s.a.object.isRequired,errors:s.a.object.isRequired,onItemChange:s.a.func.isRequired,onRemove:s.a.func.isRequired,index:s.a.number.isRequired};var P=q,A=a("R5y6"),N=a("MwQV");function M(e){return new Promise((function(t){N.a.call("get","/methods/time-zones/search",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}function _(e){var t=e.handleBlur,a=e.values,n=e.errors,r=e.isSubmitting,o=e.handleNameChange,l=e.handleTimeZoneChange,s=e.handleMessageChange,c=e.handleClickRemoveMessage,p=e.handleClickAddMessage,h=Object(d.a)().t;return i.a.createElement(f.a,null,i.a.createElement(b.a,{md:12},i.a.createElement(u.a,{className:"limiter",id:"name",name:"name",label:h("campaigns.form.name-label"),placeholder:h("campaigns.form.name-placeholder"),onChange:o,onBlur:t,value:a.name,errors:n}),i.a.createElement(A.a,{className:"limiter",name:"timeZone",label:h("campaigns.form.time-zone-label"),value:a.timeZone,setFieldValue:l,errors:n,loadOptions:M,isMulti:!1,isClearable:!1}),i.a.createElement("div",null,a.messages.map((function(e,t){return i.a.createElement(P,{key:t,index:t,item:e,onItemChange:function(e){s(t,e)},onRemove:function(){return c(t)},errors:n})}))),i.a.createElement("div",{className:"text-right"},i.a.createElement(g.a,{className:"mb-3",type:"button",onClick:p},h("campaigns.form.add-message-btn")))),i.a.createElement(b.a,{sm:12},i.a.createElement(m.a,{className:"pt-2 px-4 mb-4",disabled:r},h("common.saveBtnText"))))}_.propTypes={handleMessageChange:s.a.func.isRequired,handleClickRemoveMessage:s.a.func.isRequired,handleClickAddMessage:s.a.func.isRequired,handleNameChange:s.a.func.isRequired,handleTimeZoneChange:s.a.func.isRequired,handleBlur:s.a.func.isRequired,values:s.a.object.isRequired,errors:s.a.object.isRequired,isSubmitting:s.a.bool,fromList:s.a.bool,calculation:s.a.bool};var I=_,T=a("Mpt7"),D=a("PLmP"),F=a("sveX");function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){Z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function z(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return K(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw o}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Q(e,t,a,n,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,r)}function $(e){var t=e.initialData,a=e.handleSubmit,n=e.afterSave,l=e.fromFilters,s=Object(o.useCallback)(function(){var e,t=(e=r.a.mark((function e(t,o){var i,l,s,c,u,m,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.messages?t.messages.toJS():[],l=[],s=z(i),e.prev=3,s.s();case 5:if((c=s.n()).done){e.next=16;break}if(!(u=c.value).attachment||u.attachment.id){e.next=12;break}return e.next=10,Object(F.a)(u.attachment);case 10:m=e.sent,u.attachment=m.data;case 12:u.attachment&&(u.attachment_id=u.attachment.id),l.push(u);case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),s.e(e.t0);case 21:return e.prev=21,s.f(),e.finish(21);case 24:d={name:t.name||null,timeZone:t.timeZone?t.timeZone.value:null,messages:l.map((function(e){return U(U({},e),{},{delay:""!==e.delay?Object(D.a)(e.delay)/6e4:null})}))},a(d).data((function(e){o.setSubmitting(!1),n(e)})).validation((function(e,t){o.setErrors(t),o.setSubmitting(!1)})).catch((function(){o.setSubmitting(!1)}));case 26:case"end":return e.stop()}}),e,null,[[3,18,21,24]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){Q(o,n,r,i,l,"next",e)}function l(e){Q(o,n,r,i,l,"throw",e)}i(void 0)}))});return function(e,a){return t.apply(this,arguments)}}(),[a,n]);return i.a.createElement(c.a,{initialValues:t,handleSubmit:s,renderForm:function(e){var t=e.setFieldValue,a=e.handleChange,n=e.values,r=e.errors,o=e.setErrors,s=V(e,["setFieldValue","handleChange","values","errors","setErrors"]);return i.a.createElement(I,L({},s,{errors:r,setErrors:o,values:n,fromList:l,handleNameChange:function(e){a(e),t("isNameChanged",!!e.target.value)},handleTimeZoneChange:function(e,a){t(e,a)},handleClickRemoveMessage:function(e){var a=U({},r);a.messages&&delete a.messages,o(a),t("messages",n.messages.delete(e))},handleMessageChange:function(e,a){t("messages",n.messages.set(e,a))},handleClickAddMessage:function(){t("messages",n.messages.push(Object(T.b)({text:"",trigger:"",only_working_time:0,delay:"",days_config:Object(T.a)([0,1,2,3,4,5,6])})))}}))}})}$.propTypes={initialData:s.a.object.isRequired,handleSubmit:s.a.func.isRequired,afterSave:s.a.func.isRequired,fromFilters:s.a.bool};t.a=$},dbgk:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("q1tI"),r=a.n(n),o=a("17x9"),i=a.n(o);function l(e){var t=e.children;return r.a.createElement("h1",{className:"title-main mb-3"},t)}l.propTypes={children:i.a.any.isRequired}},sveX:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("MwQV");function r(e){return n.a.call("post","/methods/chat-bots/attachment",{},e)}},xilt:function(e,t,a){"use strict";a("q1tI"),a("qKvR"),a("i8i4"),a("17x9");var n=a("njTy"),r=(a("iYmT"),a("FUBA"),a("1m/E")),o=a("QDav"),i=a("vwsU"),l=Object(i.b)(n.a),s=Object(r.a)(l),c=Object(o.b)(s);t.a=c}}]);