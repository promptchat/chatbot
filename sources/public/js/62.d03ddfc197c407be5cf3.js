(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"2AaS":function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a("q1tI"),r=a.n(n),l=a("17x9"),o=a.n(l),c=a("/MKj"),i=a("1Yj4"),u=a("tiWs"),s=a("a5/R"),d=a("nsn4"),m=a("isk+"),f=a("Ty5D"),b=a("rpa7");function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function g(e){var t=e.children,a=e.redirectIfForbidden,l=Object(b.a)(),o=Object(c.e)((function(e){return e.auth.get("showForbiddenMessage")})),y=p(Object(n.useState)(!1),2),g=y[0],v=y[1];return o&&a?r.a.createElement(f.a,{to:"/403"}):r.a.createElement(i.a,{fluid:!0,className:"d-lg-flex d-block p-0"},r.a.createElement(u.a,{dark:!0,expand:"lg",className:"personal-account-right-bar p-0"},r.a.createElement(s.a,{color:"dark",onClick:function(){return v(!g)}}),r.a.createElement(d.a,{isOpen:g,navbar:!0},r.a.createElement(m.a,{user:l}))),r.a.createElement("div",{className:"personal-account-content without-paddings non-select"},t))}g.defaultProps={redirectIfForbidden:!0},g.propTypes={children:o.a.any,redirectIfForbidden:o.a.bool}},R5y6:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a("q1tI"),r=a.n(n),l=a("QDav"),o=a("xilt"),c=a("jrRI"),i=a("3OM0"),u=a("TSYQ"),s=a.n(u),d=a("sPdi"),m=a("17x9"),f=a.n(m),b=a("9Koi");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v={control:function(e){return y(y({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})},menu:function(e){return y(y({},e),{},{zIndex:10})}};function h(e){var t,a,n=e.id,u=e.label,m=e.errors,f=e.loadOptions,p=e.name,y=e.setFieldValue,g=e.handleBlur,h=e.value,O=e.className,j=e.labelClass,E=e.placeholder,S=e.isClearable,w=e.cacheOptions,C=e.isMulti,I=e.isDisabled,A=e.defaultOptions,T=Object(b.a)().t,k=S?o.a:l.a;return r.a.createElement(c.a,{className:s()(O)},r.a.createElement(i.a,{className:s()(j),htmlFor:n},u),r.a.createElement(k,{cacheOptions:w,defaultOptions:A,loadOptions:f,onChange:function(e){y(p,e)},value:h,isClearable:S,className:s()({"is-invalid":!!(null===(t=m[p])||void 0===t?void 0:t.length)}),placeholder:E||T("common.default-select-placeholder"),styles:v,isMulti:C,isDisabled:I,onBlur:g}),(null===(a=m[p])||void 0===a?void 0:a.length)?r.a.createElement(d.a,{errors:m[p]}):null)}h.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},h.propTypes={errors:f.a.object.isRequired,id:f.a.oneOfType([f.a.string,f.a.number]),value:f.a.oneOfType([f.a.shape({label:f.a.string,value:f.a.oneOfType([f.a.string,f.a.number])}),f.a.array]),label:f.a.any.isRequired,name:f.a.string.isRequired,handleBlur:f.a.func,setFieldValue:f.a.func.isRequired,loadOptions:f.a.func.isRequired,className:f.a.string,labelClass:f.a.string,placeholder:f.a.string,isClearable:f.a.bool,isMulti:f.a.bool,isDisabled:f.a.bool,cacheOptions:f.a.bool,defaultOptions:f.a.oneOfType([f.a.bool,f.a.array])}},"h/Eb":function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),l=a("Ty5D"),o=a("/MKj"),c=a("DMen"),i=a("bTjV"),u=a("zwA0"),s=a("hnXc"),d=a("2AaS"),m=a("MwQV"),f=a("FBLP"),b=a("9Koi"),p=a("R2rE"),y=a("ma3e"),g=a("17x9"),v=a.n(g),h=a("n7jJ"),O=a("/Zzm"),j=a("l4pp"),E=a("sOKU"),S=a("mI4U"),w=a("mt+J"),C=a("DCcX"),I=a("vkoW"),A=a("CaDr"),T=a("ebzC"),k=a("nc57"),q=a("x37D"),R=a("R5y6");function F(e){var t=e.close,a=e.onTagsSelected,l=e.tags,o=Object(b.a)().t,c=Object(n.useCallback)((function(e){var n=e.tags.map((function(e){return{id:e.__isNew__?null:e.value,name:e.label}}));a(n),t()}),[t,a]);return r.a.createElement(C.a,{isOpen:!0,size:"md",onClose:t},r.a.createElement(I.a,{toggle:t},o("templates.select-tags-modal.title")),r.a.createElement(A.a,null,r.a.createElement(k.a,{className:"limiter",initialValues:{tags:l},handleSubmit:c,renderForm:function(e){var t=e.values,a=e.errors,n=e.isSubmitting,l=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:"limiter",name:"tags",label:o("templates.select-tags-modal.tags-label"),value:t.tags,setFieldValue:l,errors:a,loadOptions:T.a,isMulti:!0,isClearable:!0}),r.a.createElement(q.a,{className:"pt-2 px-4 mt-3 mb-sm-4 mb-5",disabled:n},o("templates.select-tags-modal.ok-btn")))}})))}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function B(e){var t=e.onTagsSelected,a=e.tags,l=Object(b.a)().t,o=x(Object(n.useState)(!1),2),c=o[0],i=o[1],u=Object(n.useCallback)((function(){i(!0)}),[]),s=Object(n.useCallback)((function(){i(!1)}),[]);return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(F,{close:s,onTagsSelected:t,tags:a}):null,r.a.createElement(E.a,{onClick:u,color:"info",title:l("templates.select-tags-modal.tags-btn")},r.a.createElement(y.rb,null)))}F.propTypes={close:v.a.func.isRequired,onTagsSelected:v.a.func.isRequired,tags:v.a.array},B.propTypes={onTagsSelected:v.a.func.isRequired,tags:v.a.array};var P=function(e){var t=e.handleAddFile;return r.a.createElement("label",{className:"btn btn-info mr-2",style:{marginBottom:0}},r.a.createElement(y.I,null),r.a.createElement("input",{type:"file",className:"d-none",maxLength:1,onInput:function(e){var a=e.target.files;t([a[0]])},multiple:!1,accept:"image/*"}))};P.propTypes={loadedImages:v.a.array.isRequired,handleAddFile:v.a.func.isRequired,deleteImage:v.a.func.isRequired};var D=function(e){var t=e.handleAddFile,a=e.loadedImages,l=e.deleteImage,o=e.viewPreview,c=e.saveBotCb,i=e.handleLoadFromTemplate,u=e.saved,s=e.setSaved,d=e.chatBotId,m=e.setChatBotId,f=e.tags,p=e.onTagsSelected,g=Object(b.a)().t,v=Object(n.useCallback)((function(){a.length&&l(a[0].internalId)}),[a,l]);return r.a.createElement("div",{className:"configure"},r.a.createElement(h.a,{show:[z,J].includes(u),type:u===z?"success":"danger",text:g(u===z?"chatbot.saved.success":"chatbot.saved.fail"),onConfirm:function(){return s(V)}}),d&&r.a.createElement(O.a,{close:function(){m(null)},chatBotId:d}),r.a.createElement(j.a,null),a.length?r.a.createElement("button",{type:"button",onClick:v,className:"template-image-btn"},r.a.createElement("img",{src:a[0].url,className:"img-fluid mr-2",style:{maxHeight:40}})):null,r.a.createElement(P,{handleAddFile:t,loadedImages:a,deleteImage:l}),r.a.createElement("div",{className:"mr-2 d-inline-block"},r.a.createElement(B,{tags:f,onTagsSelected:p})),r.a.createElement(E.a,{onClick:c,color:"success"},r.a.createElement(y.gb,null)),r.a.createElement("div",{className:"mr-2 d-inline-block"},r.a.createElement(w.a,{onTemplateSelected:i})),r.a.createElement(E.a,{color:"primary",onClick:o},r.a.createElement(y.U,null)))};D.propTypes={handleAddFile:v.a.func.isRequired,loadedImages:v.a.array.isRequired,deleteImage:v.a.func.isRequired,viewPreview:v.a.func.isRequired,saveBotCb:v.a.func.isRequired,handleLoadFromTemplate:v.a.func.isRequired,saved:v.a.number,setSaved:v.a.func.isRequired,chatBotId:v.a.number,setChatBotId:v.a.func.isRequired,onTagsSelected:v.a.func.isRequired,tags:v.a.array};var M=Object(S.b)(D),_=a("Mpt7");function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var V=1,z=2,J=3;var L=function(){var e=U(Object(n.useState)(V),2),t=e[0],a=e[1],l=U(Object(n.useState)(null),2),i=l[0],u=l[1],s=Object(o.d)(),d=Object(n.useCallback)((function(){s(Object(c.u)()).then((function(){return a(z)})).catch((function(){return a(J)}))}),[s]);Object(p.a)(!!i,c.u);var m=Object(n.useCallback)((function(){s(Object(c.u)(!0)).data((function(e){var t=e.chat_bot_id;u(t)}))}),[s]),f=Object(n.useCallback)((function(e){s(Object(c.C)(e.length?e[0]:null))}),[s]),b=Object(n.useCallback)((function(e){s(Object(c.c)(e.chat_bot_id))}),[s]),y=Object(o.e)((function(e){return e.chatbot.getIn(["item","image_id"])})),g=Object(o.e)((function(e){return e.chatbot.getIn(["item","template_tags"]).toJS().map((function(e){return{label:e.name,value:e.id}}))})),v=Object(n.useCallback)((function(e){s(Object(c.E)(Object(_.e)(e)))}),[s]);return r.a.createElement(M,{viewPreview:m,saveBotCb:d,handleLoadFromTemplate:b,saved:t,setSaved:a,chatBotId:i,setChatBotId:u,onChange:f,files:y?[y]:null,maxFilesCount:1,tags:g,onTagsSelected:v})};function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(){var e=Object(l.j)(),t=Object(b.a)().t,a=e.id,p=Object(o.d)(),y=Object(o.e)((function(e){return e.chatbot.get("error")})),g=Object(o.e)((function(e){return e.chatbot.get("loading")})),v=Q(Object(n.useState)(null),2),h=v[0],O=v[1],j=Q(Object(n.useState)(!1),2),E=j[0],S=j[1];Object(n.useEffect)((function(){m.a.call("get","/methods/templates/".concat(a,"/all")).data((function(e){e.temporary?S(!0):O(!1)}))}),[a]),Object(n.useEffect)((function(){null!==h&&p(Object(c.l)(a,h))}),[p,a,h]);var w,C=Object(n.useCallback)((function(){return r.a.createElement(L,null)}),[]);return w=!0===E?r.a.createElement(f.a,{show:E,text:t("chatbot.edit.has_draft"),onConfirm:function(){S(!1),O(!0)},onCancel:function(){S(!1),O(!1)}}):g?r.a.createElement(i.a,null):y?r.a.createElement(u.a,null):r.a.createElement("div",null,r.a.createElement(s.b,{id:a,renderConfigure:C})),r.a.createElement(d.a,null,r.a.createElement("div",null,w))}},xilt:function(e,t,a){"use strict";a("q1tI"),a("qKvR"),a("i8i4"),a("17x9");var n=a("njTy"),r=(a("iYmT"),a("FUBA"),a("1m/E")),l=a("QDav"),o=a("vwsU"),c=Object(o.b)(n.a),i=Object(r.a)(c),u=Object(l.b)(i);t.a=u},zwA0:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("q1tI"),r=a.n(n),l=a("9Koi");function o(){var e=Object(l.a)().t;return r.a.createElement("div",null,e("common.site-error-message"))}}}]);