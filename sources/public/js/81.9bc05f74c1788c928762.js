(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{"5+3T":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),c=n("TtP3"),i=n("MwQV"),l=n("Ty5D"),u=n("9Koi"),o=n("BLzl"),s=n("/kxI"),f=n("9Uk/"),m=n("Bg/h"),b=n("XgT/"),d=n("h4JF"),p=n("R5y6"),g=n("5f+b");function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){var e=Object(u.a)().t,t=h(Object(f.a)(),2)[1],n=t.get("filters"),v=t.get("selected"),y=JSON.parse(n)||[],O=JSON.parse(v)||{},w=h(Object(a.useState)(null),2),j=w[0],S=w[1],E=h(Object(a.useState)(null),2),k=E[0],I=E[1],A=h(Object(a.useState)(null),2),T=A[0],J=A[1];Object(a.useEffect)((function(){i.a.call("get","/methods/campaigns/clients-from-filters",{filter:n,selected:v}).data((function(e){I(e)}))}),[n,v]),Object(a.useEffect)((function(){j&&i.a.call("get","/methods/campaigns/".concat(j)).catch((function(){S(null)}))}),[j]);var N,V=Object(a.useCallback)((function(e){return i.a.call("post","/methods/campaigns/".concat(j,"/subscribe"),{},e)}),[j]),U=Object(a.useCallback)((function(){J("/campaigns/1")}),[]);if(null!==T)return r.a.createElement(l.a,{to:T});if(j&&k){var x=Object(m.b)(k.clients);N=r.a.createElement(b.a,{afterSave:U,handleSubmit:V,fromFilters:!0,initialData:{filters:y,selected:O,clients:x,tags:[],integration:null}})}else N=j?r.a.createElement(d.a,null):r.a.createElement("div",null,r.a.createElement(p.a,{className:"limiter",id:"sendViaIntegration",name:"sendViaIntegration",label:e("campaigns.form.campaign-label"),value:j,setFieldValue:function(e,t){S(null==t?void 0:t.value)},loadOptions:g.a,errors:{}}));return r.a.createElement(c.a,{title:e("campaigns.subscribe.title")},r.a.createElement(o.a,{className:"campaigns-view mb-4 shadow"},r.a.createElement(s.a,{className:"px-4 rounded"},N)))}},"5f+b":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/campaigns/search",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id,client:e}})))}))}))}},"9Uk/":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("Ty5D");function r(){var e=Object(a.i)().search;return[e,new URLSearchParams(e)]}}}]);