(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"/r69":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),l=n("sPdi"),i=n("jrRI"),u=n("3OM0"),s=n("TSYQ"),m=n.n(s),p=n("ma3e"),f=n("yzbm"),d=n("9Koi");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function y(e){var t,n,a=e.id,o=e.label,c=e.errors,s=e.name,y=e.className,g=e.value,v=e.setFieldValue,h=e.onRemove,E=e.disabled,j=e.types,O=void 0===j?[]:j,R=m()({"is-invalid":Boolean(c&&(null===(t=c[s])||void 0===t?void 0:t.length))}),w=Object(d.a)().t;return r.a.createElement(i.a,{className:m()(y)},r.a.createElement(u.a,{htmlFor:a,className:m()(R)},"function"==typeof o?o():o),r.a.createElement(f.a,{onDrop:function(e){v(s,e[0])},disabled:E,accept:O.length?O:null},(function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement("section",{className:m()("dropzone-class")},r.a.createElement("div",b({},t(),{className:"load-img d-flex justify-content-center flex-column align-items-center p-3"}),r.a.createElement("input",b({},n(),{multiple:!1})),r.a.createElement(p.d,{className:"icon-size-40 color-gray"}),r.a.createElement("div",{className:"load-img-tip mt-3 text-center"},w("common.drag-and-drop"))))})),g?r.a.createElement("div",{className:m()("position-relative file-preview mr-4",R)},g.name,r.a.createElement("button",{type:"button",className:"btn btn-link no-shadow position-absolute file-preview-close-btn py-0 px-1",onClick:function(){v(s,null),h&&h()}},r.a.createElement(p.wb,{className:"color-red position-relative"}))):null,c&&(null===(n=c[s])||void 0===n?void 0:n.length)?r.a.createElement(l.a,{errors:c[s]}):null)}y.propTypes={errors:c.a.object,id:c.a.oneOfType([c.a.string,c.a.number]),label:c.a.any,name:c.a.string.isRequired,className:c.a.string,value:c.a.object,setFieldValue:c.a.func.isRequired,onRemove:c.a.func,types:c.a.array,disabled:c.a.bool},t.a=r.a.memo(y)},"7J6V":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o);function l(e){var t=e.name;return r.a.createElement("span",{className:"table-tag d-inline-block px-2 py-1 mr-1 mb-1"},t)}l.propTypes={name:c.a.string.isRequired}},BK2s:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("jeY2"),c=n("17x9"),l=n.n(c),i=n("9Koi"),u=n("55Ip"),s=n("jQco"),m=n("Yfk4"),p=n("2pJb"),f=n("4vsJ"),d=n("1Y33"),b=n("Uf9I"),y=n("QPV6"),g=n("GmYL"),v=n("OKOT"),h=n("Jxq0"),E=n("eOHm"),j=n("R7Vh"),O=n("EW+5"),R=n("c8c+"),w=n("Qu/B"),x=n("MwQV"),S=Object(O.a)(j.a),T=S.loading,C=S.itemsListLoaded,N=S.error,q=n("7J6V"),k=n("Q6vT"),P=n("ebzC"),I=n("ma3e"),A=n("5TAD"),z=n("sOKU"),D=n("LEWT"),M=n("mNz5"),U=n.n(M),F=n("Llg8"),_=n("W7It");function L(e){var t=e.onSuccess,n=e.onReject,a=Object(i.a)().t;return r.a.createElement(_.a,{url:"/methods/templates/import",label:a("templates.import-modal.file-label"),confirmText:a("templates.import-modal.ok-btn"),cancelText:a("templates.import-modal.cancel-btn"),onSuccess:t,onReject:n})}L.propTypes={onSuccess:l.a.func.isRequired,onReject:l.a.func.isRequired};var V=L,B=n("rpa7"),J=n("cJ7N");function K(e){var t=e.templateId;return r.a.createElement(J.a,{apiUrl:"/methods/templates/".concat(t,"/create-chat-bot"),buildRedirectTo:function(e){var t=e.id;return"/chatbot/".concat(t,"/edit")}})}K.propTypes={templateId:l.a.number.isRequired};var Q=r.a.memo(K),W=n("83d4"),Y=n("DCcX"),X=n("CaDr"),$=n("OBzv"),G=n("6Rhw");function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ee(e){var t=e.onSuccess,n=e.onReject,o=Object(i.a)().t,c=Z(Object(a.useState)(null),2),l=c[0],u=c[1],s=Object(a.useCallback)((function(){l&&x.a.call("post","/methods/templates/import-by-code",{},{code:l}).then((function(e){200===e.status?t():n()}))}),[l,t,n]),m=Object(a.useCallback)((function(e){u(e.target.value)}),[u]);return r.a.createElement(Y.a,{isOpen:!0,toggle:n,className:"confirm-modal"},r.a.createElement(X.a,null,r.a.createElement(G.a,{name:"code",label:o("templates.import-modal.code-label"),value:l,onChange:m,errors:{code:[]}})),r.a.createElement($.a,null,r.a.createElement(z.a,{color:"primary",onClick:s,disabled:!l},o("templates.import-modal.ok-btn"))," ",r.a.createElement(z.a,{color:"secondary",onClick:n},o("templates.import-modal.cancel-btn"))))}ee.propTypes={onSuccess:l.a.func.isRequired,onReject:l.a.func.isRequired};var te=ee,ne=n("OZO3"),ae=n("TtP3");function re(e){var t=e.filters,n=e.sort,o=e.data,c=e.currentPage,l=e.lastPage,j=e.changeFilters,O=e.changeSort,R=e.changePage,w=e.refreshData,x=e.showImportByCodeModal,S=Object(i.a)().t,T=Object(B.a)(),C=T.role===W.c,N=Object(ne.a)((function(e,t){return r.a.createElement(V,{onSuccess:e,onReject:t})}),c,R,w),D=Object(a.useCallback)((function(){x().then((function(){R(c)})).catch((function(){}))}),[x,c,R]);return r.a.createElement(ae.a,{title:S("templates.index-page.title")},r.a.createElement("div",{className:"text-right"},r.a.createElement(z.a,{color:"info",onClick:N,className:"mt-2 mb-4 mr-2"},S("templates.index-page.import-btn")),C?r.a.createElement(z.a,{color:"warning",onClick:D,className:"mt-2 mb-4 mr-2"},S("templates.index-page.import-by-code-btn")):null,r.a.createElement(u.a,{to:"/templates/create",className:"btn btn-success mt-2 mb-4"},S("templates.index-page.add-template"))),r.a.createElement(s.d,{filters:t,changeFilters:j}),r.a.createElement(m.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:51}}," "),r.a.createElement("th",null,r.a.createElement(p.a,{title:S("templates.index-page.name-column"),active:Object(f.b)(n,"templates.name")||Object(d.b)(t,"templates.column")},r.a.createElement(f.a,{sort:n,name:"templates.name",displayName:S("templates.index-page.name-column"),changeSort:O,order:1}),r.a.createElement(b.a,{displayName:S("templates.index-page.name-column"),filters:t,changeFilters:j,column:"templates.name"}))),r.a.createElement("th",null,r.a.createElement(p.a,{title:S("templates.index-page.tags-column"),active:Object(d.b)(t,"scopeTemplateTagsWhere")},r.a.createElement(k.a,{displayName:S("templates.index-page.tags-column"),filters:t,changeFilters:j,column:"scopeTemplateTagsWhere",loadOptions:P.a}))),C?r.a.createElement("th",null,S("templates.index-page.import-code-column")):null,r.a.createElement("th",null," "))),r.a.createElement("tbody",null,o.length?o.map((function(e){return r.a.createElement("tr",{key:"templates-".concat(e.id),id:e.id},r.a.createElement("td",{className:"p-1"},e.imageUrl?r.a.createElement("img",{src:e.imageUrl,alt:e.name,className:"img-fluid",style:{height:51}}):r.a.createElement("div",{style:{width:51,height:51,background:"#cecece"}})),r.a.createElement("td",{style:{verticalAlign:"middle"}},e.name),r.a.createElement("td",{className:"last-update"},e.template_tags.map((function(e){return r.a.createElement(q.a,{key:e.id,name:e.name})}))),C?r.a.createElement("td",{style:{verticalAlign:"middle"}},r.a.createElement("code",null,e.import_code)):null,r.a.createElement(y.a,null,T.company_id?r.a.createElement(Q,{templateId:e.id}):null,T.company_id===e.company_id?r.a.createElement(g.a,{url:"/templates/".concat(e.id,"/edit")}):null,r.a.createElement(A.a,{realLink:!0,url:"/methods/templates/".concat(e.id,"/export"),icon:r.a.createElement(I.x,{className:"icon-size-15 color-blue mr-2"}),text:S("templates.index-page.export-btn")}),T.company_id===e.company_id?r.a.createElement(v.a,{url:"/methods/templates/".concat(e.id),onSuccess:function(){return w()}}):null))})):r.a.createElement(h.a,{colspan:5}))),r.a.createElement(E.a,{currentPage:c,lastPage:l,loadPage:R,route:"/templates"}))}re.propTypes={showImportByCodeModal:l.a.func.isRequired,changeFilters:l.a.func.isRequired,changeSort:l.a.func.isRequired,changePage:l.a.func.isRequired,refreshData:l.a.func.isRequired,data:l.a.array.isRequired,currentPage:l.a.number,lastPage:l.a.number,filters:l.a.object.isRequired,sort:l.a.object.isRequired};t.default=Object(o.a)(re,(function(e){var t,n=e.templates;return{loading:n.get("loading"),data:null===(t=n.get("data"))||void 0===t?void 0:t.toArray(),errors:n.get("errors"),currentPage:n.get("currentPage"),lastPage:n.get("lastPage"),filters:n.get("filters"),sort:n.get("sort")}}),(function(e){return{loadPage:function(t,n,a){return e(function(e,t,n){return function(a){var r={page:e};t.size&&(r.filter=Object(R.a)(t)),n.size&&(r.order=Object(w.a)(n)),a(T()),x.a.call("get","/methods/templates",r,{}).then((function(e){a(C({filters:t,sort:n,response:e}))})).catch((function(e){return a(N(e))}))}}(t,n,a))},showImportByCodeModal:function(){return e((function(e){return new Promise((function(t,n){var a=U()(),o=new F.a({id:a,data:{onConfirm:t,onReject:n},render:function(){return r.a.createElement(te,{onSuccess:function(){t(),e(Object(D.b)(a))},onReject:function(){n(),e(Object(D.b)(a))}})}});e(Object(D.a)(o))}))}))}}}))},GmYL:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),l=n("ma3e"),i=n("9Koi"),u=n("5TAD");function s(e){var t=e.url,n=e.modal,a=Object(i.a)().t;return r.a.createElement(u.a,{modal:n,url:t,icon:r.a.createElement(l.U,{className:"icon-size-15 color-blue mr-2"}),text:a("common.edit-link")})}s.defaultProps={modal:!1},s.propTypes={url:c.a.string.isRequired,modal:c.a.bool},t.a=r.a.memo(s)},LEWT:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var a=n("fOp/"),r=(n("Llg8"),n("q1tI")),o=n.n(r),c=n("17x9"),l=n.n(c),i=n("DCcX"),u=n("CaDr"),s=n("OBzv"),m=n("sOKU");function p(e){var t=e.text,n=e.onConfirm,a=e.onReject;return o.a.createElement(i.a,{isOpen:!0,toggle:a,className:"confirm-modal"},o.a.createElement(u.a,null,t),o.a.createElement(s.a,null,o.a.createElement(m.a,{color:"primary",onClick:n},"Confirm")," ",o.a.createElement(m.a,{color:"secondary",onClick:a},"Cancel")))}p.propTypes={text:l.a.string.isRequired,onConfirm:l.a.func.isRequired,onReject:l.a.func.isRequired};n("mNz5");var f=function(e){return{type:a.a.ADD,payload:e}},d=function(e){return{type:a.a.REMOVE,payload:e}}},Llg8:function(e,t,n){"use strict";var a=n("Mpt7");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,a,r=i(u);function u(){return o(this,u),r.apply(this,arguments)}return t=u,a=[{key:"instantiate",value:function(e){return new u(e)}}],(n=null)&&c(t.prototype,n),a&&c(t,a),u}(Object(a.d)({id:null,render:function(){return null}}));t.a=m},OBzv:function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),o=n("q1tI"),c=n.n(o),l=n("17x9"),i=n.n(l),u=n("TSYQ"),s=n.n(u),m=n("33Jr"),p={tag:m.q,className:i.a.string,cssModule:i.a.object},f=function(e){var t=e.className,n=e.cssModule,o=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),i=Object(m.m)(s()(t,"modal-footer"),n);return c.a.createElement(o,Object(a.a)({},l,{className:i}))};f.propTypes=p,f.defaultProps={tag:"div"},t.a=f},OZO3:function(e,t,n){"use strict";var a=n("q1tI"),r=n("/MKj"),o=n("mNz5"),c=n.n(o),l=n("Llg8"),i=n("LEWT");t.a=function(e,t,n){var o=Object(r.d)(),u=Object(a.useCallback)((function(){return new Promise((function(t,n){var a=c()(),r=function(){t(),o(Object(i.b)(a))},u=function(){n(),o(Object(i.b)(a))},s=new l.a({id:a,data:{onConfirm:t,onReject:n},render:function(){return e(r,u)}});o(Object(i.a)(s))}))}),[o,e]);return Object(a.useCallback)((function(){u().then((function(){n(t)})).catch((function(){}))}),[u,t,n])}},W7It:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),l=n("DCcX"),i=n("CaDr"),u=n("OBzv"),s=n("sOKU"),m=n("/r69"),p=n("MwQV");function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function b(e){var t=e.url,n=e.label,o=e.confirmText,c=e.cancelText,d=e.onSuccess,b=e.onReject,y=function(e,t,n){var r=f(Object(a.useState)(null),2),o=r[0],c=r[1],l=Object(a.useCallback)((function(e,t){c(t)}),[c]),i=Object(a.useCallback)((function(){if(o){var a=new FormData;a.append("file",o),p.a.call("post",e,{},a).then((function(e){200===e.status?t():n()}))}}),[e,o,t,n]);return{file:o,setFile:c,handleFileChange:l,handleConfirmSend:i}}(t,d,b),g=y.file,v=y.handleFileChange,h=y.handleConfirmSend;return r.a.createElement(l.a,{isOpen:!0,toggle:b,className:"confirm-modal"},r.a.createElement(i.a,null,r.a.createElement(m.a,{id:"template-file",name:"templateFile",label:n,value:g,setFieldValue:v,errors:{templateFile:[]},types:["application/zip","application/octet-stream","application/x-zip-compressed","multipart/x-zip"]})),r.a.createElement(u.a,null,r.a.createElement(s.a,{color:"primary",onClick:h,disabled:!g},o)," ",r.a.createElement(s.a,{color:"secondary",onClick:b},c)))}b.propTypes={url:c.a.string.isRequired,label:c.a.string,confirmText:c.a.string,cancelText:c.a.string,onSuccess:c.a.func.isRequired,onReject:c.a.func.isRequired};t.a=b},cJ7N:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),l=n("kvuc"),i=n("9Koi"),u=n("MwQV"),s=n("ma3e"),m=n("Ty5D");function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e){var t=e.apiUrl,n=e.buildRedirectTo,o=Object(i.a)().t,c=p(Object(a.useState)(null),2),l=c[0],f=c[1],d=Object(a.useCallback)((function(){u.a.call("post",t).data((function(e){f(n(e))}))}),[t,n]);return l?r.a.createElement(m.a,{to:l}):r.a.createElement("button",{className:"btn btn-link no-shadow d-flex p-3 text-left w-100 action-dropdown-item text-dec-none",type:"button",onClick:d},r.a.createElement(s.Bb,{className:"icon-size-15 color-blue mr-2"}),r.a.createElement("span",{className:"text-main"},o("common.menu.create-from-template")))}function b(e){var t=e.apiUrl,n=e.buildRedirectTo;return r.a.createElement(l.a,{tag:d,apiUrl:t,buildRedirectTo:n})}d.propTypes={apiUrl:c.a.string.isRequired,buildRedirectTo:c.a.func.isRequired},b.propTypes={apiUrl:c.a.string.isRequired,buildRedirectTo:c.a.func.isRequired},t.a=r.a.memo(b)},ebzC:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/templates/search-template-tags",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},mNz5:function(e,t,n){var a=n("dt0z"),r=0;e.exports=function(e){var t=++r;return a(e)+t}}}]);