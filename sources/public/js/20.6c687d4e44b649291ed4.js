(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"/MuQ":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("Ty5D"),c=n("/MKj"),l=n("bTjV"),i=n("zwA0"),u=n("doQp"),s=n.n(u),d=n("Mpt7"),b=n("DMen"),m=n("TSYQ"),p=n.n(m),f=n("17x9"),E=n.n(f);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function y(e){var t=e.connectable,n=e.positions,o=void 0===n?["top","left","bottom","right"]:n,l=e.isConnectable,i=void 0===l||l,u=e.children,s=g(Object(a.useState)(!1),2),d=s[0],m=s[1],f=Object(c.d)(),E=Object(a.useCallback)((function(e){f(Object(b.b)({move:(new Date).getTime(),x:e.clientX,y:e.clientY})),f(Object(b.k)("connect-to"))}),[f]),v=Object(a.useCallback)((function(){var e=document.querySelector(".block:hover");e&&f(Object(b.d)(t,e.dataset.id)),f(Object(b.b)(!1)),m(!1),removeEventListener("mouseup",v),removeEventListener("mousemove",E)}),[t,f,E]);Object(a.useEffect)((function(){return d&&(window.addEventListener("mouseup",v),window.addEventListener("mousemove",E)),function(){window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",E)}}),[d,E,v]);var y=Object(a.useCallback)((function(e){return function(t){m(e),f(Object(b.k)("connect-from")),f(Object(b.b)({x:t.clientX,y:t.clientY}))}}),[f]);return r.a.createElement("div",{className:"connectable"},i&&o.map((function(e){return r.a.createElement("span",{key:e,id:d===e?"block-connect-from":void 0,onMouseDown:y(e),className:p()("connect connect-".concat(e),{connecting:d===e})})})),r.a.createElement("div",{className:"connect-content"},u))}var h=y;y.propTypes={children:E.a.any,connectable:E.a.string.isRequired,isConnectable:E.a.bool,positions:E.a.array};var O=Object.freeze({TYPE_START:0,TYPE_MESSAGE:1,TYPE_QUESTION:2,TYPE_BUTTONS:3,TYPE_SELECT:4,TYPE_BUTTON:5,TYPE_CALENDAR:6,TYPE_API_CONTENT:7,TYPE_MAP:8,TYPE_SWITCH:9,TYPE_CAROUSEL:10,TYPE_SET_VARIABLE:11,TYPE_CALL_OPERATOR:12,TYPE_TRIGGER:13,TYPE_NOTIFICATION:14,TYPE_TAG:15,TYPE_DEPARTMENT:16});function k(e){var t=e.block;return r.a.createElement("div",{className:"message",dangerouslySetInnerHTML:{__html:t.getIn(["data","text"])}})}var T=k;k.propTypes={block:E.a.instanceOf(d.b).isRequired};var x=n("29yR");function j(e){var t=e.block.getIn(["data","variable"]);return t?r.a.createElement("div",{className:"variable"},r.a.createElement(x.a,null)," ",r.a.createElement("span",{className:"variable-name"},"@",t)):null}var I=j;j.propTypes={block:E.a.instanceOf(d.b).isRequired};var A,w,S=n("ma3e"),C=n("LvDl"),N=n.n(C);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=(_(A={},O.TYPE_SELECT,{Icon:x.y,color:"#D8EEFF",langKey:"chatbot.blocks.select"}),_(A,O.TYPE_MESSAGE,{Icon:x.t,color:"#D8EEFF",langKey:"chatbot.blocks.message"}),_(A,O.TYPE_SET_VARIABLE,{Icon:x.a,color:"#E9E1FF",langKey:"chatbot.blocks.variable"}),_(A,O.TYPE_QUESTION,{Icon:x.g,color:"#D8EEFF",langKey:"chatbot.blocks.question"}),_(A,O.TYPE_CALL_OPERATOR,{Icon:x.p,color:"#E9E1FF",langKey:"chatbot.blocks.operator"}),_(A,O.TYPE_TAG,{Icon:x.x,color:"#FFEBCD",langKey:"chatbot.blocks.tag"}),_(A,O.TYPE_NOTIFICATION,{Icon:x.b,color:"#FFEBCD",langKey:"chatbot.blocks.notification"}),_(A,O.TYPE_BUTTONS,{Icon:x.n,color:"#D8EEFF",langKey:"chatbot.blocks.buttons"}),_(A,O.TYPE_SWITCH,{Icon:x.s,color:"#E9E1FF",langKey:"chatbot.blocks.switch"}),_(A,O.TYPE_DEPARTMENT,{Icon:x.h,color:"#FFEBCD",langKey:"chatbot.blocks.department"}),_(A,O.TYPE_CALENDAR,{Icon:x.c,color:"#E9E1FF",langKey:"chatbot.blocks.calendar"}),_(A,O.TYPE_CAROUSEL,{Icon:x.u,color:"#E9E1FF",langKey:"chatbot.blocks.cards"}),_(A,O.TYPE_TRIGGER,{Icon:x.m,color:"#FFEBCD",langKey:"chatbot.blocks.trigger"}),_(A,O.TYPE_START,{Icon:x.d,color:"#D5FFD6",langKey:"chatbot.blocks.start"}),_(A,O.TYPE_MAP,{Icon:x.l,color:"#D5FFD6",langKey:"chatbot.blocks.map"}),_(A,O.TYPE_API_CONTENT,{Icon:x.i,color:"#D8EEFF",langKey:"chatbot.blocks.api"}),A);function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=F(e),a=n.Icon,o=n.color;return r.a.createElement(a,P({},t,{color:o}))}function F(e){return R[e]||{Icon:S.g,color:"#ff00000",langKey:"type"}}var q=(_(w={},O.TYPE_MESSAGE,(function(){return{text:"<p>Message</p>"}})),_(w,O.TYPE_SET_VARIABLE,(function(){return{text:"value",variable:"variable"}})),_(w,O.TYPE_QUESTION,(function(){return{text:"<p>Question?</p>",variable:"variable"}})),_(w,O.TYPE_CALL_OPERATOR,(function(){return{text:"<p>Waiting for opeartor</p>"}})),_(w,O.TYPE_TAG,(function(){return{text:"tag"}})),_(w,O.TYPE_NOTIFICATION,(function(){return{text:"<p>Email text</p>"}})),_(w,O.TYPE_BUTTONS,(function(){return{text:"<p>Select</p>",buttons:[{id:Object(C.uniqueId)("button-"),text:"Variant#1"}]}})),_(w,O.TYPE_SELECT,(function(){return{text:"<p>Select</p>",buttons:[{id:Object(C.uniqueId)("button-"),text:"Variant#1"}]}})),_(w,O.TYPE_SWITCH,(function(){return{variable:"variable",buttons:[{id:Object(C.uniqueId)("button-"),text:"Variant#1"}]}})),_(w,O.TYPE_DEPARTMENT,(function(){return{}})),_(w,O.TYPE_CALENDAR,(function(){return{}})),_(w,O.TYPE_CAROUSEL,(function(){return{cards:[{image_id:null,title:"Title",description:"Description",buttons:[]}]}})),_(w,O.TYPE_TRIGGER,(function(){return{variable:"",text:"trigger-name"}})),_(w,O.TYPE_START,(function(){return{}})),_(w,O.TYPE_MAP,(function(){return{}})),_(w,O.TYPE_API_CONTENT,(function(){return{api:{method:"GET",url:"https://example.com",headers:[{key:"Accept",value:"application/json"},{key:"Content-Type",value:"application/json"}],params:[{key:"query",value:"valut"}],data:[{key:"key",value:"value"}]},buttons:[]}})),w);function D(e){return q[e]?q[e]():{}}var L=n("9Koi");function M(e){var t=e.type,n=e.index,a=F(t),o=Object(L.a)().t,l=Object(c.e)((function(e){return e.chatbot.getIn(["builder","edit","id"])===n})),i=Object(c.d)();return r.a.createElement("div",{style:{backgroundColor:a.color},className:"header"},l?r.a.createElement(x.v,null):Y(t)," ",o(a.langKey),t!==O.TYPE_START&&r.a.createElement("a",{onClick:function(){i(Object(b.o)(n))},className:"context-menu position-relative"},r.a.createElement(S.l,null)))}var B=M;function z(e){var t=e.button,n=e.connect,o=void 0!==n&&n,l=Object(c.d)();return Object(a.useEffect)((function(){l(Object(b.k)(t.get("id"),!0))})),r.a.createElement("div",{className:"block-button",id:"block-".concat(t.get("id"))},r.a.createElement(h,{positions:o?["right","left"]:[],connectable:t.get("id").toString()},t.get("text")))}M.propTypes={type:E.a.number.isRequired,index:E.a.any.isRequired};var U=z;function G(e){var t=e.block,n=e.connect,a=void 0!==n&&n;return r.a.createElement("div",null,t.getIn(["data","buttons"],Object(d.a)()).map((function(e){return r.a.createElement(U,{connect:a,key:e.get("id"),button:e})})))}z.propTypes={button:E.a.instanceOf(d.b).isRequired,connect:E.a.bool};var K=G;function Q(e){var t=e.block;return r.a.createElement("div",null,r.a.createElement(x.k,null),t.getIn(["data","text"]))}G.propTypes={block:E.a.instanceOf(d.b).isRequired,connect:E.a.bool};var V=Q;function W(e){var t=e.block;return r.a.createElement("div",null,t.getIn(["data","text"]))}Q.propTypes={block:E.a.instanceOf(d.b).isRequired};var H=W;W.propTypes={block:E.a.instanceOf(d.b).isRequired};var J=n("2Te1");function $(e){var t=e.block;return r.a.createElement(J.a,{color:"primary"},t.getIn(["data","text"]))}var X=$;function Z(e){var t=e.block;return r.a.createElement("div",{className:"api"},r.a.createElement("span",{className:"api-method"},t.getIn(["data","api","method"])),t.getIn(["data","api","url"]))}$.propTypes={block:E.a.instanceOf(d.b).isRequired};var ee=Z;function te(e){var t=e.block;return r.a.createElement(J.a,{color:"success"},t.getIn(["data","text","label"]))}Z.propTypes={block:E.a.instanceOf(d.b).isRequired};var ne=te;te.propTypes={block:E.a.instanceOf(d.b).isRequired};function ae(e){var t=e.attachment,n=t.get("type"),a=t.get("url");if(!a)return null;switch(n){case 6:return r.a.createElement("embed",{className:"attachment-preview",src:a,type:""});case 2:return r.a.createElement(S.q,null);case 1:return r.a.createElement("img",{className:"attachment-preview",src:a});case 7:return r.a.createElement("video",{controls:!0,className:"attachment-preview"},r.a.createElement("source",{src:a}))}return null}var re=ae;function oe(e){var t=e.block.getIn(["data","attachment"]);return t?r.a.createElement(re,{attachment:t}):null}ae.propTypes={attachment:E.a.instanceOf(d.b).isRequired};var ce=oe;function le(e){var t=e.block;return r.a.createElement("div",null,r.a.createElement(x.c,null),t.getIn(["data","text","label"]))}oe.propTypes={block:E.a.instanceOf(d.b).isRequired};var ie=le;le.propTypes={block:E.a.instanceOf(d.b).isRequired};var ue=n("fJMJ"),se=n("BLzl"),de=n("umxu"),be=n("x863"),me=n("ChEw"),pe=n("ezmu"),fe=n("xn8y"),Ee=n("BgiA"),ge=n("/kxI"),ve=n("sOKU");function ye(e){var t=e.block,n=t.getIn(["data","activeCard"],0),o=Object(c.d)(),l=t.getIn(["data","cards"]),i=Object(a.useCallback)((function(e){o(Object(b.r)(t.get("id"),e))}),[o,t]),u=function(){var e=n===l.size-1?0:n+1;i(e)},s=function(){var e=0===n?l.size-1:n-1;i(e)},d=l.map((function(e,t){var n=e.get("image");return r.a.createElement(ue.a,{key:t},r.a.createElement(se.a,null,n&&r.a.createElement(de.a,{top:!0,width:"100%",src:n.get("url"),alt:"Card image cap"}),r.a.createElement(ge.a,null,r.a.createElement(be.a,{tag:"h6",className:"mb-2 text-muted"},"Card#".concat(t+1)),r.a.createElement(me.a,{tag:"h5"},e.get("title")),r.a.createElement(pe.a,null,e.get("description")),e.get("buttons").map((function(e,t){return r.a.createElement(ve.a,{className:"mr-1 mb-1",key:t},e.get("text"))})))))}));return r.a.createElement(fe.a,{interval:!1,activeIndex:n,next:u,previous:s},r.a.createElement("span",null),d,r.a.createElement(Ee.a,{direction:"prev",directionText:"Previous",onClickHandler:s}),r.a.createElement(Ee.a,{direction:"next",directionText:"Next",onClickHandler:u}))}var he=ye;function Oe(e){var t=e.block;switch(t.get("type")){case O.TYPE_MESSAGE:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(T,{block:t}),r.a.createElement(ce,{block:t})));case O.TYPE_NOTIFICATION:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(T,{block:t})));case O.TYPE_START:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}));case O.TYPE_QUESTION:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(T,{block:t}),r.a.createElement(I,{block:t})));case O.TYPE_SWITCH:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(I,{block:t})),r.a.createElement(K,{connect:!0,block:t}));case O.TYPE_SELECT:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(T,{block:t}),r.a.createElement(I,{block:t})),r.a.createElement(K,{block:t}));case O.TYPE_BUTTONS:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(T,{block:t}),r.a.createElement(I,{block:t})),r.a.createElement(K,{connect:!0,block:t}));case O.TYPE_TRIGGER:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(V,{block:t}),r.a.createElement(I,{block:t})));case O.TYPE_TAG:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(X,{block:t})));case O.TYPE_DEPARTMENT:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(ne,{block:t})));case O.TYPE_CALENDAR:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(ie,{block:t})));case O.TYPE_CALL_OPERATOR:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(T,{block:t})));case O.TYPE_SET_VARIABLE:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(I,{block:t}),r.a.createElement(H,{block:t})));case O.TYPE_CAROUSEL:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(he,{block:t})));case O.TYPE_API_CONTENT:return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t.get("id"),type:t.get("type")}),r.a.createElement("div",{className:"block-content"},r.a.createElement(T,{block:t}),r.a.createElement(ee,{block:t})),r.a.createElement(K,{connect:!0,block:t}));default:return r.a.createElement("div",null,"Not implemented view for ",t.get("type"))}}ye.propTypes={block:E.a.instanceOf(d.b).isRequired};var ke=Oe;function Te(e){var t=e.index,n=Object(c.e)((function(e){var n=e.chatbot.getIn(["builder","edit"]);return n&&n.get("id").toString()===t?n:null})),o=Object(c.e)((function(e){var a=e.chatbot;return n||a.getIn(["item","blocks",t])})),l=Object(c.e)((function(e){return e.chatbot.getIn(["builder","selected",t])})),i=Object(c.e)((function(e){return e.chatbot.getIn(["builder","scale"])})),u=Object(c.d)();Object(a.useEffect)((function(){u(Object(b.k)(t))}));var m=o.get("type"),f=[O.TYPE_MESSAGE,O.TYPE_QUESTION,O.TYPE_SELECT,O.TYPE_CAROUSEL,O.TYPE_START,O.TYPE_MAP,O.TYPE_CALENDAR,O.TYPE_SET_VARIABLE,O.TYPE_CALL_OPERATOR,O.TYPE_TRIGGER,O.TYPE_NOTIFICATION,O.TYPE_DEPARTMENT,O.TYPE_TAG].includes(m);return m===O.TYPE_API_CONTENT&&(f=0===o.getIn(["data","buttons"],Object(d.a)()).size),r.a.createElement(s.a,{onMouseDown:function(e){window.wasSelected=l,l||u(Object(b.n)(t,e.ctrlKey))},scale:i/100,handle:".header",bounds:"parent",position:o.get("position").toJS(),onDrag:function(e,t){window.wasSelected=!1,u(Object(b.h)({x:t.deltaX,y:t.deltaY}))}},r.a.createElement("div",{id:"block-".concat(t),style:{zIndex:n?5:0},className:p()("block",{selected:l}),"data-id":t},r.a.createElement("div",{onMouseUp:function(e){window.wasSelected&&u(Object(b.n)(t,e.ctrlKey))}},r.a.createElement(h,{isConnectable:f,connectable:t},r.a.createElement(ke,{block:o})))))}Oe.propTypes={block:E.a.instanceOf(d.b).isRequired};var xe=r.a.memo(Te);Te.propTypes={index:E.a.string.isRequired};n("vs2M");function je(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Se(e){var t=e.from,n=e.to,a=e.scroll,o=void 0===a?{x:0,y:0}:a,l=Object(c.e)((function(e){var a=e.chatbot,r=a.getIn(["builder","rendered",t.toString()]),o=a.getIn(["builder","rendered",n.toString()]);return!(!r||!o)&&r[0]+o[0]})),i=Object(c.e)((function(e){return e.chatbot.getIn(["builder","scale"])})),u=Object(c.e)((function(e){return e.chatbot.getIn(["builder","rendered",t.toString(),1])})),s=Object(c.d)();if(!l)return null;var d=sn,m=100/i,p=12/m,f=document.getElementById("block-".concat(t)),E=f.getBoundingClientRect(),g=document.getElementById("block-".concat(n)).getBoundingClientRect(),v=0,y=0,h=E.x+o.x-v-d,O=E.y+o.y-y-0,k=E.width,T=E.height,x=g.x+o.x-v-d,j=g.y+o.y-y-0,I=g.width,A=g.height,w=h+k/2,C=O+T/2,N=x+I/2,P=j+A/2,_=C-P,R="connect-from"===t,Y=R?-k/2/m:4/m,F=R?0:2/m,q=R?1:0,D={top:{x:w-q,y:O-Y-F-q},bottom:{x:w-q,y:O+T+Y-q},left:{x:h-Y-F-q,y:C-q},right:{x:h+k+Y-q,y:C-q}},L={top:{x:N,y:j-p},bottom:{x:N,y:j+A+p},left:{x:x-p,y:P},right:{x:x+I+p,y:P}},M="connected-top",B="connected-left",z="connected-bottom",U="connected-right",G=[];w-N>0?_>0?(G=[[D.left,L.right,2,B],[D.left,L.bottom,3,B]],u||(G=G.concat([[D.top,L.right,2,M],[D.top,L.bottom,4,M]]))):(G=[[D.left,L.right,2,B],[D.left,L.top,3,B]],u||(G=G.concat([[D.bottom,L.right,2,z],[D.bottom,L.top,3,z]]))):_>0?(G=[[D.right,L.left,1,U],[D.right,L.bottom,4,U]],u||(G=G.concat([[D.top,L.left,1,M],[D.top,L.bottom,4,M]]))):(G=[[D.right,L.left,1,U],[D.right,L.top,4,U]],u||(G=G.concat([[D.bottom,L.left,1,z],[D.bottom,L.top,3,z]])));var K=Math.pow,Q=function(e,t){return Math.sqrt(K(e.x-t.x,2)+K(e.y-t.y,2))},V=Ie(G.sort((function(e,t){return Q.apply(void 0,je(e))-Q.apply(void 0,je(t))}))[0],4),W=V[0],H=V[1],J=V[2],$=V[3];f.setAttribute("connected",$),W.x*=m,W.y*=m,H.x*=m,H.y*=m;var X,Z={top:(W.y+H.y)/2,left:(W.x+H.x)/2};switch(J){case 1:X="M ".concat(W.x,",          ").concat(W.y,"\n                 C ").concat(W.x+50,",  ").concat(W.y,"\n                   ").concat(H.x-50,",  ").concat(H.y,"\n                   ").concat(H.x,",          ").concat(H.y);break;case 2:X="M ".concat(W.x,",          ").concat(W.y,"\n                 C ").concat(W.x-50,",  ").concat(W.y,"\n                   ").concat(H.x+50,",  ").concat(H.y,"\n                   ").concat(H.x,",          ").concat(H.y);break;case 3:Z.left-=25,X="M ".concat(W.x,",          ").concat(W.y,"\n                 Q ").concat(W.x-50,",  ").concat(W.y,"\n                   ").concat(H.x,",          ").concat(H.y);break;case 4:X="M ".concat(W.x,",          ").concat(W.y,"\n                 Q ").concat(W.x+50,", ").concat(W.y,"\n                   ").concat(H.x,",          ").concat(H.y)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",width:"100%",height:"100%"}},r.a.createElement("defs",null,r.a.createElement("marker",{fill:"#94B3CB",id:"arrowhead",viewBox:"0 0 10 10",refX:"3",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto"},r.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})),r.a.createElement("marker",{id:"circle",viewBox:"0 0 8 8",refX:"3",refY:"3",markerUnits:"userSpaceOnUse",markerWidth:"8",markerHeight:"8"},r.a.createElement("circle",{cx:"4",cy:"4",r:"3",fill:"white",stroke:"#94B3CB",strokeWidth:2}))),r.a.createElement("g",{fill:"none",stroke:"#94B3CB",strokeWidth:"2",markerStart:"url(#circle)",markerEnd:"url(#arrowhead)"},r.a.createElement("path",{d:X}))),"connect-to"!==n&&r.a.createElement("button",{className:"remove-anchor",onClick:function(){return s(Object(b.j)(t.toString()))},style:Z},r.a.createElement(S.R,null)))}var Ce=r.a.memo(Se);function Ne(e){var t=e.scroll,n=Object(c.e)((function(e){return e.chatbot.getIn(["builder","connection"])})),a=Object(c.e)((function(e){return 100/e.chatbot.getIn(["builder","scale"])}));return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"block-connect-to",style:{position:"fixed",width:2,height:5,top:(n.y+t.y)*a,left:(n.x+t.x-sn)*a,background:"red"}}),n.move&&r.a.createElement(Ce,{scroll:t,from:"connect-from",to:"connect-to"})):null}Se.propTypes={from:E.a.any.isRequired,scroll:E.a.object.isRequired,to:E.a.any.isRequired};var Pe=Ne;function _e(){var e=Object(c.e)((function(e){return e.chatbot.getIn(["builder","scale"])})),t=Object(c.d)();return r.a.createElement("div",{className:"minimap"},r.a.createElement("div",{className:"buttons"},r.a.createElement(ve.a,{disabled:e<30,color:"white",onClick:function(){t(Object(b.q)(e-5))}},r.a.createElement(S.A,null)),r.a.createElement(ve.a,{color:"white",disabled:e>145,onClick:function(){t(Object(b.q)(e+5))}},r.a.createElement(S.F,null)),r.a.createElement("span",{className:"counter"},e,"%"),r.a.createElement(ve.a,{className:"float-right",color:"white",onClick:function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}},r.a.createElement(S.m,null))))}Ne.propTypes={scroll:E.a.object.isRequired},_e.propTypes={scroll:E.a.object.isRequired,size:E.a.number.isRequired,wrapper:E.a.object.isRequired};var Re=_e,Ye=n("mNz5"),Fe=n.n(Ye),qe=n("rhny");function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Me(e){var t=e.type,n=e.scroll,o=De(Object(a.useState)(!1),2),l=o[0],i=o[1],u=Object(c.d)(),m=Object(c.e)((function(e){return e.chatbot.getIn(["builder","scale"])})),p=Object(L.a)().t,f=De(Object(a.useState)({}),2),E=f[0],g=f[1],v=F(t);return r.a.createElement(qe.a,{sm:12},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{className:"create-btn"},r.a.createElement("span",{className:"color-label",style:{backgroundColor:v.color}}),r.a.createElement("span",null,Y(t)," ",p(v.langKey)),r.a.createElement("span",{className:"float-right drag-element"},r.a.createElement(S.t,null))),r.a.createElement(s.a,{position:{x:0,y:0},onStart:function(e){var t=e.target.getBoundingClientRect(),n=t.top,a=t.left;g({x:e.clientX-a,y:e.clientY-n}),i(!0)},onStop:function(e){u(Object(b.c)(Object(d.d)({id:Fe()("Z"),type:t,position:{x:(e.clientX+n.x-sn-E.x)/(m/100),y:(e.clientY+n.y-E.y)/(m/100)},data:D(t)}))),i(!1)}},l?r.a.createElement("div",{className:"block-creation",style:{position:"absolute",top:0,zIndex:100}},r.a.createElement("div",{className:"plus-icon"},r.a.createElement(S.F,null)),r.a.createElement("div",{className:"block"},r.a.createElement(B,{index:-1,type:t}),r.a.createElement("div",null,"New block"))):r.a.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,cursor:"grab"}}))))}var Be=Me;Me.propTypes={scroll:E.a.object.isRequired,type:E.a.number.isRequired};var ze=n("ok1R");function Ue(e){var t=e.size,n=e.scroll,a=Object(L.a)().t;return r.a.createElement("div",{className:"panel",style:{width:t}},r.a.createElement("div",{className:"panel-header"},a("chatbot.drag-and-drop")),r.a.createElement(ze.a,null,[O.TYPE_MESSAGE,O.TYPE_QUESTION,O.TYPE_SELECT,O.TYPE_BUTTONS,O.TYPE_API_CONTENT,O.TYPE_CAROUSEL,O.TYPE_CALENDAR,O.TYPE_SWITCH,O.TYPE_SET_VARIABLE,O.TYPE_CALL_OPERATOR,O.TYPE_TRIGGER,O.TYPE_NOTIFICATION,O.TYPE_TAG,O.TYPE_DEPARTMENT].map((function(e){return r.a.createElement(Be,{type:e,key:e,scroll:n})}))))}var Ge=Ue;Ue.propTypes={scroll:E.a.object.isRequired,size:E.a.number.isRequired};var Ke=n("q7Gj"),Qe=n("re1l"),Ve=n("Z+s4"),We=n("L3zb");function He(e){var t=e.block,n=Object(c.d)();return r.a.createElement("div",{className:"editable-block"},r.a.createElement(Ke.a,null,r.a.createElement(Qe.a,{addonType:"prepend"},r.a.createElement(Ve.a,null,"@")),r.a.createElement(We.a,{onChange:function(e){return n(Object(b.s)("variable",e.target.value))},value:t.getIn(["data","variable"])})))}var Je=He;He.propTypes={block:E.a.instanceOf(d.b).isRequired};var $e=n("AEIT"),Xe=n("+z1p"),Ze=n.n(Xe),et=n("KDeF");function tt(e){var t=e.title,n=e.tooltip,a="help"+Object(C.random)(0,99999);return r.a.createElement("div",null,t,n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{className:"help-question",id:a},r.a.createElement(S.J,null)),r.a.createElement(et.a,{placement:"right",target:a},n)))}var nt=tt;function at(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ot(e){var t=e.block,n=Object(c.d)(),a=Object(c.e)((function(e){return e.chatbot.getIn(["item","blocks"]).map((function(e){return e.getIn(["data","variable"],null)})).valueSeq().filter((function(e){return null!==e})).toArray().map((function(e){return{id:"@".concat(e)}}))})),o=Object(L.a)().t;return r.a.createElement("div",{className:"editable-block"},r.a.createElement(nt,{title:o("chatbot.edit.message"),tooltip:o("chatbot.edit.message-help")}),r.a.createElement($e.CKEditor,{editor:Ze.a,data:t.getIn(["data","text"]),onChange:function(e,t){n(Object(b.s)("text",t.getData()))},config:{toolbar:["bold","italic","underline","link","bulletedList","numberedList","undo","redo"],mention:{feeds:[{marker:"@",feed:function(e){return Promise.resolve([{id:"@".concat(e)}].concat(at(a.filter((function(t){return t.id.toLowerCase().includes(e.toLowerCase())})))))}}]}}}))}tt.propTypes={title:E.a.string.isRequired,tooltip:E.a.string};var ct=ot;function lt(e){var t=e.block,n=Object(c.d)(),a=Object(L.a)().t;return r.a.createElement("div",{className:"editable-block"},r.a.createElement(nt,{title:a("chatbot.edit.buttons")}),t.getIn(["data","buttons"],Object(d.a)()).map((function(e,t){return r.a.createElement("div",{key:t,className:"input-with-remove editable-block"},r.a.createElement(We.a,{key:e.get("id"),onChange:function(e){return n(Object(b.s)("text",e.target.value,["buttons",t]))},value:e.get("text")}),r.a.createElement("a",{className:"remove-btn",onClick:function(){n(Object(b.i)(t))}},r.a.createElement(S.R,null)))})),r.a.createElement("a",{onClick:function(){return n(Object(b.a)())}},"+"))}ot.propTypes={block:E.a.instanceOf(d.b).isRequired};var it=lt;function ut(e){var t=e.block,n=Object(c.d)();return r.a.createElement("div",{className:"editable-block"},r.a.createElement(Ke.a,null,r.a.createElement(Qe.a,{addonType:"prepend"},r.a.createElement(Ve.a,null,r.a.createElement(x.k,null))),r.a.createElement(We.a,{onChange:function(e){return n(Object(b.s)("text",e.target.value))},value:t.getIn(["data","text"])})))}lt.propTypes={block:E.a.instanceOf(d.b).isRequired};var st=ut;function dt(e){var t=e.block,n=Object(c.d)();return r.a.createElement("div",{className:"editable-block"},r.a.createElement(Ke.a,null,r.a.createElement(We.a,{onChange:function(e){return n(Object(b.s)("text",e.target.value))},value:t.getIn(["data","text"])})))}ut.propTypes={block:E.a.instanceOf(d.b).isRequired};var bt=dt;function mt(e){var t=e.block,n=Object(c.d)();return r.a.createElement("div",{className:"editable-block"},r.a.createElement(Ke.a,null,r.a.createElement(Qe.a,{addonType:"prepend"},r.a.createElement(Ve.a,null,"#")),r.a.createElement(We.a,{onChange:function(e){return n(Object(b.s)("text",e.target.value))},value:t.getIn(["data","text"])})))}dt.propTypes={block:E.a.instanceOf(d.b).isRequired};var pt=mt;mt.propTypes={block:E.a.instanceOf(d.b).isRequired};var ft=n("nsn4"),Et=n("vwsU");function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kt=["GET","POST","PATCH","PUT","OPTIONS","DELETE","HEAD","JSONP"];function Tt(e){var t=e.block,n=Object(c.d)(),a=t.getIn(["data","api","method"]),o=Object(L.a)().t;return r.a.createElement("div",{className:"editable-block"},r.a.createElement(nt,{title:o("chatbot.edit.method")}),r.a.createElement("div",{className:"value-group"},r.a.createElement(Et.a,{styles:{valueContainer:function(e){return ht(ht({},e),{},{paddingTop:0,paddingBottom:0})},control:function(e){return ht(ht({},e),{},{height:29,minHeight:"unset"})},dropdownIndicator:function(e){return ht(ht({},e),{},{padding:0,paddingLeft:8,paddingRight:8})}},className:"value-group-key",value:{value:a,label:a},onChange:function(e){var t=e.value;return n(Object(b.s)("method",t,["api"]))},options:kt.map((function(e){return{value:e,label:e}}))}),r.a.createElement(We.a,{className:"value-group-value",onChange:function(e){return n(Object(b.s)("url",e.target.value,["api"]))},placeholder:o("chatbot.edit.api-url"),value:t.getIn(["data","api","url"])})),r.a.createElement(jt,{name:"headers",block:t}),r.a.createElement(jt,{name:"params",block:t}),r.a.createElement(jt,{name:"data",block:t}))}var xt=Tt;function jt(e){var t=e.name,n=e.block,o=Object(c.d)(),l=n.getIn(["data","api",t]),i=Object(L.a)().t,u=gt(Object(a.useState)(!1),2),s=u[0],m=u[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"api-edit-collapse",onClick:function(){return m(!s)}},i("chatbot.edit.api-"+t),r.a.createElement("span",{className:"toggler"},s?r.a.createElement(S.b,null):r.a.createElement(S.a,null))),r.a.createElement(ft.a,{isOpen:s},l.map((function(e,n){return r.a.createElement("div",{key:n,className:"value-group"},r.a.createElement(We.a,{className:"value-group-key",onChange:function(e){return o(Object(b.s)("key",e.target.value,["api",t,n]))},value:e.get("key")}),r.a.createElement(We.a,{className:"value-group-value",onChange:function(e){return o(Object(b.s)("value",e.target.value,["api",t,n]))},value:e.get("value")}),r.a.createElement("a",{className:"value-group-remove",onClick:function(){return o(Object(b.s)(t,l.delete(n),["api"]))}},r.a.createElement(S.R,null)))})),r.a.createElement("a",{className:"add-value-group",onClick:function(){return o(Object(b.s)(t,l.push(Object(d.b)({key:"",value:""})),["api"]))}},r.a.createElement(S.F,null))))}Tt.propTypes={block:E.a.instanceOf(d.b).isRequired},jt.propTypes={block:E.a.instanceOf(d.b).isRequired,name:E.a.string.isRequired};var It=n("MwQV");function At(e){return new Promise((function(t){It.a.call("get","/methods/departments/search",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}var wt=n("QDav");function St(e){var t,n=e.block,a=Object(c.d)(),o=Object(L.a)().t;return r.a.createElement("div",{className:"editable-block"},r.a.createElement(nt,{title:o("chatbot.edit.department")}),r.a.createElement(wt.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:At,onChange:function(e){a(Object(b.s)("text",Object(d.b)(e)))},value:null===(t=n.getIn(["data","text"]))||void 0===t?void 0:t.toJS(),isClearable:!1}))}var Ct=St;St.propTypes={block:E.a.instanceOf(d.b).isRequired};var Nt=n("k/iu");function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Rt(e){var t=e.block,n=Object(c.d)(),o=Object(L.a)().t,l=t.getIn(["data","attachment"])||Object(d.b)({}),i=Pt(Object(a.useState)(6===l.get("type")),2),u=i[0],s=i[1],m=Pt(Object(a.useState)(u?l:Object(d.b)({type:6})),2),p=m[0],f=m[1],E=Pt(Object(a.useState)(u?Object(d.b)({}):l),2),g=E[0],v=E[1],y=u?p:g;Object(a.useEffect)((function(){n(Object(b.s)("attachment",y))}),[y,n]);var h=Object(a.useCallback)((function(e){var t=new FormData;return t.append("file",e.target.files[0]),It.a.call("post","/methods/chat-bots/attachment",{},t).data((function(e){var t=Object(d.b)(e);v(t)}))}),[]),O=Object(a.useCallback)((function(e){f((function(t){return t.set("url",e.target.value)}))}),[]);return r.a.createElement("div",{className:"editable-block"},r.a.createElement(ve.a,{outline:u,onClick:function(){return s(!1)},color:u?"secondary":"primary"},o("chatbot.edit.attachment-file")),r.a.createElement(ve.a,{outline:!u,onClick:function(){return s(!0)},color:u?"primary":"secondary"},o("chatbot.edit.attachment-url")),u?r.a.createElement(We.a,{onChange:O,value:y.get("url",""),placeholder:o("chatbot.edit.attachment-url-input")}):r.a.createElement("div",null,r.a.createElement(Nt.a,{onChange:h,name:"customFile",label:o("chatbot.edit.attachment-file-input"),id:"attachment-file"})),l&&r.a.createElement(re,{attachment:l}))}var Yt=Rt;function Ft(e){return new Promise((function(t){It.a.call("get","/methods/calendars/search",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}function qt(e){var t,n=e.block,a=Object(c.d)(),o=Object(L.a)().t;return r.a.createElement("div",{className:"editable-block"},r.a.createElement(nt,{title:o("chatbot.edit.calendar")}),r.a.createElement(wt.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:Ft,onChange:function(e){a(Object(b.s)("text",Object(d.b)(e)))},value:null===(t=n.getIn(["data","text"]))||void 0===t?void 0:t.toJS(),isClearable:!1}))}Rt.propTypes={block:E.a.instanceOf(d.b).isRequired};var Dt=qt;qt.propTypes={block:E.a.instanceOf(d.b).isRequired};var Lt,Mt=n("Cs6D"),Bt=n("mI4U");function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vt=(Qt(Lt={},1,{type:1,text:"Select",value:"value"}),Qt(Lt,2,{type:2,text:"Link",url:"https://example.com"}),Lt);function Wt(e){var t,n=e.block,a=Object(c.d)(),o=Object(L.a)().t,l=n.getIn(["data","activeCard"],0),i=n.getIn(["data","cards"]),u=i.get(l),s=N.a.range(0,i.size).map((function(e){return{label:"Card#".concat(e+1),value:e}})),m=(Qt(t={},1,{value:1,label:o("chatbot.edit.card-button-postback")}),Qt(t,2,{value:2,label:o("chatbot.edit.card-button-url")}),t);return r.a.createElement("div",null,r.a.createElement(ze.a,{className:"mb-3"},r.a.createElement(qe.a,{sm:6},r.a.createElement(Mt.a,{onChange:function(e){return a(Object(b.s)("activeCard",e?e.value:0))},options:s,value:s[l]})),r.a.createElement(qe.a,{sm:3},r.a.createElement("a",{className:"add-card",onClick:function(){a(Object(b.s)("cards",i.push(Object(d.b)({title:"New card",description:"",image_id:null,buttons:Object(d.a)([])})))),a(Object(b.s)("activeCard",i.size))}},r.a.createElement(S.F,null))),i.size>1&&r.a.createElement(qe.a,{sm:3},r.a.createElement("a",{className:"remove-card",onClick:function(){a(Object(b.s)("activeCard",l&&l-1)),a(Object(b.s)("cards",i.remove(l)))}},r.a.createElement(S.R,null)))),r.a.createElement(se.a,null,r.a.createElement(Bt.a,{id:"card_image",name:"card_image",key:"image"+l,files:[u.get("image_id")],onChange:function(e,t){var n=Gt(e,1)[0],r=Gt(t,1)[0],o=u.set("image_id",n).set("image",r&&Object(d.b)(r));a(Object(b.s)(l,o,["cards"]))},maxFilesCount:1,types:["image/*"]}),r.a.createElement(ge.a,null,r.a.createElement(We.a,{onChange:function(e){return a(Object(b.s)("title",e.target.value,["cards",l]))},value:u.get("title")}),r.a.createElement(We.a,{type:"textarea",onChange:function(e){a(Object(b.s)("description",e.target.value,["cards",l]))},value:u.get("description")}),r.a.createElement("label",{className:"mt-3"},o("chatbot.edit.card-buttons")),u.get("buttons").map((function(e,t){return r.a.createElement("div",{key:t,className:"card-button-group"},r.a.createElement(Mt.a,{styles:{valueContainer:function(e){return Ut(Ut({},e),{},{paddingTop:0,paddingBottom:0})},control:function(e){return Ut(Ut({},e),{},{height:29,minHeight:"unset"})},dropdownIndicator:function(e){return Ut(Ut({},e),{},{padding:0,paddingLeft:8,paddingRight:8})}},className:"card-button-group-type",options:Object.values(m),value:m[e.get("type")],onChange:function(e){var n=e.value;a(Object(b.s)(t,Object(d.b)(Vt[n]),["cards",l,"buttons"]))}}),r.a.createElement(We.a,{className:"card-button-group-text",value:e.get("text"),onChange:function(e){return a(Object(b.s)("text",e.target.value,["cards",l,"buttons",t]))}}),1===e.get("type")?r.a.createElement(We.a,{className:"card-button-group-value",value:e.get("value"),onChange:function(e){return a(Object(b.s)("value",e.target.value,["cards",l,"buttons",t]))}}):r.a.createElement(We.a,{className:"card-button-group-value",value:e.get("url"),onChange:function(e){return a(Object(b.s)("url",e.target.value,["cards",l,"buttons",t]))}}),r.a.createElement("a",{className:"card-button-group-remove",onClick:function(){a(Object(b.s)("buttons",u.get("buttons").remove(t),["cards",l]))}},r.a.createElement(S.R,null)))})),r.a.createElement("a",{className:"add-button",onClick:function(){a(Object(b.s)("buttons",u.get("buttons").push(Object(d.b)(Vt[2])),["cards",l]))}},r.a.createElement(S.F,null)))))}var Ht=Wt;function Jt(e){var t=e.block;switch(t.get("type")){case O.TYPE_QUESTION:return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{block:t}),r.a.createElement(Je,{block:t}));case O.TYPE_BUTTONS:case O.TYPE_SELECT:return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{block:t}),r.a.createElement(Je,{block:t}),r.a.createElement(it,{block:t}));case O.TYPE_SWITCH:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,{block:t}),r.a.createElement(it,{block:t}));case O.TYPE_TRIGGER:return r.a.createElement(r.a.Fragment,null,r.a.createElement(st,{block:t}),r.a.createElement(Je,{block:t}));case O.TYPE_SET_VARIABLE:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,{block:t}),r.a.createElement(bt,{block:t}));case O.TYPE_TAG:return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt,{block:t}));case O.TYPE_DEPARTMENT:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct,{block:t}));case O.TYPE_API_CONTENT:return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{block:t}),r.a.createElement(Je,{block:t}),r.a.createElement(xt,{block:t}),r.a.createElement(it,{block:t}));case O.TYPE_MESSAGE:return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{block:t}),r.a.createElement(Yt,{block:t}));case O.TYPE_CALENDAR:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,{block:t}));case O.TYPE_CALL_OPERATOR:case O.TYPE_NOTIFICATION:return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{block:t}));case O.TYPE_CAROUSEL:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ht,{block:t}));default:return r.a.createElement("div",null,"Not implemented view for ",t.get("type"))}}Wt.propTypes={block:E.a.instanceOf(d.b).isRequired};var $t=Jt;function Xt(e){var t=e.block,n=Object(L.a)().t,a=Object(c.d)(),o=F(t.get("type"));return r.a.createElement("div",{className:"block-edit"},r.a.createElement("div",{style:{backgroundColor:o.color},className:"header"},Y(t.get("type"))," ",n(o.langKey)),r.a.createElement("div",{className:"block-edit-body"},r.a.createElement($t,{block:t})),r.a.createElement("div",{className:"actions"},r.a.createElement(ve.a,{outline:!0,color:"danger",onClick:function(){a(Object(b.e)())}},n("chatbot.actions.delete")),r.a.createElement("div",{className:"float-right",onClick:function(){a(Object(b.o)(null))}},r.a.createElement(ve.a,{color:"info"},n("chatbot.actions.cancel")),r.a.createElement(ve.a,{color:"primary",onClick:function(){a(Object(b.m)())}},n("chatbot.actions.save")))))}Jt.propTypes={block:E.a.instanceOf(d.b).isRequired},Xt.propTypes={block:E.a.instanceOf(d.b)};var Zt=Xt,en=n("DCcX"),tn=n("vkoW"),nn=n("n7jJ");function an(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function on(){var e=Object(c.e)((function(e){return e.chatbot.getIn(["item","name"])})),t=Object(L.a)().t,n=an(Object(a.useState)(!1),2),o=n[0],l=n[1],i=an(Object(a.useState)(!1),2),u=i[0],s=i[1],d=an(Object(a.useState)(null),2),m=d[0],p=d[1],f=Object(c.d)(),E=Object(a.useCallback)((function(){f(Object(b.l)()).then((function(){return l(!0)})).catch((function(){return l(1)}))}),[f]),g=Object(a.useRef)();Object(a.useEffect)((function(){return g.current=setInterval((function(){document.hasFocus()&&!u&&f(Object(b.l)(!0))}),15e3),function(){return clearInterval(g.current)}}),[f,u]);var v=Object(a.useCallback)((function(){f(Object(b.l)(!0)).data((function(e){var t=e.chat_bot_id;p(t),s(!0)}))}),[f]);return r.a.createElement("div",{className:"configure"},r.a.createElement(nn.a,{show:o,type:!0===o?"success":"danger",text:t(!0===o?"chatbot.saved.success":"chatbot.saved.fail"),onConfirm:function(){return l(!1)}}),u&&r.a.createElement(en.a,{isOpen:!0,size:"md",onRequestClose:function(){s(!1)}},r.a.createElement(tn.a,{toggle:function(){s(!1)}},"Preview"),r.a.createElement("iframe",{style:{width:500,height:600},src:"/preview/".concat(m,"?embed=1")})),r.a.createElement(We.a,{onChange:function(e){return f(Object(b.p)(e.target.value))},value:e}),r.a.createElement(ve.a,{onClick:E,color:"success"},r.a.createElement(S.K,null)),r.a.createElement(ve.a,{color:"primary",onClick:v},r.a.createElement(S.E,null)))}on.propTypes={};var cn=on;function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var sn=300;function dn(e){var t=e.id,n=Object(c.e)((function(e){return e.chatbot.getIn(["item","blocks"])}),(function(e,t){return e.size===t.size})),o=Object(c.e)((function(e){return e.chatbot.getIn(["item","anchors"])})),l=Object(c.e)((function(e){return e.chatbot.getIn(["builder","edit"])})),i=ln(Object(a.useState)({x:0,y:0}),2),u=i[0],s=i[1],d=ln(Object(a.useState)(!1),2),m=d[0],p=d[1];Object(a.useEffect)((function(){p(!0)}),[]);var f=Object(c.d)(),E=Object(c.e)((function(e){return e.chatbot.getIn(["builder","scale"])})),g=Object(a.useRef)(null);if(+t!==Object(c.e)((function(e){return e.chatbot.getIn(["item","id"])})))return null;var v=.5-E/200;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{scroll:u,size:220}),r.a.createElement("div",{onScroll:function(e){"wrapper"===e.target.id&&s({y:e.target.scrollTop,x:e.target.scrollLeft})},id:"wrapper",ref:g,style:{width:"calc(100% - ".concat(220,"px)"),height:"100vh",overflow:"scroll",position:"relative",left:220}},r.a.createElement("div",{className:"builder-field",style:{position:"absolute",height:6e3,width:6e3,transform:"scale(".concat(E/100,")"),marginLeft:-6e3*v,marginTop:-6e3*v}},r.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},o.map((function(e,t){return r.a.createElement(Ce,{scroll:u,key:t,from:e.get("source"),to:e.get("target")})})).toIndexedSeq(),r.a.createElement(Pe,{scroll:u}),r.a.createElement("div",{onMouseDown:function(){return f(Object(b.n)(!1))},style:{position:"absolute",top:0,left:0,bottom:0,right:0}}),n.map((function(e,t){return r.a.createElement(xe,{key:t,index:t})})).toIndexedSeq(),l&&r.a.createElement("div",{className:"edit-bgdrop"})))),l&&r.a.createElement(Zt,{block:l}),m&&r.a.createElement(Re,{size:6e3,scroll:u,wrapper:g}),m&&r.a.createElement(cn,null))}dn.propTypes={id:E.a.any.isRequired};var bn=n("2AaS"),mn=n("FBLP");function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){var e,t=Object(o.j)(),n=Object(L.a)().t,u=t.id,s=Object(c.d)(),d=Object(c.e)((function(e){return e.chatbot.get("error")})),m=Object(c.e)((function(e){return e.chatbot.get("loading")})),p=pn(Object(a.useState)(null),2),f=p[0],E=p[1],g=pn(Object(a.useState)(!1),2),v=g[0],y=g[1];return Object(a.useEffect)((function(){It.a.call("get","/methods/chat-bots/".concat(u,"/all")).data((function(e){e.temporary?y(!0):E(!1)}))}),[u]),Object(a.useEffect)((function(){null!==f&&s(Object(b.f)(u,f))}),[s,u,f]),e=!0===v?r.a.createElement(mn.a,{show:v,text:n("chatbot.edit.has_draft"),onConfirm:function(){y(!1),E(!0)},onCancel:function(){y(!1),E(!1)}}):m?r.a.createElement(l.a,null):d?r.a.createElement(i.a,null):r.a.createElement("div",null,r.a.createElement(dn,{id:u})),r.a.createElement(bn.a,null,r.a.createElement("div",null,e))}},"2AaS":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),l=n("/MKj"),i=n("1Yj4"),u=n("tiWs"),s=n("a5/R"),d=n("nsn4"),b=n("isk+"),m=n("Ty5D"),p=n("rpa7");function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e){var t=e.children,n=e.redirectIfForbidden,o=Object(p.a)(),c=Object(l.e)((function(e){return e.auth.get("showForbiddenMessage")})),E=f(Object(a.useState)(!1),2),g=E[0],v=E[1];return c&&n?r.a.createElement(m.a,{to:"/403"}):r.a.createElement(i.a,{fluid:!0,className:"d-lg-flex d-block p-0"},r.a.createElement(u.a,{dark:!0,expand:"lg",className:"personal-account-right-bar p-0"},r.a.createElement(s.a,{color:"dark",onClick:function(){return v(!g)}}),r.a.createElement(d.a,{isOpen:g,navbar:!0},r.a.createElement(b.a,{user:o}))),r.a.createElement("div",{className:"personal-account-content without-paddings"},t))}g.defaultProps={redirectIfForbidden:!0},g.propTypes={children:c.a.any,redirectIfForbidden:c.a.bool}},DMen:function(e,t,n){"use strict";n.d(t,"l",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return E})),n.d(t,"c",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"k",(function(){return y})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"j",(function(){return k})),n.d(t,"q",(function(){return T})),n.d(t,"p",(function(){return x})),n.d(t,"o",(function(){return j})),n.d(t,"s",(function(){return I})),n.d(t,"r",(function(){return A})),n.d(t,"m",(function(){return w})),n.d(t,"e",(function(){return S})),n.d(t,"a",(function(){return C})),n.d(t,"i",(function(){return N}));var a=n("STRW"),r=n("MwQV"),o=n("c8c+"),c=n("Qu/B"),l=n("EW+5"),i=Object(l.a)(a.a),u=i.loading,s=i.itemsListLoaded,d=i.error,b=function(e){return{type:a.a.ITEM_LOADED,payload:e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){var a=n().chatbot.get("item");return r.a.call("patch","/methods/chat-bots/".concat(a.get("id")),{temporary:+e},a.toJSON())}},p=function(e,t,n){return function(a){var l={page:e};t.size&&(l.filter=Object(o.a)(t)),n.size&&(l.order=Object(c.a)(n)),a(u()),r.a.call("get","/methods/chat-bots",l,{}).then((function(e){a(s({filters:t,sort:n,response:e}))})).catch((function(e){return a(d(e))}))}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){n(u()),r.a.call("get","/methods/chat-bots/".concat(e),{temporary:t}).data((function(e){n(b(e))})).catch((function(e){return n(d(e))}))}},E=function(e){return{type:a.a.MOVE,payload:{position:e}}},g=function(e){return{type:a.a.NEW_BLOCK,payload:e}},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:a.a.SELECT,payload:{index:e,add:t}}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:a.a.RENDERED,payload:{id:e.toString(),onlySide:t}}},h=function(e){return{type:a.a.START_CONNECTION,payload:{state:e}}},O=function(e,t){return{type:a.a.CREATE_CONNECTION,payload:{from:e,to:t}}},k=function(e){return{type:a.a.REMOVE_CONNECTION,payload:{from:e}}},T=function(e){return{type:a.a.SET_SCALE,payload:{scale:e}}},x=function(e){return{type:a.a.CHANGE_NAME,payload:{name:e}}},j=function(e){return{type:a.a.SET_EDIT,payload:{index:e&&e.toString()}}},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:a.a.UPDATE_EDIT,payload:{key:e,value:t,path:n}}},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:a.a.UPDATE_CARD_INDEX_EDIT,payload:{key:e,index:t}}},w=function(){return{type:a.a.SAVE_EDIT,payload:{}}},S=function(){return{type:a.a.DELETE_EDIT,payload:{}}},C=function(){return{type:a.a.ADD_BUTTON,payload:{}}},N=function(e){return{type:a.a.REMOVE_BUTTON,payload:{index:e}}}},"EW+5":function(e,t,n){"use strict";function a(e){return{loading:function(){return{type:e.LOADING}},error:function(t){return{type:e.LOADING_ERROR,payload:t}},itemsListLoaded:function(t){return{type:e.ITEMS_LOADED,payload:t}}}}n.d(t,"a",(function(){return a}))},FBLP:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),l=n("bFnZ"),i=n.n(l),u=n("9Koi");function s(e){var t=e.show,n=e.text,a=e.onConfirm,o=e.onCancel,c=Object(u.a)().t;return r.a.createElement(i.a,{title:"",show:t,onConfirm:a,onCancel:o,confirmBtnText:c("common.yes"),cancelBtnText:c("common.no"),showCancel:!0,type:"warning"},n)}s.propTypes={onConfirm:c.a.func.isRequired,onCancel:c.a.func.isRequired,show:c.a.bool.isRequired,text:c.a.string.isRequired}},P2Na:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){var t=new FormData;return t.append("file",e),a.a.call("post","/methods/image",{},t)}},"Qu/B":function(e,t,n){"use strict";function a(e){return e.map((function(e){return e.get("sort")})).toArray().join(",")}n.d(t,"a",(function(){return a}))},"c8c+":function(e,t,n){"use strict";function a(e){var t=e.map((function(e){return{column:e.get("column"),operator:e.get("operator"),value:e.get("value")}})).toArray();return JSON.stringify(t)}n.d(t,"a",(function(){return a}))},mI4U:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n("o0o1"),r=n.n(a),o=n("q1tI"),c=n.n(o),l=n("17x9"),i=n.n(l),u=n("yzbm"),s=n("MwQV"),d=n("bNQv"),b=n.n(d),m=n("mNz5"),p=n.n(m),f=n("ma3e");function E(e){var t=e.onDelete,n=e.url,a=e.imageLoaded;return c.a.createElement("div",{className:"image-preview position-relative mt-4"},c.a.createElement("button",{type:"button",onClick:t,className:"btn btn-link no-shadow position-absolute image-preview-close-btn py-0 px-1 text-dec-none"},c.a.createElement(f.Q,{className:"color-red position-relative"})),c.a.createElement("img",{src:n,alt:"",className:"img-fluid",style:{filter:a?"none":"grayscale(0.7)"}}))}E.propTypes={imageLoaded:i.a.bool,onDelete:i.a.func.isRequired,url:i.a.string.isRequired};var g=n("TSYQ"),v=n.n(g),y=n("9Koi"),h=n("P2Na");function O(e){return new Promise((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t,n,a,r,o,c){try{var l=e[o](c),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(a,r)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function I(e){var t=e.types,n=e.maxFilesCount,a=e.files,l=e.onChange,i=x(Object(o.useState)([]),2),d=i[0],m=i[1],g=Object(y.a)().t;Object(o.useEffect)((function(){b()(a,(function(e){s.a.call("get","/methods/image/".concat(e)).then((function(t){m((function(n){var a=n.slice();return a.push({id:e,internalId:e,url:t.data}),a}))}))}))}),[]);var j=function(e){m((function(t){var n=t.filter((function(t){return t.internalId!==e}));return setTimeout((function(){return l(n.map((function(e){return e.id})),n)}),0),n}))},I=Object(o.useCallback)((function(e,t){m((function(a){var r=a.slice();return r.unshift({id:null,internalId:e,url:t}),n?r.slice(0,n):r}))}),[m,n]);return c.a.createElement("div",null,c.a.createElement(u.a,{onDrop:function(e){var t=e.map(function(){var e,t=(e=r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p()(),e.next=3,O(t);case 3:return a=e.sent,I(n,a),e.abrupt("return",new Promise((function(e){Object(h.a)(t).then((function(t){m((function(r){var o=r.slice(),c=o.findIndex((function(e){return e.internalId===n}));return-1!==c&&(o[c]={id:t.data.id,internalId:n,url:a}),e(d),o}))})).validation((function(){j(n),e(d)})).catch((function(){j(n),e(d)}))})));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){T(o,a,r,c,l,"next",e)}function l(e){T(o,a,r,c,l,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}());Promise.all(t).then((function(){m((function(e){return setTimeout((function(){return l(e.map((function(e){return e.id})),e)}),0),n?e.slice(0,n):e}))}))},accept:t.length?t:null},(function(e){var t=e.getRootProps,a=e.getInputProps;return c.a.createElement("section",{className:v()("dropzone-class",{disabled:!!n&&n===d.length})},c.a.createElement("div",k({},t(),{className:"load-img d-flex justify-content-center flex-column align-items-center p-3"}),c.a.createElement("input",k({},a(),{multiple:!1})),c.a.createElement(f.c,{className:"icon-size-40 color-gray"}),c.a.createElement("div",{className:"load-img-tip mt-3 text-center"},g("common.drag-and-drop"))))})),c.a.createElement("div",null,d.map((function(e){return c.a.createElement(E,{key:e.internalId,url:e.url,imageLoaded:!!e.id,onDelete:function(){return j(e.internalId)}})}))))}I.propTypes={types:i.a.array,files:i.a.array.isRequired,onChange:i.a.func.isRequired,maxFilesCount:i.a.number}},n7jJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),l=n("bFnZ"),i=n.n(l);function u(e){var t=e.show,n=e.text,a=e.onConfirm,o=e.type,c=void 0===o?"success":o;return r.a.createElement(i.a,{title:"",show:t,onConfirm:a,type:c},n)}u.propTypes={onConfirm:c.a.func.isRequired,show:c.a.bool.isRequired,text:c.a.string.isRequired,type:c.a.string}},rVTC:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'body {\n  user-select: none;\n}\n\n.builder-field {\n  background-image: url("/img/grid.png");\n}\n\n.block {\n  background-color: #fff;\n  position: absolute;\n  width: 220px;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);\n}\n.block.react-draggable-dragging {\n  z-index: 5 !important;\n}\n.block.selected {\n  box-shadow: 0 0 5px #5555e2;\n}\n.block .header {\n  cursor: pointer;\n  padding: 7px 14px;\n  background-color: #EDF2F6;\n  border-radius: 5px 5px 0 0;\n  color: black;\n  font-weight: bold;\n  font-size: 15px;\n}\n.block .header .context-menu {\n  color: #728CA3;\n  float: right;\n}\n.block .block-content {\n  padding: 10px;\n}\n.block .block-content .message {\n  color: #668AAA;\n}\n.block .block-content .message p {\n  padding-bottom: 0;\n}\n.block .block-content .api {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #668AAA;\n}\n.block .block-content .api .api-method {\n  color: #AFAFAF;\n  margin-right: 10px;\n}\n.block .block-content .variable .variable-name {\n  font-style: italic;\n  color: #0abfe0;\n}\n.block .block-content var {\n  color: #0abfe0;\n}\n.block .block-button {\n  margin: 10px 13px;\n  background-color: #F5F5F5;\n  color: #668AAA;\n  padding: 6px 10px;\n}\n.block .block-button[connected=connected-right] .connect-right {\n  transition: none;\n  opacity: 1;\n  right: -24px;\n}\n.block .block-button[connected=connected-left] .connect-left {\n  transition: none;\n  opacity: 1;\n  left: -24px;\n}\n.block .block-button .connect {\n  border: 2px solid #fff;\n  width: 17px;\n  height: 17px;\n  background-size: 13px 13px;\n}\n.block .block-button .connect.connect-right {\n  top: calc(50% - 9px);\n}\n.block .block-button .connect.connect-left {\n  top: calc(50% - 9px);\n}\n.block .carousel.slide .card {\n  height: 180px;\n  overflow-y: scroll;\n}\n.block .carousel-control-next {\n  right: -15px;\n}\n.block .carousel-control-prev {\n  left: -15px;\n}\n.block .carousel-control-prev span, .block .carousel-control-next span {\n  background-color: rgba(0, 0, 0, 0.55);\n  border-radius: 50%;\n  padding: 10px;\n  background-size: 50%;\n}\n\n.connectable {\n  position: relative;\n}\n\n.connect {\n  z-index: 6;\n  opacity: 0;\n  background-color: transparent;\n  border-radius: 50%;\n  position: absolute;\n  cursor: pointer;\n  background-image: url("/img/eclipse.svg");\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 38px;\n  height: 38px;\n  transition: 0.5s ease;\n}\n.connect.connect-top {\n  z-index: 4;\n  right: calc(50% - 20px);\n  top: -18px;\n}\n.connect.connect-right {\n  right: -18px;\n  top: calc(50% - 18px);\n}\n.connect.connect-bottom {\n  right: calc(50% - 20px);\n  bottom: -18px;\n}\n.connect.connect-left {\n  left: -18px;\n  top: calc(50% - 18px);\n}\n\n.connectable:hover > .connect, .connecting, .connect:hover {\n  opacity: 1;\n}\n.connectable:hover > .connect.connect-top, .connecting.connect-top, .connect:hover.connect-top {\n  top: -24px;\n}\n.connectable:hover > .connect.connect-right, .connecting.connect-right, .connect:hover.connect-right {\n  right: -24px;\n}\n.connectable:hover > .connect.connect-bottom, .connecting.connect-bottom, .connect:hover.connect-bottom {\n  bottom: -24px;\n}\n.connectable:hover > .connect.connect-left, .connecting.connect-left, .connect:hover.connect-left {\n  left: -24px;\n}\n\n.connect-content {\n  z-index: 5;\n  position: relative;\n}\n\n.configure {\n  background-color: rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  position: fixed;\n  top: 20px;\n  right: 20px;\n}\n.configure .btn-success {\n  margin-right: 10px;\n}\n.configure .form-control {\n  width: 200px;\n  margin-right: 10px;\n  display: inline-block;\n}\n\n.minimap {\n  background-color: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n}\n.minimap .buttons {\n  width: 220px;\n}\n.minimap .buttons .btn {\n  margin: 5px;\n}\n.minimap .buttons .counter {\n  color: #ffffff;\n}\n\n.panel {\n  background-color: #FBFDFE;\n  height: 100%;\n  position: absolute;\n  padding: 10px;\n  border: 1px solid #EEEEEE;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.06);\n}\n.panel .panel-header {\n  padding: 20px 0;\n  font-style: italic;\n  font-size: 17px;\n}\n.panel .create-btn {\n  margin: 6px 0;\n  padding: 5px 0 0 20px;\n}\n.panel .create-btn .color-label {\n  width: 6px;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n  left: 0;\n}\n.panel .create-btn .drag-element {\n  color: #c2c2c2;\n}\n.panel .block-creation .plus-icon {\n  position: absolute;\n  top: -10px;\n  left: -16px;\n  font-size: 14px;\n}\n\n.remove-anchor {\n  position: absolute;\n  z-index: 1;\n  background-color: white;\n  border: 1px solid #94B3CB;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  padding: 2px;\n  color: #94B3CB;\n  font-size: 10px;\n}\n\n.block-edit {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  justify-content: space-between;\n  background-color: white;\n  z-index: 500;\n  width: 350px;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  padding: 20px 20px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.25);\n}\n.block-edit .header {\n  margin: -20px -20px 20px -20px;\n  padding: 15px;\n}\n.block-edit .block-edit-body {\n  height: 100%;\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  scrollbar-width: none;\n}\n.block-edit .actions {\n  padding-top: 20px;\n}\n.block-edit .actions .btn {\n  margin-right: 10px;\n}\n.block-edit .api-edit-collapse {\n  padding: 8px 0;\n  border-bottom: 1px solid #cccccc;\n  margin-bottom: 10px;\n}\n.block-edit .api-edit-collapse .toggler {\n  float: right;\n  font-size: 18px;\n}\n.block-edit .value-group {\n  position: relative;\n  margin-bottom: 10px;\n}\n.block-edit .value-group .value-group-key,\n.block-edit .value-group .value-group-value {\n  font-size: 10px;\n  display: inline-block;\n}\n.block-edit .value-group .value-group-key {\n  margin-right: 10px;\n  width: 100px;\n}\n.block-edit .value-group .value-group-value {\n  width: 200px;\n}\n.block-edit .value-group .value-group-remove {\n  position: absolute;\n  top: 5px;\n  font-size: 12px;\n  right: 8px;\n}\n.block-edit .add-value-group {\n  display: block;\n  margin-top: 15px;\n}\n.block-edit .card-button-group {\n  position: relative;\n}\n.block-edit .card-button-group .card-button-group-type,\n.block-edit .card-button-group .card-button-group-text,\n.block-edit .card-button-group .card-button-group-value {\n  display: inline-block;\n  font-size: 10px;\n  margin-bottom: 5px;\n  margin-top: 5px;\n}\n.block-edit .card-button-group .card-button-group-type {\n  width: 75px;\n  margin-right: 5px;\n}\n.block-edit .card-button-group .card-button-group-text {\n  width: 75px;\n  margin-right: 5px;\n}\n.block-edit .card-button-group .card-button-group-value {\n  width: 105px;\n}\n.block-edit .card-button-group .card-button-group-remove {\n  top: 9px;\n  right: -11px;\n  font-size: 11px;\n  position: absolute;\n}\n\n.edit-bgdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.5);\n}\n\n.editable-block {\n  margin-bottom: 20px;\n}\n\n.help-question {\n  margin-left: 10px;\n}\n\n.input-with-remove {\n  position: relative;\n}\n.input-with-remove .remove-btn {\n  position: absolute;\n  right: 10px;\n  top: 5px;\n}\n.input-with-remove input {\n  padding-right: 30px;\n}\n\n.attachment-preview {\n  max-width: 100%;\n  max-height: 150px;\n}',""])},vs2M:function(e,t,n){var a=n("rVTC");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,r);a.locals&&(e.exports=a.locals)},zwA0:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("q1tI"),r=n.n(a),o=n("9Koi");function c(){var e=Object(o.a)().t;return r.a.createElement("div",null,e("common.site-error-message"))}}}]);