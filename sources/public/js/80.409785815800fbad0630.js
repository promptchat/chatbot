(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{"7J6V":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("q1tI"),r=a.n(n),l=a("17x9"),o=a.n(l);function c(e){var t=e.name;return r.a.createElement("span",{className:"table-tag d-inline-block px-2 py-1 mr-1 mb-1"},t)}c.propTypes={name:o.a.string.isRequired}},BK2s:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),l=a("jeY2"),o=a("17x9"),c=a.n(o),i=a("9Koi"),u=a("dbgk"),s=a("55Ip"),m=a("jQco"),p=a("Yfk4"),d=a("2pJb"),f=a("4vsJ"),g=a("1Y33"),b=a("Uf9I"),y=a("QPV6"),h=a("GmYL"),O=a("OKOT"),v=a("Jxq0"),E=a("eOHm"),j=a("R7Vh"),x=a("EW+5"),R=a("c8c+"),w=a("Qu/B"),S=a("MwQV"),q=Object(x.a)(j.a),P=q.loading,C=q.itemsListLoaded,T=q.error,k=a("7J6V"),N=a("Q6vT"),I=a("ebzC"),A=a("ma3e"),V=a("5TAD"),F=a("sOKU"),B=a("LEWT"),J=a("mNz5"),D=a.n(J),M=a("Llg8"),Q=a("W7It");function L(e){var t=e.onSuccess,a=e.onReject,n=Object(i.a)().t;return r.a.createElement(Q.a,{url:"/methods/templates/import",label:n("templates.import-modal.file-label"),confirmText:n("templates.import-modal.ok-btn"),cancelText:n("templates.import-modal.cancel-btn"),onSuccess:t,onReject:a})}L.propTypes={onSuccess:c.a.func.isRequired,onReject:c.a.func.isRequired};var U=L,_=a("rpa7"),z=a("cJ7N");function W(e){var t=e.templateId;return r.a.createElement(z.a,{apiUrl:"/methods/templates/".concat(t,"/create-chat-bot"),buildRedirectTo:function(e){var t=e.id;return"/chatbot/".concat(t,"/edit")}})}W.propTypes={templateId:c.a.number.isRequired};var K=r.a.memo(W),Y=a("83d4"),H=a("DCcX"),$=a("CaDr"),G=a("OBzv"),X=a("6Rhw");function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function te(e){var t=e.onSuccess,a=e.onReject,l=Object(i.a)().t,o=Z(Object(n.useState)(null),2),c=o[0],u=o[1],s=Object(n.useCallback)((function(){c&&S.a.call("post","/methods/templates/import-by-code",{},{code:c}).then((function(e){200===e.status?t():a()}))}),[c,t,a]),m=Object(n.useCallback)((function(e){u(e.target.value)}),[u]);return r.a.createElement(H.a,{isOpen:!0,toggle:a,className:"confirm-modal"},r.a.createElement($.a,null,r.a.createElement(X.a,{name:"code",label:l("templates.import-modal.code-label"),value:c,onChange:m,errors:{code:[]}})),r.a.createElement(G.a,null,r.a.createElement(F.a,{color:"primary",onClick:s,disabled:!c},l("templates.import-modal.ok-btn"))," ",r.a.createElement(F.a,{color:"secondary",onClick:a},l("templates.import-modal.cancel-btn"))))}te.propTypes={onSuccess:c.a.func.isRequired,onReject:c.a.func.isRequired};var ae=te,ne=a("OZO3");function re(e){var t=e.filters,a=e.sort,l=e.data,o=e.currentPage,c=e.lastPage,j=e.changeFilters,x=e.changeSort,R=e.changePage,w=e.showImportByCodeModal,S=Object(i.a)().t,q=Object(_.a)(),P=q.role===Y.c,C=Object(ne.a)((function(e,t){return r.a.createElement(U,{onSuccess:e,onReject:t})}),o,R),T=Object(n.useCallback)((function(){w().then((function(){R(o)})).catch((function(){}))}),[w,o,R]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,S("templates.index-page.title")),r.a.createElement("div",{className:"text-right"},r.a.createElement(F.a,{color:"info",onClick:C,className:"mt-2 mb-4 mr-2"},S("templates.index-page.import-btn")),P?r.a.createElement(F.a,{color:"warning",onClick:T,className:"mt-2 mb-4 mr-2"},S("templates.index-page.import-by-code-btn")):null,r.a.createElement(s.a,{to:"/templates/create",className:"btn btn-primary mt-2 mb-4"},S("templates.index-page.add-template"))),r.a.createElement(m.d,{filters:t,changeFilters:j}),r.a.createElement(p.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:51}}," "),r.a.createElement("th",null,r.a.createElement(d.a,{title:S("templates.index-page.name-column"),active:Object(f.b)(a,"templates.name")||Object(g.b)(t,"templates.column")},r.a.createElement(f.a,{sort:a,name:"templates.name",displayName:S("templates.index-page.name-column"),changeSort:x,order:1}),r.a.createElement(b.a,{displayName:S("templates.index-page.name-column"),filters:t,changeFilters:j,column:"templates.name"}))),r.a.createElement("th",null,r.a.createElement(d.a,{title:S("templates.index-page.tags-column"),active:Object(g.b)(t,"scopeTemplateTagsWhere")},r.a.createElement(N.a,{displayName:S("templates.index-page.tags-column"),filters:t,changeFilters:j,column:"scopeTemplateTagsWhere",loadOptions:I.a}))),P?r.a.createElement("th",null,S("templates.index-page.import-code-column")):null,r.a.createElement("th",null," "))),r.a.createElement("tbody",null,l.length?l.map((function(e){return r.a.createElement("tr",{key:"templates-".concat(e.id),id:e.id},r.a.createElement("td",{className:"p-1"},e.imageUrl?r.a.createElement("img",{src:e.imageUrl,alt:e.name,className:"img-fluid",style:{height:51}}):r.a.createElement("div",{style:{width:51,height:51,background:"#cecece"}})),r.a.createElement("td",{style:{verticalAlign:"middle"}},e.name),r.a.createElement("td",{className:"last-update"},e.template_tags.map((function(e){return r.a.createElement(k.a,{key:e.id,name:e.name})}))),P?r.a.createElement("td",{style:{verticalAlign:"middle"}},r.a.createElement("code",null,e.import_code)):null,r.a.createElement(y.a,null,(function(t){return r.a.createElement(r.a.Fragment,null,q.company_id?r.a.createElement(K,{templateId:e.id}):null,q.company_id===e.company_id?r.a.createElement(h.a,{url:"/templates/".concat(e.id,"/edit")}):null,r.a.createElement(V.a,{realLink:!0,url:"/methods/templates/".concat(e.id,"/export"),icon:r.a.createElement(A.w,{className:"icon-size-15 color-blue mr-2"}),text:S("templates.index-page.export-btn")}),q.company_id===e.company_id?r.a.createElement(O.a,{url:"/methods/templates/".concat(e.id),setConfirm:t,onSuccess:function(){return R(o)}}):null)})))})):r.a.createElement(v.a,{colspan:5}))),r.a.createElement(E.a,{currentPage:o,lastPage:c,loadPage:R,route:"/templates"}))}re.propTypes={showImportByCodeModal:c.a.func.isRequired,changeFilters:c.a.func.isRequired,changeSort:c.a.func.isRequired,changePage:c.a.func.isRequired,data:c.a.array.isRequired,currentPage:c.a.number,lastPage:c.a.number,filters:c.a.object.isRequired,sort:c.a.object.isRequired};t.default=Object(l.a)(re,(function(e){var t,a=e.templates;return{loading:a.get("loading"),data:null===(t=a.get("data"))||void 0===t?void 0:t.toArray(),errors:a.get("errors"),currentPage:a.get("currentPage"),lastPage:a.get("lastPage"),filters:a.get("filters"),sort:a.get("sort")}}),(function(e){return{loadPage:function(t,a,n){return e(function(e,t,a){return function(n){var r={page:e};t.size&&(r.filter=Object(R.a)(t)),a.size&&(r.order=Object(w.a)(a)),n(P()),S.a.call("get","/methods/templates",r,{}).then((function(e){n(C({filters:t,sort:a,response:e}))})).catch((function(e){return n(T(e))}))}}(t,a,n))},showImportByCodeModal:function(){return e((function(e){return new Promise((function(t,a){var n=D()(),l=new M.a({id:n,data:{onConfirm:t,onReject:a},render:function(){return r.a.createElement(ae,{onSuccess:function(){t(),e(Object(B.b)(n))},onReject:function(){a(),e(Object(B.b)(n))}})}});e(Object(B.a)(l))}))}))}}}))},Q6vT:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),l=a("QDav"),o=a("17x9"),c=a.n(o),i=a("1Y33"),u=a("g2RW"),s=a("Mpt7"),m=a("jQco"),p=a("9Koi");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={container:function(e){return b(b({},e),{},{border:"1px solid #ced4da",display:"inline-block",width:"auto",borderRadius:"5px",minHeight:"35px"})},control:function(e){return b(b({},e),{},{border:"none",minHeight:"35px","&, &:hover":{border:"none",boxShadow:"none"},background:"transparent"})},singleValue:function(e){return b(b({},e),{},{margin:"0",font:"normal normal 15px/17px 'Roboto Regular', sans-serif",top:"45%"})},valueContainer:function(e){return b(b({},e),{},{padding:"2px 0 2px 8px",width:"130px"})},indicatorsContainer:function(e){return b(b({},e),{},{"& > div":{padding:"8px 4px 8px 0"},top:"-3px",paddingLeft:"6px",alignItems:"baseline"})},indicatorSeparator:function(e){return b(b({},e),{},{display:"none"})},placeholder:function(e){return b(b({},e),{},{font:"normal normal 15px/18px 'Roboto Regular', sans-serif",color:"#B0B0B0"})},option:function(e){return b(b({},e),{},{font:"normal normal 15px/17px 'Roboto Regular', sans-serif","&:hover, &:focus, &:active":{font:"normal normal 15px/17px 'Roboto Regular', sans-serif"}})}};function O(e){var t=e.filter,a=e.handleChange,o=e.loadOptions,c=Object(p.a)().t,i=d(Object(n.useState)(Object(s.f)(t.get("filterValue"))?t.get("filterValue").toJS():t.get("filterValue")),2),u=i[0],f=i[1];return r.a.createElement(l.a,{styles:h,cacheOptions:!0,defaultOptions:!0,loadOptions:o,onChange:function(e){f(e),a(t.set("value",e.length?e.map((function(e){return e.value})):null).set("filterValue",e.length?e:null).set("displayingType",m.b))},value:u,isMulti:!0,placeholder:c("tables.filter-select-placeholder",{name:t.get("display")})})}function v(e){var t=e.filters,a=e.changeFilters,n=e.column,l=e.displayName,o=e.loadOptions;return r.a.createElement(i.a,{filters:t,changeFilters:a,column:n,displayName:l,operator:u.c,renderView:function(e,t){return r.a.createElement(O,{filter:e,handleChange:t,displayName:l,loadOptions:o})}})}O.propTypes={filter:c.a.object.isRequired,loadOptions:c.a.func.isRequired,handleChange:c.a.func.isRequired,displayName:c.a.string.isRequired},v.propTypes={loadOptions:c.a.func.isRequired,changeFilters:c.a.func.isRequired,column:c.a.string.isRequired,displayName:c.a.string.isRequired,filters:c.a.any.isRequired},t.a=r.a.memo(v)}}]);