(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/kxI":function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),i=n("q1tI"),o=n.n(i),s=n("17x9"),l=n.n(s),u=n("TSYQ"),c=n.n(u),p=n("33Jr"),f={tag:p.q,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},d=function(e){var t=e.className,n=e.cssModule,i=e.innerRef,s=e.tag,l=Object(r.a)(e,["className","cssModule","innerRef","tag"]),u=Object(p.m)(c()(t,"card-body"),n);return o.a.createElement(s,Object(a.a)({},l,{className:u,ref:i}))};d.propTypes=f,d.defaultProps={tag:"div"},t.a=d},"6jMY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n("MwQV");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return new Promise((function(n){var r={q:t};e&&(r.type=e),a.a.call("get","/methods/integrations/search",r).data((function(e){n(e.map((function(e){return{label:e.name,value:e.id,integration:e}})))}))}))}}var i=r();t.a=i},"6ukn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/tags/search-company-tags",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},BLzl:function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),i=n("q1tI"),o=n.n(i),s=n("17x9"),l=n.n(s),u=n("TSYQ"),c=n.n(u),p=n("33Jr"),f={tag:p.q,inverse:l.a.bool,color:l.a.string,body:l.a.bool,outline:l.a.bool,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},d=function(e){var t=e.className,n=e.cssModule,i=e.color,s=e.body,l=e.inverse,u=e.outline,f=e.tag,d=e.innerRef,m=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),b=Object(p.m)(c()(t,"card",!!l&&"text-white",!!s&&"card-body",!!i&&(u?"border":"bg")+"-"+i),n);return o.a.createElement(f,Object(a.a)({},m,{className:b,ref:d}))};d.propTypes=f,d.defaultProps={tag:"div"},t.a=d},"Bg/h":function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),s=n("R5y6"),l=n("9Koi"),u=function(e){return e.map((function(e){var t=e,n=[];return t.variables.phone_number&&n.push(t.variables.phone_number),t.variables.first_name&&n.push(t.variables.first_name),t.variables.last_name&&n.push(t.variables.last_name),{label:n.join(" ")||t.name,value:t.id}}))};function c(e){var t=e.values,n=e.errors,a=e.setFieldValue,i=e.className,o=Object(l.a)().t;return r.a.createElement(s.a,{className:i,name:"clients",label:o("instantMessages.form.to-label"),value:t.clients,setFieldValue:a,errors:n,loadOptions:function(){return[]},defaultOptions:[],isMulti:!0})}c.propTypes={values:o.a.object.isRequired,errors:o.a.object.isRequired,setFieldValue:o.a.func.isRequired,className:o.a.string},t.a=c},QDav:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=(n("qKvR"),n("i8i4"),n("17x9"),n("q/f6")),o=n("njTy"),s=(n("iYmT"),n("FUBA"),n("1m/E"));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var u={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},c=function(e){var t,n;return n=t=function(t){var n,a;function o(e){var n;return(n=t.call(this)||this).select=void 0,n.lastRequest=void 0,n.mounted=!1,n.optionsCache={},n.handleInputChange=function(e,t){var a=n.props,r=a.cacheOptions,o=a.onInputChange,s=Object(i.k)(e,t,o);if(!s)return delete n.lastRequest,void n.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(r&&n.optionsCache[s])n.setState({inputValue:s,loadedInputValue:s,loadedOptions:n.optionsCache[s],isLoading:!1,passEmptyOptions:!1});else{var l=n.lastRequest={};n.setState({inputValue:s,isLoading:!0,passEmptyOptions:!n.state.loadedInputValue},(function(){n.loadOptions(s,(function(e){n.mounted&&(e&&(n.optionsCache[s]=e),l===n.lastRequest&&(delete n.lastRequest,n.setState({isLoading:!1,loadedInputValue:s,loadedOptions:e||[],passEmptyOptions:!1})))}))}))}return s},n.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:void 0!==e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},n}a=t,(n=o).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var s=o.prototype;return s.componentDidMount=function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,n=this.state.inputValue;!0===t&&this.loadOptions(n,(function(t){if(e.mounted){var n=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:n})}}))},s.UNSAFE_componentWillReceiveProps=function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})},s.componentWillUnmount=function(){this.mounted=!1},s.focus=function(){this.select.focus()},s.blur=function(){this.select.blur()},s.loadOptions=function(e,t){var n=this.props.loadOptions;if(!n)return t();var a=n(e,t);a&&"function"==typeof a.then&&a.then(t,(function(){return t()}))},s.render=function(){var t=this,n=this.props,a=(n.loadOptions,n.isLoading),i=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(n,["loadOptions","isLoading"]),o=this.state,s=o.defaultOptions,u=o.inputValue,c=o.isLoading,p=o.loadedInputValue,f=o.loadedOptions,d=o.passEmptyOptions?[]:u&&p?f:s||[];return r.a.createElement(e,l({},i,{ref:function(e){t.select=e},options:d,isLoading:c||a,onInputChange:this.handleInputChange}))},o}(a.Component),t.defaultProps=u,n},p=Object(s.a)(o.a),f=c(p);t.a=f},R5y6:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n("q1tI"),r=n.n(a),i=n("QDav"),o=n("xilt"),s=n("jrRI"),l=n("3OM0"),u=n("TSYQ"),c=n.n(u),p=n("sPdi"),f=n("17x9"),d=n.n(f),m=n("9Koi");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={control:function(e){return v(v({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function O(e){var t,n,a=e.id,u=e.label,f=e.errors,d=e.loadOptions,b=e.name,v=e.setFieldValue,h=e.handleBlur,O=e.value,y=e.className,j=e.placeholder,w=e.isClearable,C=e.cacheOptions,S=e.isMulti,E=e.isDisabled,q=e.defaultOptions,R=Object(m.a)().t,V=w?o.a:i.a;return r.a.createElement(s.a,{className:c()(y)},r.a.createElement(l.a,{htmlFor:a},u),r.a.createElement(V,{cacheOptions:C,defaultOptions:q,loadOptions:d,onChange:function(e){v(b,e)},value:O,isClearable:w,className:c()({"is-invalid":!!(null===(t=f[b])||void 0===t?void 0:t.length)}),placeholder:j||R("common.default-select-placeholder"),styles:g,isMulti:S,isDisabled:E,onBlur:h}),(null===(n=f[b])||void 0===n?void 0:n.length)?r.a.createElement(p.a,{errors:f[b]}):null)}O.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},O.propTypes={errors:d.a.object.isRequired,id:d.a.oneOfType([d.a.string,d.a.number]),value:d.a.oneOfType([d.a.shape({label:d.a.string,value:d.a.oneOfType([d.a.string,d.a.number])}),d.a.array]),label:d.a.any.isRequired,name:d.a.string.isRequired,handleBlur:d.a.func,setFieldValue:d.a.func.isRequired,loadOptions:d.a.func.isRequired,className:d.a.string,placeholder:d.a.string,isClearable:d.a.bool,isMulti:d.a.bool,isDisabled:d.a.bool,cacheOptions:d.a.bool,defaultOptions:d.a.oneOfType([d.a.bool,d.a.array])}},"XgT/":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),s=n("nc57"),l=n("9Koi"),u=n("ok1R"),c=n("rhny"),p=n("R5y6"),f=n("6jMY"),d=n("6ukn"),m=n("Bg/h"),b=n("sOKU");function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e){var t,n=e.fromList,i=e.values,o=e.errors,s=e.handleTagsChange,h=e.handleIntegrationChange,g=e.handleClientChange,O=e.calculation,y=Object(l.a)().t,j=v(Object(a.useState)(n),2),w=j[0],C=j[1];return r.a.createElement(u.a,null,r.a.createElement(c.a,{md:12},!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"limiter",name:"tags",label:y("campaigns.form.tags-label"),value:i.tags,setFieldValue:s,errors:o,loadOptions:d.a,isMulti:!0,isClearable:!1}),r.a.createElement(p.a,{className:"limiter",id:"integration",name:"integration",label:y("campaigns.form.channel-label"),value:i.integration,setFieldValue:h,errors:o,loadOptions:f.a})),r.a.createElement("div",{className:"sub-label-bottom text-middle mb-4"},r.a.createElement("p",null,y("campaigns.form.clients-count",{count:O?y("campaigns.form.calculation"):null===(t=i.clients)||void 0===t?void 0:t.length})),r.a.createElement("a",{onClick:function(){return C(!w)}},y(w?"campaigns.form.hide":"campaigns.form.see-all"))),w&&r.a.createElement(m.a,{values:i,errors:o,setFieldValue:g}),r.a.createElement("div",{className:"text-right"},r.a.createElement(b.a,{color:"primary"},y("campaigns.form.subscribe-btn")))))}g.propTypes={fromList:o.a.bool,values:o.a.object.isRequired,errors:o.a.object.isRequired,handleClientChange:o.a.func.isRequired,handleTagsChange:o.a.func.isRequired,handleIntegrationChange:o.a.func.isRequired,calculation:o.a.bool};var O=g,y=n("MwQV");function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function E(e){var t=e.initialData,n=e.handleSubmit,i=e.afterSave,o=e.fromFilters,l=Object(a.useCallback)((function(e,t){var a={ids:e.clients?e.clients.map((function(e){return e.value})):[]};n(a).data((function(e){t.setSubmitting(!1),i(e)})).validation((function(e,n){t.setErrors(n),t.setSubmitting(!1)})).catch((function(){t.setSubmitting(!1)}))}),[n,i]),u=C(Object(a.useState)(!1),2),c=u[0],p=u[1],f=Object(a.useCallback)((function(e,n,a,r){p(!0),o?y.a.call("get","/methods/campaigns/clients-from-filters",{filters:JSON.stringify(t.filters),selected:JSON.stringify(t.selected),integration_id:e}).data((function(e){p(!1),setTimeout((function(){r(Object(m.b)(e.clients))}))})):y.a.call("get","/methods/campaigns/clients",{tags:null==n?void 0:n.map((function(e){return e.value})),integration_id:e}).data((function(e){p(!1),setTimeout((function(){r(Object(m.b)(e.clients))}))}))}),[o,t.filters,t.selected]);return r.a.createElement(s.a,{initialValues:t,handleSubmit:l,renderForm:function(e){var t=e.setFieldValue,n=e.values,a=e.errors,i=e.setErrors,s=w(e,["setFieldValue","values","errors","setErrors"]);return r.a.createElement(O,j({},s,{errors:a,setErrors:i,values:n,fromList:o,calculation:c,handleTagsChange:function(e,a){var r,i;t(e,a),f(null===(r=n.integration)||void 0===r?void 0:r.value,a,null===(i=n.sendViaIntegration)||void 0===i?void 0:i.value,(function(e){return t("clients",e)}))},handleIntegrationChange:function(e,a){var r;t(e,a),a||(t("clients",null),t("new_clients",null)),f(a?a.value:null,n.tags,null===(r=n.sendViaIntegration)||void 0===r?void 0:r.value,(function(e){return t("clients",e)}))},handleClientChange:function(e,n){t(e,n)}}))}})}E.propTypes={initialData:o.a.object.isRequired,handleSubmit:o.a.func.isRequired,afterSave:o.a.func.isRequired,fromFilters:o.a.bool};t.a=E},dbgk:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i);function s(e){var t=e.children;return r.a.createElement("h1",{className:"title-main mb-3"},t)}s.propTypes={children:o.a.any.isRequired}},vwsU:function(e,t,n){"use strict";n.d(t,"b",(function(){return p}));var a=n("q1tI"),r=n.n(a),i=(n("qKvR"),n("i8i4"),n("17x9"),n("q/f6")),o=n("njTy"),s=(n("iYmT"),n("FUBA"),n("1m/E"));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var u=function(e,t){void 0===e&&(e="");var n=String(e).toLowerCase(),a=String(t.value).toLowerCase(),r=String(t.label).toLowerCase();return a===n||r===n},c=l({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'+e+'"'},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return u(e,t)}))||n.some((function(t){return u(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),p=function(e){var t,n;return n=t=function(t){var n,a;function o(e){var n;(n=t.call(this,e)||this).select=void 0,n.onChange=function(e,t){var a=n.props,r=a.getNewOptionData,o=a.inputValue,s=a.isMulti,l=a.onChange,u=a.onCreateOption,c=a.value,p=a.name;if("select-option"!==t.action)return l(e,t);var f=n.state.newOption,d=Array.isArray(e)?e:[e];if(d[d.length-1]!==f)l(e,t);else if(u)u(o);else{var m=r(o,o),b={action:"create-option",name:p};l(s?[].concat(Object(i.e)(c),[m]):m,b)}};var a=e.options||[];return n.state={newOption:void 0,options:a},n}a=t,(n=o).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var s=o.prototype;return s.UNSAFE_componentWillReceiveProps=function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,a=e.formatCreateLabel,r=e.getNewOptionData,o=e.inputValue,s=e.isLoading,l=e.isValidNewOption,u=e.value,c=e.options||[],p=this.state.newOption;p=l(o,Object(i.e)(u),c)?r(o,a(o)):void 0,this.setState({newOption:p,options:!t&&s||!p?c:"first"===n?[p].concat(c):[].concat(c,[p])})},s.focus=function(){this.select.focus()},s.blur=function(){this.select.blur()},s.render=function(){var t=this,n=this.state.options;return r.a.createElement(e,l({},this.props,{ref:function(e){t.select=e},options:n,onChange:this.onChange}))},o}(a.Component),t.defaultProps=c,n},f=p(o.a),d=Object(s.a)(f);t.a=d},xilt:function(e,t,n){"use strict";n("q1tI"),n("qKvR"),n("i8i4"),n("17x9");var a=n("njTy"),r=(n("iYmT"),n("FUBA"),n("1m/E")),i=n("QDav"),o=n("vwsU"),s=Object(o.b)(a.a),l=Object(r.a)(s),u=Object(i.b)(l);t.a=u}}]);