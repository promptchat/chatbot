(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"/r69":function(e,a,t){"use strict";var r=t("q1tI"),n=t.n(r),i=t("17x9"),l=t.n(i),o=t("sPdi"),s=t("jrRI"),c=t("3OM0"),u=t("TSYQ"),d=t.n(u),m=t("ma3e"),p=t("yzbm"),b=t("9Koi");function f(){return(f=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function g(e){var a,t,r=e.id,i=e.label,l=e.errors,u=e.name,g=e.className,v=e.value,y=e.setFieldValue,h=e.onRemove,O=e.disabled,E=e.types,j=void 0===E?[]:E,q=d()({"is-invalid":Boolean(l&&(null===(a=l[u])||void 0===a?void 0:a.length))}),k=Object(b.a)().t;return n.a.createElement(s.a,{className:d()(g)},n.a.createElement(c.a,{htmlFor:r,className:d()(q)},"function"==typeof i?i():i),n.a.createElement(p.a,{onDrop:function(e){y(u,e[0])},disabled:O,accept:j.length?j:null},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement("section",{className:d()("dropzone-class")},n.a.createElement("div",f({},a(),{className:"load-img d-flex justify-content-center flex-column align-items-center p-3"}),n.a.createElement("input",f({},t(),{multiple:!1})),n.a.createElement(m.d,{className:"icon-size-40 color-gray"}),n.a.createElement("div",{className:"load-img-tip mt-3 text-center"},k("common.drag-and-drop"))))})),v?n.a.createElement("div",{className:d()("position-relative file-preview mr-4",q)},v.name,n.a.createElement("button",{type:"button",className:"btn btn-link no-shadow position-absolute file-preview-close-btn py-0 px-1",onClick:function(){y(u,null),h&&h()}},n.a.createElement(m.vb,{className:"color-red position-relative"}))):null,l&&(null===(t=l[u])||void 0===t?void 0:t.length)?n.a.createElement(o.a,{errors:l[u]}):null)}g.propTypes={errors:l.a.object,id:l.a.oneOfType([l.a.string,l.a.number]),label:l.a.any,name:l.a.string.isRequired,className:l.a.string,value:l.a.object,setFieldValue:l.a.func.isRequired,onRemove:l.a.func,types:l.a.array,disabled:l.a.bool},a.a=n.a.memo(g)},LdVD:function(e,a,t){"use strict";var r=t("MwQV");a.a=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(a){return new Promise((function(t){r.a.call("get","/methods/departments/search",{q:a}).data((function(a){var r=a.map((function(e){return{label:e.name,value:e.id}}));t(e.concat(r))}))}))}}()(e)}},R5y6:function(e,a,t){"use strict";t.d(a,"a",(function(){return h}));var r=t("q1tI"),n=t.n(r),i=t("QDav"),l=t("xilt"),o=t("jrRI"),s=t("3OM0"),c=t("TSYQ"),u=t.n(c),d=t("sPdi"),m=t("17x9"),p=t.n(m),b=t("9Koi");function f(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?f(Object(t),!0).forEach((function(a){v(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function v(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var y={control:function(e){return g(g({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})},menu:function(e){return g(g({},e),{},{zIndex:10})}};function h(e){var a,t,r=e.id,c=e.label,m=e.errors,p=e.loadOptions,f=e.name,g=e.setFieldValue,v=e.handleBlur,h=e.value,O=e.className,E=e.labelClass,j=e.placeholder,q=e.isClearable,k=e.cacheOptions,N=e.isMulti,w=e.isDisabled,R=e.defaultOptions,M=Object(b.a)().t,S=q?l.a:i.a;return n.a.createElement(o.a,{className:u()(O)},n.a.createElement(s.a,{className:u()(E),htmlFor:r},c),n.a.createElement(S,{cacheOptions:k,defaultOptions:R,loadOptions:p,onChange:function(e){g(f,e)},value:h,isClearable:q,className:u()({"is-invalid":!!(null===(a=m[f])||void 0===a?void 0:a.length)}),placeholder:j||M("common.default-select-placeholder"),styles:y,isMulti:N,isDisabled:w,onBlur:v}),(null===(t=m[f])||void 0===t?void 0:t.length)?n.a.createElement(d.a,{errors:m[f]}):null)}h.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},h.propTypes={errors:p.a.object.isRequired,id:p.a.oneOfType([p.a.string,p.a.number]),value:p.a.oneOfType([p.a.shape({label:p.a.string,value:p.a.oneOfType([p.a.string,p.a.number])}),p.a.array]),label:p.a.any.isRequired,name:p.a.string.isRequired,handleBlur:p.a.func,setFieldValue:p.a.func.isRequired,loadOptions:p.a.func.isRequired,className:p.a.string,labelClass:p.a.string,placeholder:p.a.string,isClearable:p.a.bool,isMulti:p.a.bool,isDisabled:p.a.bool,cacheOptions:p.a.bool,defaultOptions:p.a.oneOfType([p.a.bool,p.a.array])}},YWqb:function(e,a,t){"use strict";t.d(a,"a",(function(){return j}));var r=t("q1tI"),n=t.n(r),i=t("17x9"),l=t.n(i),o=t("9Koi"),s=t("Ty5D"),c=t("nc57"),u=t("6Rhw"),d=t("x37D"),m=t("/r69"),p=t("t8fN"),b=t("zl2q"),f=t("3OM0"),g=t("jrRI"),v=t("R5y6"),y=t("LdVD"),h=t("pbA8");function O(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(t.push(l.value),!a||t.length!==a);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return t}(e,a)||function(e,a){if(!e)return;if("string"==typeof e)return E(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(e,a)}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}function j(e){var a=e.subjectId,t=e.initialFormData,i=e.submitData,l=Object(o.a)().t,E=O(Object(r.useState)(!1),2),j=E[0],q=E[1],k=Object(r.useCallback)((function(e,t){var r=e.name,n=e.message,l=e.trigger,o=e.audioMessage,s=e.removeAudioMessage,c=e.attachment,u=e.removeAttachment,d=e.departments,m=t.setSubmitting,p=t.setErrors,b=n;((n||"").match(/(http[s]?|ftp):\/\/[\w\d]{1}[^\s]*/g)||[]).forEach((function(e){b=b.replace(e,'<a href="'.concat(e,'" target="_blank">').concat(e,"</a>"))}));var f=new FormData;f.append("name",r||""),f.append("trigger",l||""),f.append("message",b||""),f.append("quick_reply_subject_id",a),f.append("removeAttachment",u),f.append("removeAudioMessage",s),(d||[]).forEach((function(e,a){f.append("departments[".concat(a,"]"),e.value)})),!o&&c&&c instanceof File&&f.append("attachment",c),o&&!c&&f.append("audioMessage",o),i(f,{setSubmitting:m,setErrors:p,setRedirect:q})}),[i,q,a]);return j?n.a.createElement(s.a,{to:"/quick-reply-subjects/".concat(a,"/replies/1")}):n.a.createElement(c.a,{initialValues:t,handleSubmit:k,renderForm:function(e){var a=e.handleChange,t=e.setFieldValue,r=e.handleBlur,i=e.values,o=e.errors,s=e.isSubmitting,c=i.audioMessage;return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{className:"limiter",id:"name",name:"name",label:l("quick-replies.quick-replies.edit-page.name-label"),placeholder:l("quick-replies.quick-replies.edit-page.name-placeholder"),onChange:a,onBlur:r,value:i.name,errors:o}),n.a.createElement(h.a,{className:"limiter",name:"message",label:l("quick-replies.quick-replies.edit-page.message-label"),placeholder:l("quick-replies.quick-replies.edit-page.message-placeholder"),setFieldValue:t,value:i.message,errors:o}),n.a.createElement(u.a,{className:"limiter",id:"trigger",name:"trigger",label:l("quick-replies.quick-replies.edit-page.trigger-label"),placeholder:l("quick-replies.quick-replies.edit-page.trigger-placeholder"),onChange:a,onBlur:r,value:i.trigger,errors:o,disabled:s||i.attachment||i.message||i.audioMessage}),n.a.createElement(m.a,{name:"attachment",label:l("quick-replies.quick-replies.edit-page.attachment-label"),value:i.attachment,setFieldValue:t,errors:o,disabled:s||i.audioMessage,onRemove:function(){t("removeAttachment",1)}}),n.a.createElement(g.a,{className:"quick-reply-form"},n.a.createElement(f.a,null,l("quick-replies.quick-replies.edit-page.audio-message-label")),n.a.createElement(p.a,{className:"mb-3",setAudioMessage:function(e){t("audioMessage",e)},disabled:s||i.attachment}),c?n.a.createElement(b.a,{audioMessage:c.url?c.url:c,setAudioMessage:function(){t("audioMessage",null),t("removeAudioMessage",1)}}):null),n.a.createElement(v.a,{className:"limiter",name:"departments",label:l("quick-replies.quick-replies.edit-page.departments-label"),value:i.departments,setFieldValue:t,errors:o,loadOptions:y.a,isMulti:!0,isClearable:!0}),n.a.createElement(d.a,{className:"pt-2 px-4 mt-3 mb-5",disabled:s},l("common.saveBtnText")))}})}j.propTypes={subjectId:l.a.number.isRequired,initialFormData:l.a.object.isRequired,submitData:l.a.func.isRequired}},dbgk:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var r=t("q1tI"),n=t.n(r),i=t("17x9"),l=t.n(i);function o(e){var a=e.children;return n.a.createElement("h1",{className:"title-main mb-3"},a)}o.propTypes={children:l.a.any.isRequired}},ds8m:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var r=t("q1tI"),n=t.n(r),i=t("MwQV"),l=t("Ty5D"),o=t("TtP3"),s=t("dbgk"),c=t("9Koi"),u=t("YWqb");function d(){var e=Object(c.a)().t,a=Object(l.j)().subjectId,t=Object(r.useCallback)((function(e,a){var t=a.setSubmitting,r=a.setErrors,n=a.setRedirect;t(!1),i.a.call("post","/methods/quick-replies",{},e).data((function(){n(!0)})).validation((function(e,a){r(a)})).finally((function(){t(!1)}))}),[]);return n.a.createElement(o.a,null,n.a.createElement(s.a,null,e("quick-replies.quick-replies.create-page.title")),n.a.createElement(u.a,{initialFormData:{name:"",message:"",trigger:"",attachment:null,removeAttachment:0,audioMessage:null,removeAudioMessage:0,departments:[]},submitData:t,subjectId:+a}))}},pbA8:function(e,a,t){"use strict";var r=t("q1tI"),n=t.n(r),i=t("17x9"),l=t.n(i),o=t("sPdi"),s=t("jrRI"),c=t("3OM0"),u=t("TSYQ"),d=t.n(u),m=t("AEIT"),p=t("+z1p");function b(){return(b=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function f(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function g(e){var a,t=e.value,r=e.label,i=e.errors,l=e.name,u=e.className,g=e.setFieldValue,v=f(e,["value","label","errors","name","className","setFieldValue"]);return n.a.createElement(s.a,{className:d()(u)},r?n.a.createElement(c.a,null,"function"==typeof r?r():r):null,n.a.createElement(m.CKEditor,b({editor:p.ClassicEditor,data:t,onChange:function(e,a){g(l,a.getData())},config:{toolbar:["bold","italic","underline","link","bulletedList","numberedList","undo","redo"]}},v)),i&&(null===(a=i[l])||void 0===a?void 0:a.length)?n.a.createElement(o.a,{errors:i[l]}):null)}g.propTypes={value:l.a.string,errors:l.a.object,label:l.a.any,name:l.a.string.isRequired,className:l.a.string,setFieldValue:l.a.func.isRequired},a.a=g},t8fN:function(e,a,t){"use strict";t.d(a,"a",(function(){return f}));var r=t("q1tI"),n=t.n(r),i=t("17x9"),l=t.n(i),o=t("R6dn"),s=t.n(o);function c(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(t.push(l.value),!a||t.length!==a);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return t}(e,a)||function(e,a){if(!e)return;if("string"==typeof e)return u(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,a)}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}var d={audio:!0,video:!1};var m=t("TSYQ"),p=t.n(m),b=t("ma3e");function f(e){var a=e.setAudioMessage,t=e.disabled,i=e.className,l=function(e){var a=c(Object(r.useState)(!1),2),t=a[0],n=a[1],i=c(Object(r.useState)(null),2),l=i[0],o=i[1],u=c(Object(r.useState)(!1),2),m=u[0],p=u[1],b=c(Object(r.useState)(!1),2),f=b[0],g=b[1],v=Object(r.useCallback)((function(){navigator.getUserMedia(d,(function(a){n(a);var t=new s.a(a);t.mimeType="audio/wav",o(t),t.ondataavailable=function(a){e(a)},t.start(36e5),p(!0),g(!1)}),(function(e){console.error(e),alert("You have to grant privileges to access your microphone to send audio messages.")}))}),[e]),y=Object(r.useCallback)((function(){f?l.resume():l.pause(),g(!f)}),[f,l]),h=Object(r.useCallback)((function(){l.resume(),l.stop(),p(!1),g(!1),o(null),t.getAudioTracks().forEach((function(e){e.stop()})),n(null)}),[l,t]);return{active:!0,isRecording:m,isPaused:f,togglePause:y,startRecording:v,stopRecording:h}}(a),o=l.isRecording,u=l.isPaused,m=l.startRecording,f=l.stopRecording,g=l.togglePause,v=null;return t||(v=o?f:m),n.a.createElement("div",{className:p()("d-flex",{"is-recording":o,"is-paused":u},i)},n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:v,disabled:t},o?n.a.createElement(b.pb,{className:"icon-size-20 recording-stop-icon mr-1"}):n.a.createElement(b.O,{className:"icon-size-20 color-gray mr-1"})),o?n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:t?null:g,disabled:t},u?n.a.createElement(b.V,{className:"icon-size-20 recording-play-icon color-gray mr-1"}):n.a.createElement(b.S,{className:"icon-size-20 recording-pause-icon color-gray mr-1"})):null)}f.propTypes={setAudioMessage:l.a.func.isRequired,disabled:l.a.bool,className:l.a.string}},zl2q:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var r=t("q1tI"),n=t.n(r),i=t("17x9"),l=t.n(i),o=t("ma3e");function s(e){var a=e.audioMessage,t=e.setAudioMessage;return n.a.createElement("div",{className:"d-flex my-1"},n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:function(){t(null)}},n.a.createElement(o.fb,{className:"icon-size-20 color-gray mr-1"})),n.a.createElement("div",{style:{maxWidth:"400px"}},n.a.createElement("audio",{src:"string"==typeof a?a:URL.createObjectURL(a),controls:!0})))}s.propTypes={audioMessage:l.a.oneOfType([l.a.object,l.a.string]),setAudioMessage:l.a.func.isRequired}}}]);