(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"1QrW":function(e,a,t){"use strict";var n=t("q1tI"),r=t.n(n),l=t("17x9"),i=t.n(l),o=t("sPdi"),c=t("jrRI"),s=t("3OM0"),u=t("L3zb"),m=t("TSYQ"),d=t.n(m);function b(){return(b=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function f(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function p(e){var a,t,n=e.id,l=e.label,i=e.errors,m=e.name,p=e.onChange,v=e.className,g=e.phone,h=void 0!==g&&g,O=f(e,["id","label","errors","name","onChange","className","phone"]);return r.a.createElement(c.a,{className:d()(v)},r.a.createElement(s.a,{htmlFor:n},l),r.a.createElement(u.a,b({id:n,name:m,type:"text",onChange:function(e){h&&e.target.value&&"+"!==e.target.value[0]&&(e.target.value="+"+e.target.value);var a=e.target.value;(h?/^\+[0-9]*$/:/^[0-9]*$/).test(a)&&p(e)}},O,{invalid:!!(null===(a=i[m])||void 0===a?void 0:a.length)})),(null===(t=i[m])||void 0===t?void 0:t.length)?r.a.createElement(o.a,{errors:i[m]}):null)}p.propTypes={onChange:i.a.func.isRequired,errors:i.a.object.isRequired,id:i.a.oneOfType([i.a.string,i.a.number]),label:i.a.any.isRequired,name:i.a.string.isRequired,className:i.a.string,phone:i.a.bool},a.a=r.a.memo(p)},"3zHg":function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t("MwQV");function r(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(a){return new Promise((function(t){var r=e.findIndex((function(e){return e.value===a}));-1!==r?t(e[r]):n.a.call("get","/methods/departments/".concat(a)).data((function(e){t({label:e.name,value:e.id})}))}))}}()(e)}},"6jMY":function(e,a,t){"use strict";t.d(a,"b",(function(){return r}));var n=t("MwQV");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(a){return new Promise((function(t){var r={q:a};if(e&&Array.isArray(e)&&e.length)for(var l in e)r["type[".concat(l,"]")]=e[l];else e&&(r.type=e);n.a.call("get","/methods/integrations/search",r).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id,integration:e}})))}))}))}}var l=r();a.a=l},"6ukn":function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t("MwQV");function r(e){return new Promise((function(a){n.a.call("get","/methods/tags/search-company-tags",{q:e}).data((function(e){a(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},R5y6:function(e,a,t){"use strict";t.d(a,"a",(function(){return O}));var n=t("q1tI"),r=t.n(n),l=t("QDav"),i=t("xilt"),o=t("jrRI"),c=t("3OM0"),s=t("TSYQ"),u=t.n(s),m=t("sPdi"),d=t("17x9"),b=t.n(d),f=t("9Koi");function p(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?p(Object(t),!0).forEach((function(a){g(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function g(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var h={control:function(e){return v(v({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})},menu:function(e){return v(v({},e),{},{zIndex:10})}};function O(e){var a,t,n=e.id,s=e.label,d=e.errors,b=e.loadOptions,p=e.name,v=e.setFieldValue,g=e.handleBlur,O=e.value,y=e.className,j=e.labelClass,w=e.placeholder,E=e.isClearable,C=e.cacheOptions,R=e.isMulti,x=e.isDisabled,N=e.defaultOptions,P=Object(f.a)().t,V=E?i.a:l.a;return r.a.createElement(o.a,{className:u()(y)},r.a.createElement(c.a,{className:u()(j),htmlFor:n},s),r.a.createElement(V,{cacheOptions:C,defaultOptions:N,loadOptions:b,onChange:function(e){v(p,e)},value:O,isClearable:E,className:u()({"is-invalid":!!(null===(a=d[p])||void 0===a?void 0:a.length)}),placeholder:w||P("common.default-select-placeholder"),styles:h,isMulti:R,isDisabled:x,onBlur:g}),(null===(t=d[p])||void 0===t?void 0:t.length)?r.a.createElement(m.a,{errors:d[p]}):null)}O.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},O.propTypes={errors:b.a.object.isRequired,id:b.a.oneOfType([b.a.string,b.a.number]),value:b.a.oneOfType([b.a.shape({label:b.a.string,value:b.a.oneOfType([b.a.string,b.a.number])}),b.a.array]),label:b.a.any.isRequired,name:b.a.string.isRequired,handleBlur:b.a.func,setFieldValue:b.a.func.isRequired,loadOptions:b.a.func.isRequired,className:b.a.string,labelClass:b.a.string,placeholder:b.a.string,isClearable:b.a.bool,isMulti:b.a.bool,isDisabled:b.a.bool,cacheOptions:b.a.bool,defaultOptions:b.a.oneOfType([b.a.bool,b.a.array])}},VhWs:function(e,a,t){"use strict";t.r(a);var n=t("q1tI"),r=t.n(n),l=t("9Koi"),i=t("dbgk"),o=t("TtP3"),c=t("MwQV"),s=t("Mpt7"),u=t("nc57"),m=t("17x9"),d=t.n(m),b=t("sOKU"),f=t("x37D"),p=t("1QrW"),v=t("6Rhw"),g=t("ma3e");function h(e){var a=e.item,t=e.onItemChange,n=e.onRemove,i=e.errors,o=e.index,c=Object(l.a)().t;return r.a.createElement("div",{className:"d-flex flex-sm-nowrap flex-wrap align-items-end"},r.a.createElement(v.a,{className:"mr-sm-3 mr-2",id:"variables.".concat(o,".name"),name:"variables.".concat(o,".name"),label:c("clients.create-page.variable-name-label"),placeholder:c("clients.create-page.variable-name-placeholder"),value:a.get("name"),onChange:function(e){t(a.set("name",e.target.value))},errors:i}),r.a.createElement(v.a,{className:"mr-sm-3 mr-2",id:"variables.".concat(o,".value"),name:"variables.".concat(o,".value"),label:c("clients.create-page.variable-value-label"),placeholder:c("clients.create-page.variable-value-placeholder"),value:a.get("value"),onChange:function(e){t(a.set("value",e.target.value))},errors:i}),r.a.createElement("button",{className:"btn btn-link no-shadow p-sm-2 py-2 px-1 mb-3",type:"button",onClick:n},r.a.createElement(g.xb,{className:"color-gray icon-size-20"})))}h.propTypes={item:d.a.shape({name:d.a.string,value:d.a.string,get:d.a.func.isRequired,set:d.a.func.isRequired}),onItemChange:d.a.func.isRequired,onRemove:d.a.func.isRequired,errors:d.a.object,index:d.a.number};var O=h,y=t("Buep"),j=t("nh1N"),w=t("6jMY"),E=t("XRgj"),C=t("R5y6"),R=t("6ukn"),x=t("rhny"),N=t("ok1R"),P=t("LdVD"),V=t("3zHg"),q=Object(w.b)([E.c,E.d]);function S(e){var a=e.setFieldValue,t=e.handleClickAddVariable,n=e.handleVariableChange,i=e.handleClickRemoveVariable,o=e.handleChange,c=e.handleBlur,s=e.values,u=e.errors,m=e.isSubmitting,d=Object(l.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,null,r.a.createElement(x.a,{sm:6},r.a.createElement(y.a,{className:"limiter",label:d("clients.create-page.integration-label"),name:"integration_id",value:s.integration_id,setFieldValue:a,loadOptions:q,loadValue:j.a,errors:u,isClearable:!0})),r.a.createElement(x.a,{sm:6},r.a.createElement(C.a,{className:"limiter",name:"tags",label:d("clients.import-csv.tags-label"),value:s.tags,setFieldValue:a,errors:u,loadOptions:R.a,isMulti:!0,isClearable:!0})),r.a.createElement(x.a,{sm:6},r.a.createElement(y.a,{className:"limiter",label:d("clients.create-page.department-label"),placeholder:d("departments.lobby-department"),name:"department_id",value:s.department_id,setFieldValue:a,loadOptions:P.a,loadValue:V.a,errors:u,isClearable:!0}))),r.a.createElement("div",{className:"limiter"},s.integration_id?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{phone:!0,id:"phone_number",name:"phone_number",label:d("clients.create-page.phone-number-label"),placeholder:d("clients.create-page.phone-number-placeholder"),value:s.phone_number,onChange:o,onBlur:c,errors:u}),r.a.createElement("div",null,s.variables.map((function(e,a){return r.a.createElement(O,{key:a,index:a,item:e,onItemChange:function(e){n(a,e)},onRemove:function(){return i(a)},errors:u})}))),r.a.createElement("div",null,r.a.createElement(b.a,{className:"mb-3",type:"button",onClick:t},d("clients.create-page.add-variable-btn")))):null,r.a.createElement(f.a,{className:"pt-2 px-4 mt-3 mb-sm-4 mb-5 mr-2",disabled:m||!s.integration_id},d("common.saveBtnText")),r.a.createElement(f.a,{color:"success",className:"pt-2 px-4 mt-3 mb-sm-4 mb-5",disabled:m||!s.integration_id,onClick:function(){return a("createNew",!0)}},d("common.createAndNew"))))}S.propTypes={setFieldValue:d.a.func.isRequired,handleClickAddVariable:d.a.func.isRequired,handleVariableChange:d.a.func.isRequired,handleClickRemoveVariable:d.a.func.isRequired,handleChange:d.a.func.isRequired,handleBlur:d.a.func.isRequired,values:d.a.object.isRequired,errors:d.a.object.isRequired,isSubmitting:d.a.bool};var k=S,F=t("n7jJ"),_=t("Ty5D"),D=t("BLzl"),I=t("/kxI"),T=t("FBLP");function M(){return(M=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function A(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function B(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Q(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function z(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(t.push(i.value),!a||t.length!==a);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}(e,a)||function(e,a){if(!e)return;if("string"==typeof e)return Y(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y(e,a)}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}a.default=function(){var e=Object(l.a)().t,a=z(Object(n.useState)(null),2),t=a[0],m=a[1],d=z(Object(n.useState)(!1),2),b=d[0],f=d[1],p=z(Object(n.useState)(!1),2),v=p[0],g=p[1],h=function(e,a,t){var n=t.setSubmitting,r=t.setFieldValue,l=t.setErrors;return c.a.call("post","/methods/clients",{},e).data((function(){f(a?2:1),n(!1),r("createNew",!1),r("variables",Object(s.a)()),r("phone_number",""),r("department_id",null)})).validation((function(e,a){l(a),n(!1)})).catch((function(){n(!1)}))};return v?r.a.createElement(_.a,{to:"/clients/1"}):r.a.createElement(o.a,null,r.a.createElement(i.a,null,e("clients.create-page.title")),r.a.createElement(D.a,{className:"clients-create mb-4 shadow"},r.a.createElement(I.a,{className:"rounded px-4"},r.a.createElement(u.a,{initialValues:{createNew:!1,integration_id:null,phone_number:"",tags:[],variables:Object(s.a)([]),department_id:null},handleSubmit:function(e,a){var t=a.setSubmitting,n=a.setErrors,r=a.setFieldValue,l=function(e){return{integration_id:e.integration_id,phone_number:e.phone_number,variables:e.variables.toJS(),tags:e.tags.map((function(e){var a=e.label;return{id:e.value,name:a}})),department_id:e.department_id}}(e);m(null),c.a.call("post","/methods/clients/check-exists",{},l).data((function(a){a.exists?m({formattedData:l,createNew:e.createNew,actions:{setSubmitting:t,setErrors:n,setFieldValue:r}}):h(l,e.createNew,{setSubmitting:t,setErrors:n,setFieldValue:r})})).validation((function(e,a){n(a),t(!1)})).catch((function(){t(!1)}))},renderForm:function(e){var a=e.values,t=e.setFieldValue,n=e.errors,l=e.setErrors,i=Q(e,["values","setFieldValue","errors","setErrors"]);return r.a.createElement(k,M({},i,{values:a,setErrors:l,errors:n,setFieldValue:t,handleClickAddVariable:function(){t("variables",a.variables.push(Object(s.b)({name:"",value:""})))},handleVariableChange:function(e,n){t("variables",a.variables.set(e,n))},handleClickRemoveVariable:function(e){var r=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?A(Object(t),!0).forEach((function(a){B(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},n);r.variables&&delete r.variables,l(r),t("variables",a.variables.delete(e))}}))}}))),r.a.createElement(F.a,{show:!!b,text:e("clients.create-page.client-created-message"),onConfirm:function(){f(!1),1===b&&g(!0)}}),t?r.a.createElement(T.a,{show:!0,onCancel:function(){t.actions.setSubmitting(!1),m(null)},onConfirm:function(){if(t){var e=t.formattedData,a=t.createNew,n=t.actions;m(null),h(e,a,n)}},text:e("clients.create-page.client-exists-message")}):null)}},dbgk:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t("q1tI"),r=t.n(n),l=t("17x9"),i=t.n(l);function o(e){var a=e.children;return r.a.createElement("h1",{className:"title-main mb-3"},a)}o.propTypes={children:i.a.any.isRequired}},nh1N:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t("MwQV");function r(e){return new Promise((function(a){n.a.call("get","/methods/integrations/".concat(e)).data((function(e){a({label:e.name,value:e.id,service:e.service})}))}))}},xilt:function(e,a,t){"use strict";t("q1tI"),t("qKvR"),t("i8i4"),t("17x9");var n=t("njTy"),r=(t("iYmT"),t("FUBA"),t("1m/E")),l=t("QDav"),i=t("vwsU"),o=Object(i.b)(n.a),c=Object(r.a)(o),s=Object(l.b)(c);a.a=s}}]);