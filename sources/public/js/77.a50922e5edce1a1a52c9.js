(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{"0hTx":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n=a("q1tI"),r=a.n(n),l=a("TtP3"),i=a("9Koi"),u=a("Ty5D"),o=a("MwQV"),s=a("NhCm"),c=a("bTjV"),m=a("zwA0"),f=a("9Qbp");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function v(){var e=d(Object(n.useState)(null),2),t=e[0],a=e[1],b=d(Object(n.useState)(!0),2),v=b[0],p=b[1],h=Object(u.j)(),g=h.id,y=h.companyId,j=Object(i.a)().t;Object(n.useEffect)((function(){o.a.call("get","/methods/user-roles/".concat(g)).data((function(e){a(f.a.instantiate(e))})).finally((function(){p(!1)}))}),[g]);var E,S=Object(u.h)(),C=Object(n.useCallback)((function(e,t){var a=t.setSubmitting,n=t.setErrors;o.a.call("patch","/methods/user-roles/".concat(g),{},{company_id:y,name:e.name,abilities:e.abilities}).then((function(){S.goBack()})).validation((function(e,t){n(t)})),a(!1)}),[g,S,y]);return E=!t&&v?r.a.createElement(c.a,null):t||v?r.a.createElement(s.a,{handleSubmit:C,defaultData:{name:t.name,abilities:t.abilities}}):r.a.createElement(m.a,null),r.a.createElement(l.a,{title:j("user-roles.edit-page.title")},E)}},NhCm:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a("q1tI"),r=a.n(n),l=a("17x9"),i=a.n(l),u=a("9Koi"),o=a("nc57"),s=a("6Rhw"),c=a("x37D"),m=a("vtrE"),f=a("MwQV");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function v(e){var t=e.defaultData,a=e.handleSubmit,l=Object(u.a)().t,i=d(Object(n.useState)(),2),b=i[0],v=i[1];return Object(n.useEffect)((function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(a){f.a.call("get","/methods/user-roles/abilities",{}).data((function(n){var r=n.map((function(t){return{label:e("user.abilities.".concat(t)),value:t}}));a(t.concat(r))}))}))})(l).then(v)}),[l]),b?r.a.createElement(o.a,{className:"limiter",initialValues:t,handleSubmit:a,renderForm:function(e){var t=e.handleChange,a=e.handleBlur,n=e.values,i=e.errors,u=e.setFieldValue,o=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{id:"name",name:"name",label:l("user.roles.name-label"),placeholder:l("user.roles.name-placeholder"),onChange:t,onBlur:a,value:n.name,errors:i}),r.a.createElement(m.a,{labelListClass:"align-items-center",label:l("siteConfig.language.available-languages-label"),name:"abilities",value:n.abilities,setFieldValue:function(e,t){(t.includes("manageCampaign")||t.includes("manageInstantMessage"))&&(t.includes("manageClient")||(n.abilities.includes("manageClient")?t=t.filter((function(e){return!["manageCampaign","manageInstantMessage"].includes(e)})):t.push("manageClient"))),u(e,t)},options:b,errors:i}),r.a.createElement(c.a,{className:"pt-2 px-4 mt-3 mb-5",disabled:o},l("common.saveBtnText")))}}):null}v.propTypes={defaultData:i.a.object.isRequired,handleSubmit:i.a.func.isRequired}},vtrE:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("q1tI"),r=a.n(n),l=a("17x9"),i=a.n(l),u=a("sPdi"),o=a("jrRI"),s=a("3OM0"),c=a("BAJy"),m=a("TSYQ"),f=a.n(m);function d(e){var t,a,n=e.label,l=e.errors,i=e.name,m=e.setFieldValue,d=e.value,b=e.options,v=e.labelListClass,p=e.labelClass,h=e.formGroupClass;return r.a.createElement(o.a,{className:f()(h)},r.a.createElement(s.a,{className:f()("d-flex checkbox-label",p)},n),r.a.createElement("div",{className:f()({"is-invalid":!!(null===(t=l[i])||void 0===t?void 0:t.length)})},b.map((function(e){var t,a=d.includes(e.value);return r.a.createElement(s.a,{key:e.value,htmlFor:e.value,className:f()("d-flex",v)},r.a.createElement(c.a,{id:e.value,name:"".concat(i,"[").concat(e.value,"]"),type:"checkbox",checked:a,onChange:function(){if(a)m(i,d.filter((function(t){return t!==e.value})));else{var t=d.slice();t.push(e.value),m(i,t)}},invalid:!!(null===(t=l[i])||void 0===t?void 0:t.length)}),r.a.createElement("span",null,e.label))}))),(null===(a=l[i])||void 0===a?void 0:a.length)?r.a.createElement(u.a,{errors:l[i]}):null)}d.propTypes={options:i.a.array.isRequired,errors:i.a.object.isRequired,id:i.a.oneOfType([i.a.string,i.a.number]),label:i.a.any,name:i.a.string.isRequired,setFieldValue:i.a.func.isRequired,value:i.a.array.isRequired,formGroupClass:i.a.string,labelClass:i.a.string,labelListClass:i.a.string}},zwA0:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("q1tI"),r=a.n(n),l=a("9Koi");function i(){var e=Object(l.a)().t;return r.a.createElement("div",null,e("common.site-error-message"))}}}]);