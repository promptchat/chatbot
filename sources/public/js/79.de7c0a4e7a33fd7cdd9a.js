(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{xpTt:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("dbgk"),c=function(e){return window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes")},l=n("MwQV"),i=n("9Koi"),u=n("19iC"),s=n("jQco"),m=n("Yfk4"),g=n("2pJb"),d=n("ma3e"),b=n("4vsJ"),f=n("1Y33"),p=n("ridt"),y=n("Uf9I"),v=n("QPV6"),E=n("OKOT"),h=n("Jxq0"),O=n("eOHm"),j=n("17x9"),A=n.n(j),w=n("nM+x"),k=n("c8c+"),P=n("Qu/B"),N=n("EW+5"),S=Object(N.a)(w.a),C=S.loading,T=S.itemsListLoaded,q=S.error,x=n("jeY2"),_=n("sOKU"),z=n("kvuc");function F(e){var t=e.onClick,n=e.disabled,a=Object(i.a)().t;return r.a.createElement("button",{className:"btn btn-link no-shadow d-flex p-3 text-left w-100 action-dropdown-item text-dec-none",type:"button",disabled:n,onClick:t},r.a.createElement(d.mb,{className:"fa fa-refresh icon-size-15 mr-2"}),r.a.createElement("span",{className:"text-main"},a("googleAccounts.reauthorize-key")))}function I(e){var t=e.onClick,n=e.disabled;return r.a.createElement(z.a,{tag:F,onClick:t,disabled:n})}F.propTypes={onClick:A.a.func.isRequired,disabled:A.a.bool},I.propTypes={onClick:A.a.func.isRequired,disabled:A.a.bool};var R=r.a.memo(I),D=n("TSYQ"),J=n.n(D);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var M=function(e){return function(){return new Promise((function(t){t([{label:e("googleAccounts.types.1"),value:1}])}))}},U=function(e){return function(){return new Promise((function(t){t([{label:e("googleAccounts.active.0"),value:0},{label:e("googleAccounts.active.1"),value:1}])}))}};function V(e){var t=e.filters,n=e.sort,j=e.data,A=e.currentPage,w=e.lastPage,k=e.changeFilters,P=e.changeSort,N=e.changePage,S=Object(i.a)().t,C=Object(u.a)(),T=function(e){var t=B(Object(a.useState)(null),2),n=t[0],r=t[1],o=Object(a.useCallback)((function(t){if(t.source.close(),"token"===t.data.type){var a=L(L({},t.data.token),{},{type:1,tokenId:n||null});l.a.call("post","/methods/google-services/company-google-accounts",{},a).data((function(){r(null),e()}))}}),[n,r,e]);return Object(a.useEffect)((function(){return window.addEventListener("message",o,!1),function(){return window.removeEventListener("message",o)}}),[o,n]),{isTokenBtnDisabled:null!==n,handleAddToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n&&(null!==e&&r(e),fetch("/methods/google-services/auth/get-link").then((function(e){return e.json().then((function(e){var t=c(e.link),n=setInterval((function(){t&&t.closed&&(setTimeout((function(){r(null),t=null}),100),clearInterval(n))}),500)}))})))}}}(Object(a.useCallback)((function(){N(A)}),[A,N])),q=T.isTokenBtnDisabled,x=T.handleAddToken;return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,null,S("googleAccounts.title")),r.a.createElement("div",{className:"text-right mb-4"},r.a.createElement(_.a,{type:"button",disabled:q,color:"primary",onClick:function(){return x(0)}},S("googleAccounts.create-btn-text"))),r.a.createElement(s.d,{filters:t,changeFilters:k}),r.a.createElement(m.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(g.a,{title:S("googleAccounts.id-column"),active:Object(b.b)(n,"id")||Object(f.b)(t,"id")},r.a.createElement(b.a,{sort:n,name:"id",displayName:S("googleAccounts.id-column"),changeSort:P,order:1}),r.a.createElement(y.a,{displayName:S("googleAccounts.id-column"),filters:t,changeFilters:k,column:"id"}))),r.a.createElement("th",null,r.a.createElement(g.a,{icon:r.a.createElement(d.pb,{className:"icon-size-16 color-blue mr-1 table-button-icon"}),title:S("googleAccounts.email-column"),active:Object(b.b)(n,"googleAccounts.email")||Object(f.b)(t,"email")},r.a.createElement(b.a,{sort:n,name:"email",displayName:S("googleAccounts.email-column"),changeSort:P,order:1}),r.a.createElement(y.a,{displayName:S("googleAccounts.email-column"),filters:t,changeFilters:k,column:"email"}))),r.a.createElement("th",null,r.a.createElement(g.a,{icon:r.a.createElement(d.Z,{className:"icon-size-16 color-blue mr-1 table-button-icon"}),title:S("googleAccounts.type-column"),active:Object(b.b)(n,"type")||Object(f.b)(t,"type")},r.a.createElement(b.a,{sort:n,name:"type",displayName:S("googleAccounts.type-column"),changeSort:P,order:2}),r.a.createElement(p.a,{displayName:S("googleAccounts.type-column"),filters:t,changeFilters:k,column:"type",loadOptions:M(S)}))),r.a.createElement("th",null,r.a.createElement(g.a,{icon:r.a.createElement(d.qb,{className:"icon-size-16 color-blue mr-1 table-button-icon"}),title:S("googleAccounts.is-active-column"),active:Object(b.b)(n,"is_active")||Object(f.b)(t,"is_active")},r.a.createElement(b.a,{sort:n,name:"is_active",displayName:S("googleAccounts.is-active-column"),changeSort:P,order:2}),r.a.createElement(p.a,{displayName:S("googleAccounts.is-active-column"),filters:t,changeFilters:k,column:"is_active",loadOptions:U(S)}))),r.a.createElement("th",null,r.a.createElement(g.a,{icon:r.a.createElement(d.i,{className:"icon-size-16 color-blue mr-1 table-button-icon"}),title:S("googleAccounts.created-at-column"),active:Object(b.b)(n,"created_at")||Object(f.b)(t,"created_at")},r.a.createElement(b.a,{sort:n,name:"created_at",displayName:S("googleAccounts.created-at-column"),changeSort:P,order:2}))),r.a.createElement("th",null,"Â "))),r.a.createElement("tbody",null,j.length?j.map((function(e){return r.a.createElement("tr",{key:e.id,id:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.email),r.a.createElement("td",null,S("googleAccounts.types.".concat(e.type))),r.a.createElement("td",{className:J()({"color-red":!e.is_active})},S("googleAccounts.active.".concat(e.is_active))),r.a.createElement("td",null,C(e.created_at)),r.a.createElement(v.a,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{url:"/methods/google-services/company-google-accounts/".concat(e.id),setConfirm:t,onSuccess:function(){return N(A)}}),e.is_active?null:r.a.createElement(R,{disabled:q,onClick:function(){return x(e.id)}}))})))})):r.a.createElement(h.a,{colspan:8}))),r.a.createElement(O.a,{currentPage:A,lastPage:w,loadPage:N,route:"/google-accounts"}))}V.propTypes={changeFilters:A.a.func.isRequired,changeSort:A.a.func.isRequired,changePage:A.a.func.isRequired,data:A.a.array.isRequired,currentPage:A.a.number,lastPage:A.a.number,filters:A.a.object.isRequired,sort:A.a.object.isRequired};t.default=Object(x.a)(V,(function(e){var t,n=e.googleAccounts;return{loading:n.get("loading"),data:null===(t=n.get("data"))||void 0===t?void 0:t.toArray(),errors:n.get("errors"),currentPage:n.get("currentPage"),lastPage:n.get("lastPage"),filters:n.get("filters"),sort:n.get("sort"),total:n.get("total")}}),(function(e){return{loadPage:function(t,n,a,r){return e(function(e,t,n){return function(a){var r={page:e};t.size&&(r.filter=Object(k.a)(t)),n.size&&(r.order=Object(P.a)(n)),a(C()),l.a.call("get","/methods/google-services/company-google-accounts",r,{}).then((function(e){a(T({filters:t,sort:n,response:e}))})).catch((function(e){return a(q(e))}))}}(t,n,a))}}}))}}]);