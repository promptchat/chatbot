(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{"/r69":function(e,t,a){"use strict";var r=a("q1tI"),n=a.n(r),i=a("17x9"),o=a.n(i),l=a("sPdi"),s=a("jrRI"),c=a("3OM0"),u=a("TSYQ"),d=a.n(u),m=a("ma3e"),p=a("yzbm"),f=a("9Koi");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function g(e){var t,a,r=e.id,i=e.label,o=e.errors,u=e.name,g=e.className,v=e.value,y=e.setFieldValue,h=e.onRemove,O=e.disabled,j=e.types,E=void 0===j?[]:j,q=d()({"is-invalid":Boolean(o&&(null===(t=o[u])||void 0===t?void 0:t.length))}),k=Object(f.a)().t;return n.a.createElement(s.a,{className:d()(g)},n.a.createElement(c.a,{htmlFor:r,className:d()(q)},"function"==typeof i?i():i),n.a.createElement(p.a,{onDrop:function(e){y(u,e[0])},disabled:O,accept:E.length?E:null},(function(e){var t=e.getRootProps,a=e.getInputProps;return n.a.createElement("section",{className:d()("dropzone-class")},n.a.createElement("div",b({},t(),{className:"load-img d-flex justify-content-center flex-column align-items-center p-3"}),n.a.createElement("input",b({},a(),{multiple:!1})),n.a.createElement(m.d,{className:"icon-size-40 color-gray"}),n.a.createElement("div",{className:"load-img-tip mt-3 text-center"},k("common.drag-and-drop"))))})),v?n.a.createElement("div",{className:d()("position-relative file-preview mr-4",q)},v.name,n.a.createElement("button",{type:"button",className:"btn btn-link no-shadow position-absolute file-preview-close-btn py-0 px-1",onClick:function(){y(u,null),h&&h()}},n.a.createElement(m.vb,{className:"color-red position-relative"}))):null,o&&(null===(a=o[u])||void 0===a?void 0:a.length)?n.a.createElement(l.a,{errors:o[u]}):null)}g.propTypes={errors:o.a.object,id:o.a.oneOfType([o.a.string,o.a.number]),label:o.a.any,name:o.a.string.isRequired,className:o.a.string,value:o.a.object,setFieldValue:o.a.func.isRequired,onRemove:o.a.func,types:o.a.array,disabled:o.a.bool},t.a=n.a.memo(g)},LcGp:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var r=a("q1tI"),n=a.n(r),i=a("MwQV"),o=a("vDqi"),l=a.n(o),s=a("Ty5D"),c=a("TtP3"),u=a("dbgk"),d=a("9Koi"),m=a("h4JF"),p=a("YWqb");function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function g(){var e=Object(d.a)().t,t=Object(s.j)(),a=t.replyId,o=t.subjectId,b=f(Object(r.useState)(null),2),g=b[0],v=b[1];Object(r.useEffect)((function(){var e=l.a.CancelToken.source();return i.a.call("get","/methods/quick-replies/".concat(a),{},{},{cancelToken:e.token}).then((function(e){v(e.data)})),function(){e.cancel()}}),[a,v]);var y,h=Object(r.useCallback)((function(e,t){var r=t.setSubmitting,n=t.setErrors,o=t.setRedirect;e.append("_method","PATCH"),r(!1),i.a.call("post","/methods/quick-replies/".concat(a),{},e).data((function(){o(!0)})).validation((function(e,t){n(t)})).finally((function(){r(!1)}))}),[a]);return y=g?n.a.createElement(p.a,{initialFormData:{name:g.name,message:g.message,trigger:g.trigger,attachment:g.attachment||null,removeAttachment:0,audioMessage:g.audio_message||null,removeAudioMessage:0,departments:g.departments.map((function(e){var t=e.id;return{label:e.name,value:t}}))},submitData:h,subjectId:+o}):n.a.createElement(m.a,null),n.a.createElement(c.a,null,n.a.createElement(u.a,null,e("quick-replies.quick-replies.edit-page.title")),y)}},LdVD:function(e,t,a){"use strict";var r=a("MwQV");t.a=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return new Promise((function(a){r.a.call("get","/methods/departments/search",{q:t}).data((function(t){var r=t.map((function(e){return{label:e.name,value:e.id}}));a(e.concat(r))}))}))}}()(e)}},R5y6:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var r=a("q1tI"),n=a.n(r),i=a("QDav"),o=a("xilt"),l=a("jrRI"),s=a("3OM0"),c=a("TSYQ"),u=a.n(c),d=a("sPdi"),m=a("17x9"),p=a.n(m),f=a("9Koi");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var y={control:function(e){return g(g({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})},menu:function(e){return g(g({},e),{},{zIndex:10})}};function h(e){var t,a,r=e.id,c=e.label,m=e.errors,p=e.loadOptions,b=e.name,g=e.setFieldValue,v=e.handleBlur,h=e.value,O=e.className,j=e.labelClass,E=e.placeholder,q=e.isClearable,k=e.cacheOptions,w=e.isMulti,N=e.isDisabled,S=e.defaultOptions,A=Object(f.a)().t,M=q?o.a:i.a;return n.a.createElement(l.a,{className:u()(O)},n.a.createElement(s.a,{className:u()(j),htmlFor:r},c),n.a.createElement(M,{cacheOptions:k,defaultOptions:S,loadOptions:p,onChange:function(e){g(b,e)},value:h,isClearable:q,className:u()({"is-invalid":!!(null===(t=m[b])||void 0===t?void 0:t.length)}),placeholder:E||A("common.default-select-placeholder"),styles:y,isMulti:w,isDisabled:N,onBlur:v}),(null===(a=m[b])||void 0===a?void 0:a.length)?n.a.createElement(d.a,{errors:m[b]}):null)}h.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},h.propTypes={errors:p.a.object.isRequired,id:p.a.oneOfType([p.a.string,p.a.number]),value:p.a.oneOfType([p.a.shape({label:p.a.string,value:p.a.oneOfType([p.a.string,p.a.number])}),p.a.array]),label:p.a.any.isRequired,name:p.a.string.isRequired,handleBlur:p.a.func,setFieldValue:p.a.func.isRequired,loadOptions:p.a.func.isRequired,className:p.a.string,labelClass:p.a.string,placeholder:p.a.string,isClearable:p.a.bool,isMulti:p.a.bool,isDisabled:p.a.bool,cacheOptions:p.a.bool,defaultOptions:p.a.oneOfType([p.a.bool,p.a.array])}},YWqb:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),o=a.n(i),l=a("9Koi"),s=a("Ty5D"),c=a("nc57"),u=a("6Rhw"),d=a("x37D"),m=a("/r69"),p=a("t8fN"),f=a("zl2q"),b=a("3OM0"),g=a("jrRI"),v=a("R5y6"),y=a("LdVD");function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function j(e){var t=e.subjectId,a=e.initialFormData,i=e.submitData,o=Object(l.a)().t,O=h(Object(r.useState)(!1),2),j=O[0],E=O[1],q=Object(r.useCallback)((function(e,a){var r=e.name,n=e.message,o=e.trigger,l=e.audioMessage,s=e.removeAudioMessage,c=e.attachment,u=e.removeAttachment,d=e.departments,m=a.setSubmitting,p=a.setErrors,f=n;((n||"").match(/(http[s]?|ftp):\/\/[\w\d]{1}[^\s]*/g)||[]).forEach((function(e){f=f.replace(e,'<a href="'.concat(e,'" target="_blank">').concat(e,"</a>"))}));var b=new FormData;b.append("name",r||""),b.append("trigger",o||""),b.append("message",f||""),b.append("quick_reply_subject_id",t),b.append("removeAttachment",u),b.append("removeAudioMessage",s),(d||[]).forEach((function(e,t){b.append("departments[".concat(t,"]"),e.value)})),c&&c instanceof File&&b.append("attachment",c),l&&b.append("audioMessage",l),i(b,{setSubmitting:m,setErrors:p,setRedirect:E})}),[i,E,t]);return j?n.a.createElement(s.a,{to:"/quick-reply-subjects/".concat(t,"/replies/1")}):n.a.createElement(c.a,{initialValues:a,handleSubmit:q,renderForm:function(e){var t=e.handleChange,a=e.setFieldValue,r=e.handleBlur,i=e.values,l=e.errors,s=e.isSubmitting,c=i.audioMessage;return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{className:"limiter",id:"name",name:"name",label:o("quick-replies.quick-replies.edit-page.name-label"),placeholder:o("quick-replies.quick-replies.edit-page.name-placeholder"),onChange:t,onBlur:r,value:i.name,errors:l}),n.a.createElement(u.a,{className:"limiter",id:"message",type:"textarea",name:"message",label:o("quick-replies.quick-replies.edit-page.message-label"),placeholder:o("quick-replies.quick-replies.edit-page.message-placeholder"),onChange:t,onBlur:r,value:i.message,errors:l}),n.a.createElement(u.a,{className:"limiter",id:"trigger",name:"trigger",label:o("quick-replies.quick-replies.edit-page.trigger-label"),placeholder:o("quick-replies.quick-replies.edit-page.trigger-placeholder"),onChange:t,onBlur:r,value:i.trigger,errors:l,disabled:s||i.attachment||i.message||i.audioMessage}),n.a.createElement(m.a,{name:"attachment",label:o("quick-replies.quick-replies.edit-page.attachment-label"),value:i.attachment,setFieldValue:a,errors:l,disabled:s||i.audioMessage,onRemove:function(){a("removeAttachment",1)}}),n.a.createElement(g.a,{className:"quick-reply-form"},n.a.createElement(b.a,null,o("quick-replies.quick-replies.edit-page.audio-message-label")),n.a.createElement(p.a,{className:"mb-3",setAudioMessage:function(e){a("audioMessage",e)},disabled:s||i.attachment||i.message}),c?n.a.createElement(f.a,{audioMessage:c.url?c.url:c,setAudioMessage:function(){a("audioMessage",null),a("removeAudioMessage",1)}}):null),n.a.createElement(v.a,{className:"limiter",name:"departments",label:o("quick-replies.quick-replies.edit-page.departments-label"),value:i.departments,setFieldValue:a,errors:l,loadOptions:y.a,isMulti:!0,isClearable:!0}),n.a.createElement(d.a,{className:"pt-2 px-4 mt-3 mb-5",disabled:s},o("common.saveBtnText")))}})}j.propTypes={subjectId:o.a.number.isRequired,initialFormData:o.a.object.isRequired,submitData:o.a.func.isRequired}},dbgk:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),o=a.n(i);function l(e){var t=e.children;return n.a.createElement("h1",{className:"title-main mb-3"},t)}l.propTypes={children:o.a.any.isRequired}},t8fN:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),o=a.n(i),l=a("R6dn"),s=a.n(l);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d={audio:!0,video:!1};var m=a("TSYQ"),p=a.n(m),f=a("ma3e");function b(e){var t=e.setAudioMessage,a=e.disabled,i=e.className,o=function(e){var t=c(Object(r.useState)(!1),2),a=t[0],n=t[1],i=c(Object(r.useState)(null),2),o=i[0],l=i[1],u=c(Object(r.useState)(!1),2),m=u[0],p=u[1],f=c(Object(r.useState)(!1),2),b=f[0],g=f[1],v=Object(r.useCallback)((function(){navigator.getUserMedia(d,(function(t){n(t);var a=new s.a(t);a.mimeType="audio/wav",l(a),a.ondataavailable=function(t){e(t)},a.start(36e5),p(!0),g(!1)}),(function(e){console.error(e),alert("You have to grant privileges to access your microphone to send audio messages.")}))}),[e]),y=Object(r.useCallback)((function(){b?o.resume():o.pause(),g(!b)}),[b,o]),h=Object(r.useCallback)((function(){o.resume(),o.stop(),p(!1),g(!1),l(null),a.getAudioTracks().forEach((function(e){e.stop()})),n(null)}),[o,a]);return{active:!0,isRecording:m,isPaused:b,togglePause:y,startRecording:v,stopRecording:h}}(t),l=o.isRecording,u=o.isPaused,m=o.startRecording,b=o.stopRecording,g=o.togglePause,v=null;return a||(v=l?b:m),n.a.createElement("div",{className:p()("d-flex",{"is-recording":l,"is-paused":u},i)},n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:v,disabled:a},l?n.a.createElement(f.pb,{className:"icon-size-20 recording-stop-icon mr-1"}):n.a.createElement(f.O,{className:"icon-size-20 color-gray mr-1"})),l?n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:a?null:g,disabled:a},u?n.a.createElement(f.V,{className:"icon-size-20 recording-play-icon color-gray mr-1"}):n.a.createElement(f.S,{className:"icon-size-20 recording-pause-icon color-gray mr-1"})):null)}b.propTypes={setAudioMessage:o.a.func.isRequired,disabled:o.a.bool,className:o.a.string}},zl2q:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),o=a.n(i),l=a("ma3e");function s(e){var t=e.audioMessage,a=e.setAudioMessage;return n.a.createElement("div",{className:"d-flex my-1"},n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:function(){a(null)}},n.a.createElement(l.fb,{className:"icon-size-20 color-gray mr-1"})),n.a.createElement("div",{style:{maxWidth:"400px"}},n.a.createElement("audio",{src:"string"==typeof t?t:URL.createObjectURL(t),controls:!0})))}s.propTypes={audioMessage:o.a.oneOfType([o.a.object,o.a.string]),setAudioMessage:o.a.func.isRequired}}}]);