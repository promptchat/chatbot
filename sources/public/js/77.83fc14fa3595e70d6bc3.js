(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{YN8i:function(e,a,t){"use strict";t.d(a,"a",(function(){return E}));var n=t("q1tI"),o=t.n(n),r=t("17x9"),l=t.n(r),c=t("9Koi"),i=t("Ty5D"),u=t("nc57"),s=t("6Rhw"),g=t("x37D"),m=t("Buep"),d=t("MwQV");function f(e){return new Promise((function(a){d.a.call("get","/methods/google-services/company-google-accounts/".concat(e)).data((function(e){a({label:e.email,value:e.id})}))}))}function _(){return new Promise((function(e){d.a.call("get","/methods/google-services/search-company-google-accounts").data((function(a){e(a.map((function(e){return{label:e.email,value:e.id}})))}))}))}function b(e){return function(a){return new Promise((function(t){d.a.call("get","/methods/google-services/sheets/".concat(e,"/spreadsheets/").concat(a,"/")).data((function(e){t({label:e.title,value:e.id})}))}))}}var p=t("8WGv");function h(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,o=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return t}(e,a)||function(e,a){if(!e)return;if("string"==typeof e)return y(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,a)}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function v(e){var a,t=e.values,r=e.errors,l=e.setFieldValue,i=Object(c.a)().t,u=h(Object(n.useState)([]),2),s=u[0],g=u[1],y=t.sheet_id,v=t.company_google_account_id;return Object(n.useEffect)((function(){y&&d.a.call("get","/methods/google-services/sheets/".concat(v,"/spreadsheets/").concat(y,"/pages")).data((function(e){g(e.map((function(e){return{label:e.name,value:e.name}})))}))}),[y,v]),o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{loadValue:f,setFieldValue:function(e,a){l(e,a),l("sheet_id",null),l("page_name",null),g([])},loadOptions:_,value:t.company_google_account_id,name:"company_google_account_id",label:i("shop.catalog.create-page.google-account-id-label"),errors:r}),t.company_google_account_id?o.a.createElement(m.a,{loadValue:b(t.company_google_account_id),setFieldValue:function(e,a){l(e,a),l("page_name",null),a?(d.a.call("get","/methods/google-services/sheets/".concat(t.company_google_account_id,"/spreadsheets/").concat(a,"/pages")).data((function(e){g(e.map((function(e){return{label:e.name,value:e.name}})))})),b(t.company_google_account_id)(a).then((function(e){l("google_table_name",e.label)}))):(g([]),l("google_table_name",""))},loadOptions:(a=t.company_google_account_id,function(){return new Promise((function(e){d.a.call("get","/methods/google-services/sheets/".concat(a)).data((function(a){e(a.map((function(e){return{label:e.name,value:e.id}})))}))}))}),value:t.sheet_id,name:"sheet_id",label:i("shop.catalog.create-page.google-sheet-id-label"),errors:r}):null,t.company_google_account_id&&t.sheet_id&&s.length?o.a.createElement(p.a,{id:"page_name",key:"".concat(t.company_google_account_id,"-").concat(t.sheet_id),label:i("shop.catalog.create-page.google-sheet-page-label"),name:"page_name",value:t.page_name,setFieldValue:function(e,a){l(e,a)},options:s,errors:r}):null)}function k(e){var a=e.handleChange,t=e.handleBlur,n=e.values,r=e.errors,l=Object(c.a)().t;return o.a.createElement(s.a,{className:"limiter",id:"fb_token",name:"fb_token",label:l("shop.catalog.create-page.fb-token-label"),placeholder:l("shop.catalog.create-page.fb-token-placeholder"),onChange:a,onBlur:t,value:n.fb_token,errors:r})}function E(e){var a=e.initialFormData,t=e.submitData,r=Object(c.a)().t,l=h(Object(n.useState)(!1),2),m=l[0],d=l[1],f=Object(n.useCallback)((function(e,a){var n=a.setSubmitting,o=a.setErrors;t(e,{setSubmitting:n,setErrors:o,setRedirect:d})}),[t,d]);return m?o.a.createElement(i.a,{to:"/product-catalogs/1"}):o.a.createElement(u.a,{initialValues:a,handleSubmit:f,renderForm:function(e){var a=e.handleChange,t=e.handleBlur,n=e.values,l=e.errors,c=e.isSubmitting,i=e.setFieldValue;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{className:"limiter",id:"name",name:"name",label:r("shop.catalog.create-page.name-label"),placeholder:r("shop.catalog.create-page.name-placeholder"),onChange:a,onBlur:t,value:n.name,errors:l}),o.a.createElement(s.a,{className:"limiter",id:"facebook_catalog_id",name:"facebook_catalog_id",label:r("shop.catalog.create-page.facebook-catalog-id-label"),placeholder:r("shop.catalog.create-page.facebook-catalog-id-placeholder"),onChange:a,onBlur:t,value:n.facebook_catalog_id,errors:l}),o.a.createElement(s.a,{className:"limiter",id:"facebook_set_id",name:"facebook_set_id",label:r("shop.catalog.create-page.facebook-set-id-label"),placeholder:r("shop.catalog.create-page.facebook-set-id-placeholder"),onChange:a,onBlur:t,value:n.facebook_set_id,errors:l}),o.a.createElement(k,{handleChange:a,handleBlur:t,values:n,errors:l,isSubmitting:c,setFieldValue:i}),o.a.createElement(v,{handleChange:a,handleBlur:t,values:n,errors:l,isSubmitting:c,setFieldValue:i}),o.a.createElement(g.a,{className:"pt-2 px-4 mt-3 mb-5",disabled:c},r("common.saveBtnText")))}})}E.propTypes={initialFormData:l.a.object.isRequired,submitData:l.a.func.isRequired}},bhnu:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var n=t("q1tI"),o=t.n(n),r=t("MwQV"),l=t("vDqi"),c=t.n(l),i=t("Ty5D"),u=t("TtP3"),s=t("dbgk"),g=t("9Koi"),m=t("h4JF"),d=t("YN8i");function f(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,o=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return t}(e,a)||function(e,a){if(!e)return;if("string"==typeof e)return _(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,a)}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function b(){var e=Object(g.a)().t,a=Object(i.j)().id,t=f(Object(n.useState)(null),2),l=t[0],_=t[1];Object(n.useEffect)((function(){var e=c.a.CancelToken.source();return r.a.call("get","/methods/product-catalogs/".concat(a),{},{},{cancelToken:e.token}).then((function(e){_(e.data)})),function(){e.cancel()}}),[a,_]);var b,p=Object(n.useCallback)((function(e,t){var n=t.setSubmitting,o=t.setErrors,l=t.setRedirect,c={name:e.name,company_google_account_id:e.company_google_account_id,sheet_id:e.sheet_id,google_table_name:e.google_table_name,page_name:e.page_name,facebook_catalog_id:e.facebook_catalog_id,facebook_set_id:e.facebook_set_id,fb_token:e.fb_token};r.a.call("patch","/methods/product-catalogs/".concat(a),{},c).data((function(){l(!0)})).validation((function(e,a){o(a)})).finally((function(){n(!1)}))}),[a]);return b=l?o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{initialFormData:{name:l.name,facebook_catalog_id:l.facebook_catalog_id,facebook_set_id:l.facebook_set_id,fb_token:l.fb_token,google_table_name:l.google_table_name,company_google_account_id:l.company_google_account_id,sheet_id:l.sheet_id,page_name:l.page_name},submitData:p}),l.last_sync_error?o.a.createElement("div",{className:"mt-3"},o.a.createElement("h5",null,e("shop.catalog.edit-page.last-sync-error-title")),o.a.createElement("code",null,l.last_sync_error)):null):o.a.createElement(m.a,null),o.a.createElement(u.a,null,o.a.createElement(s.a,null,e("shop.catalog.edit-page.title")),b)}},dbgk:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var n=t("q1tI"),o=t.n(n),r=t("17x9"),l=t.n(r);function c(e){var a=e.children;return o.a.createElement("h1",{className:"title-main mb-3"},a)}c.propTypes={children:l.a.any.isRequired}}}]);