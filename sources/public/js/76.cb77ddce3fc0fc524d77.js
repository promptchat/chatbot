(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{YN8i:function(e,a,t){"use strict";t.d(a,"a",(function(){return E}));var n=t("q1tI"),o=t.n(n),l=t("17x9"),c=t.n(l),r=t("9Koi"),i=t("Ty5D"),u=t("nc57"),s=t("6Rhw"),g=t("x37D"),m=t("Buep"),d=t("MwQV");function _(e){return new Promise((function(a){d.a.call("get","/methods/google-services/company-google-accounts/".concat(e)).data((function(e){a({label:e.email,value:e.id})}))}))}function p(){return new Promise((function(e){d.a.call("get","/methods/google-services/search-company-google-accounts").data((function(a){e(a.map((function(e){return{label:e.email,value:e.id}})))}))}))}function f(e){return function(a){return new Promise((function(t){d.a.call("get","/methods/google-services/sheets/".concat(e,"/spreadsheets/").concat(a,"/")).data((function(e){t({label:e.title,value:e.id})}))}))}}var b=t("8WGv");function h(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,o=!1,l=void 0;try{for(var c,r=e[Symbol.iterator]();!(n=(c=r.next()).done)&&(t.push(c.value),!a||t.length!==a);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw l}}return t}(e,a)||function(e,a){if(!e)return;if("string"==typeof e)return v(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,a)}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function y(e){var a,t=e.values,l=e.errors,c=e.setFieldValue,i=Object(r.a)().t,u=h(Object(n.useState)([]),2),s=u[0],g=u[1],v=t.sheet_id,y=t.company_google_account_id;return Object(n.useEffect)((function(){v&&d.a.call("get","/methods/google-services/sheets/".concat(y,"/spreadsheets/").concat(v,"/pages")).data((function(e){g(e.map((function(e){return{label:e.name,value:e.name}})))}))}),[v,y]),o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{loadValue:_,setFieldValue:function(e,a){c(e,a),c("sheet_id",null),c("page_name",null),g([])},loadOptions:p,value:t.company_google_account_id,name:"company_google_account_id",label:i("shop.catalog.create-page.google-account-id-label"),errors:l}),t.company_google_account_id?o.a.createElement(m.a,{loadValue:f(t.company_google_account_id),setFieldValue:function(e,a){c(e,a),c("page_name",null),a?(d.a.call("get","/methods/google-services/sheets/".concat(t.company_google_account_id,"/spreadsheets/").concat(a,"/pages")).data((function(e){g(e.map((function(e){return{label:e.name,value:e.name}})))})),f(t.company_google_account_id)(a).then((function(e){c("google_table_name",e.label)}))):(g([]),c("google_table_name",""))},loadOptions:(a=t.company_google_account_id,function(){return new Promise((function(e){d.a.call("get","/methods/google-services/sheets/".concat(a)).data((function(a){e(a.map((function(e){return{label:e.name,value:e.id}})))}))}))}),value:t.sheet_id,name:"sheet_id",label:i("shop.catalog.create-page.google-sheet-id-label"),errors:l}):null,t.company_google_account_id&&t.sheet_id&&s.length?o.a.createElement(b.a,{id:"page_name",key:"".concat(t.company_google_account_id,"-").concat(t.sheet_id),label:i("shop.catalog.create-page.google-sheet-page-label"),name:"page_name",value:t.page_name,setFieldValue:function(e,a){c(e,a)},options:s,errors:l}):null)}function k(e){var a=e.handleChange,t=e.handleBlur,n=e.values,l=e.errors,c=Object(r.a)().t;return o.a.createElement(s.a,{className:"limiter",id:"fb_token",name:"fb_token",label:c("shop.catalog.create-page.fb-token-label"),placeholder:c("shop.catalog.create-page.fb-token-placeholder"),onChange:a,onBlur:t,value:n.fb_token,errors:l})}function E(e){var a=e.initialFormData,t=e.submitData,l=Object(r.a)().t,c=h(Object(n.useState)(!1),2),m=c[0],d=c[1],_=Object(n.useCallback)((function(e,a){var n=a.setSubmitting,o=a.setErrors;t(e,{setSubmitting:n,setErrors:o,setRedirect:d})}),[t,d]);return m?o.a.createElement(i.a,{to:"/product-catalogs/1"}):o.a.createElement(u.a,{initialValues:a,handleSubmit:_,renderForm:function(e){var a=e.handleChange,t=e.handleBlur,n=e.values,c=e.errors,r=e.isSubmitting,i=e.setFieldValue;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{className:"limiter",id:"name",name:"name",label:l("shop.catalog.create-page.name-label"),placeholder:l("shop.catalog.create-page.name-placeholder"),onChange:a,onBlur:t,value:n.name,errors:c}),o.a.createElement(s.a,{className:"limiter",id:"facebook_catalog_id",name:"facebook_catalog_id",label:l("shop.catalog.create-page.facebook-catalog-id-label"),placeholder:l("shop.catalog.create-page.facebook-catalog-id-placeholder"),onChange:a,onBlur:t,value:n.facebook_catalog_id,errors:c}),o.a.createElement(s.a,{className:"limiter",id:"facebook_set_id",name:"facebook_set_id",label:l("shop.catalog.create-page.facebook-set-id-label"),placeholder:l("shop.catalog.create-page.facebook-set-id-placeholder"),onChange:a,onBlur:t,value:n.facebook_set_id,errors:c}),o.a.createElement(k,{handleChange:a,handleBlur:t,values:n,errors:c,isSubmitting:r,setFieldValue:i}),o.a.createElement(y,{handleChange:a,handleBlur:t,values:n,errors:c,isSubmitting:r,setFieldValue:i}),o.a.createElement(g.a,{className:"pt-2 px-4 mt-3 mb-5",disabled:r},l("common.saveBtnText")))}})}E.propTypes={initialFormData:c.a.object.isRequired,submitData:c.a.func.isRequired}},dbgk:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t("q1tI"),o=t.n(n),l=t("17x9"),c=t.n(l);function r(e){var a=e.children;return o.a.createElement("h1",{className:"title-main mb-3"},a)}r.propTypes={children:c.a.any.isRequired}},fqQ3:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return s}));var n=t("q1tI"),o=t.n(n),l=t("MwQV"),c=t("TtP3"),r=t("dbgk"),i=t("9Koi"),u=t("YN8i");function s(){var e=Object(i.a)().t,a=Object(n.useCallback)((function(e,a){var t=a.setSubmitting,n=a.setErrors,o=a.setRedirect,c={name:e.name,company_google_account_id:e.company_google_account_id,sheet_id:e.sheet_id,google_table_name:e.google_table_name,page_name:e.page_name,facebook_catalog_id:e.facebook_catalog_id,facebook_set_id:e.facebook_set_id,fb_token:e.fb_token};l.a.call("post","/methods/product-catalogs",{},c).data((function(){o(!0)})).validation((function(e,a){n(a)})).finally((function(){t(!1)}))}),[]);return o.a.createElement(c.a,null,o.a.createElement(r.a,null,e("shop.catalog.create-page.title")),o.a.createElement(u.a,{initialFormData:{name:"",facebook_catalog_id:null,facebook_set_id:null,fb_token:"",google_table_name:"",company_google_account_id:null,sheet_id:null,page_name:null},submitData:a}))}}}]);