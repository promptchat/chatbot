(window.webpackJsonp=window.webpackJsonp||[]).push([[28,16],{"19iC":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return m}));var a=n("rpa7"),r=n("J3gs"),i=n("YOdH"),l=n("gmZo"),o=n("q1tI");function c(){return function(e){return!e||e.is_am_pm?"hh:mm a":"HH:mm"}(Object(a.a)())}function s(){var e=Object(i.a)(),t=c();return Object(o.useCallback)((function(n){return Object(l.a)(1e3*n).tz(e).format(t)}),[t,e])}function u(){var e=Object(r.a)();return c()+" "+e}function m(){var e=Object(i.a)(),t=u();return Object(o.useCallback)((function(n){return Object(l.a)(1e3*n).tz(e).format(t)}),[t,e])}},"1QrW":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("sPdi"),c=n("jrRI"),s=n("3OM0"),u=n("L3zb"),m=n("TSYQ"),d=n.n(m);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function b(e){var t,n,a=e.id,i=e.label,l=e.errors,m=e.name,b=e.onChange,v=e.className,h=e.phone,g=void 0!==h&&h,y=p(e,["id","label","errors","name","onChange","className","phone"]);return r.a.createElement(c.a,{className:d()(v)},r.a.createElement(s.a,{htmlFor:a},i),r.a.createElement(u.a,f({id:a,name:m,type:"text",onChange:function(e){g&&e.target.value&&"+"!==e.target.value[0]&&(e.target.value="+"+e.target.value);var t=e.target.value;(g?/^\+[0-9]*$/:/^[0-9]*$/).test(t)&&b(e)}},y,{invalid:!!(null===(t=l[m])||void 0===t?void 0:t.length)})),(null===(n=l[m])||void 0===n?void 0:n.length)?r.a.createElement(o.a,{errors:l[m]}):null)}b.propTypes={onChange:l.a.func.isRequired,errors:l.a.object.isRequired,id:l.a.oneOfType([l.a.string,l.a.number]),label:l.a.any.isRequired,name:l.a.string.isRequired,className:l.a.string,phone:l.a.bool},t.a=r.a.memo(b)},3:function(e,t){},"6jMY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n("MwQV");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return new Promise((function(n){var r={q:t};if(e&&Array.isArray(e)&&e.length)for(var i in e)r["type[".concat(i,"]")]=e[i];else e&&(r.type=e);a.a.call("get","/methods/integrations/search",r).data((function(e){n(e.map((function(e){return{label:e.name,value:e.id,integration:e}})))}))}))}}var i=r();t.a=i},"6rqU":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("sOKU");function c(e){var t=e.fields,n=e.validate,a=e.nextStep,i=e.allowedSteps,l=e.changeStep,c=e.content;if(!i.includes(a))return null;return r.a.createElement(o.a,{className:"pt-2 px-4 my-4",type:"button",color:"primary",onClick:function(){n?n(t).then((function(){return l(a)})):l(a)}},c?c():"Next")}c.propTypes={validate:l.a.func,fields:l.a.array,allowedSteps:l.a.array.isRequired,changeStep:l.a.func.isRequired,nextStep:l.a.string.isRequired,content:l.a.func}},"6ukn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/tags/search-company-tags",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},"76xo":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("q1tI");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(){var e=r(Object(a.useState)(!1),2),t=e[0],n=e[1];return[t,function(){var e,t;e=window.integrationScriptUse,(t=document.createElement("textarea")).value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),n(!0),setTimeout((function(){n(!1)}),1500)}]}},"8WGv":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("sPdi"),c=n("jrRI"),s=n("3OM0"),u=n("Cs6D"),m=n("TSYQ"),d=n.n(m),f=n("9Koi");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={control:function(e){return b(b({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function g(e){var t,n,a=e.id,i=e.label,l=e.errors,m=e.name,p=e.setFieldValue,b=e.options,v=e.value,g=e.className,y=e.placeholder,E=e.isClearable,O=e.isDisabled,j=Object(f.a)().t,w=b.findIndex((function(e){return e.value===v})),S=-1===w?null:b[w];return r.a.createElement(c.a,{className:d()(g)},r.a.createElement(s.a,{htmlFor:a},i),r.a.createElement(u.a,{id:a,name:m,isDisabled:O,onChange:function(e){return p(m,e?e.value:null)},options:b,value:S,isClearable:E,className:d()("select-field",{"is-invalid":!!(null===(t=l[m])||void 0===t?void 0:t.length)}),placeholder:y||j("common.default-select-placeholder"),styles:h}),(null===(n=l[m])||void 0===n?void 0:n.length)?r.a.createElement(o.a,{errors:l[m]}):null)}g.defaultProps={isClearable:!0},g.propTypes={errors:l.a.object.isRequired,id:l.a.oneOfType([l.a.string,l.a.number]),value:l.a.oneOfType([l.a.string,l.a.number]),label:l.a.any.isRequired,name:l.a.string.isRequired,setFieldValue:l.a.func.isRequired,options:l.a.array.isRequired,className:l.a.string,placeholder:l.a.string,isClearable:l.a.bool,isDisabled:l.a.bool},t.a=r.a.memo(g)},"A+wq":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ra}));var a,r=n("q1tI"),i=n.n(r),l=n("Ty5D"),o=n("TtP3"),c=n("17x9"),s=n.n(c),u=n("rpa7"),m=n("/MKj"),d=n("7yic"),f=n("MwQV"),p=n("jNYE"),b=n("tH7n"),v=n("YOqN"),h=n("sKTO");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(g(a={},h.a,"allClients"),g(a,h.d,"onlineClients"),g(a,h.e,"skipped"),g(a,h.b,"liveClients"),g(a,h.c,"myChats"),a),E=function(e){return{type:d.a.CLIENTS_LOADING,payload:{list:e}}},O=function(e,t){return{type:d.a.CLIENTS_LOADING_ERROR,payload:{list:e,errors:t}}},j=function(e,t,n){return function(a,r){var i,l=r().auth.getIn(["user","departments"]).map((function(e){return e.id}));t.department_id&&!l.includes(t.department_id)?(a((i=e,{type:d.a.DELETE_CLIENT,payload:{id:i}})),b.b.push(v.a.homeRoute.getLink(h.a))):r().liveChat.getIn(["clientsMap",e.toString()])||(a(C()),S(y[n],!0)(a,r)),a(_(e,t))}},w=function(e,t){return{type:d.a.CLIENTS_LOADED,payload:{list:e,data:t}}},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){n(E(e));var r=t?0:a().liveChat.getIn([e,"ids"]).size;return f.a.call("get","/methods/live-chat/clients-list",{offset:r,list:e}).data((function(t){n(w(e,t))})).catch((function(t,a){n(O(e,a))}))}},C=function(){return function(e){return f.a.call("get","/methods/live-chat/meta").data((function(t){e({type:d.a.META,payload:{data:t}})}))}},N=function(e){return function(t,n){e?n().liveChat.getIn(["clientsMap",e.toString()])?t({type:d.a.SET_ACTIVE_CLIENT,payload:e}):f.a.call("get","/methods/live-chat/get-client/".concat(e)).data((function(e){t({type:d.a.SET_LOADED_ACTIVE_CLIENT,payload:e})})):t({type:d.a.SET_ACTIVE_CLIENT,payload:e})}},_=function(e,t){return{type:d.a.UPDATE_CLIENT_DATA,payload:{clientId:e,data:t}}},k=function(e){return function(t,n){var a=n().liveChat,r=a.getIn(["oldClientMessages",0,"id"]);if(a.get("oldMessagesHasMore")){t({type:d.a.CLIENT_MESSAGES_LOADING,payload:null});var i={};return r&&(i.lastId=r),f.a.call("get","/methods/live-chat/get-messages/".concat(e),i).data((function(e){var n;t((n=e,{type:d.a.CLIENT_MESSAGES_LOADED,payload:n}))}))}}},R=n("05OR"),q=n("HlzF");function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.useState)(null),a=x(n,2),i=a[0],l=a[1];function o(){var n=new q.Howl({src:[e]});t&&n.loop();var a=n.play();l((function(){return function(){return n.stop(a)}}))}var c=function(){return setTimeout(o,1e3)};return[c,i]}var A=n("gQBd");function M(){return Object(m.e)((function(e){return e.liveChat.getIn(["clientsMap",e.liveChat.get("activeClientId")])}))}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function F(e){var t=e.setActiveClientChannel,n=e.openedChatId,a=e.children,o=e.updateClientsLastMessageDate,c=e.addClientAskingLivechat,s=e.handleVisitorGotOperator,d=e.openChatWithClient,f=e.updateClient,p=e.handleDepartmentChanged,b=e.loadClients,g=e.needPreloadClients,y=e.addNewMessage,E=e.handleConversationStopped,O=e.handleClientDidNotGetOperator,j=e.clientSessionOpened,w=e.clientSessionClosed,S=e.tab,C=Object(u.a)();Object(r.useEffect)((function(){n?g?b().then((function(){d(n)})):d(n):d(null)}),[n]),function(e){var t=Object(m.e)((function(e){return!!e.liveChat.getIn(["meta","liveClients"])})),n=P(T("/audio/bring.mp3",!0),2),a=n[0],i=n[1],l=e.user_notifications_setting.site_long_notifications&&t;Object(r.useEffect)((function(){l?a():i&&i()}),[l]),Object(r.useEffect)((function(){return function(){i&&i()}}),[i])}(C);var N=P(T("/audio/notification.mp3"),1)[0],_=M(),k=null==_?void 0:_.id.toString(),q=function(){var e=[];return C.departments.forEach((function(t){e.push(A.a.private("Department.".concat(t.id)))})),e.push(A.a.private("Company.".concat(C.company_id,".Department"))),e},x=Object(l.h)(),I=function(e){k&&+k==+e.id&&(e.assign_operator_id===C.id||e.operator_id===C.id?x.push(v.a.chatRoute.getLink(h.c,e.id)):x.push(v.a.homeRoute.getLink(S)))},D=C.id.toString();Object(r.useEffect)((function(){var e=q();return e.forEach((function(e){e.listen("VisitorAskingForLivechat",(function(e){var t=e.client;c(t),I(t)})).listen("VisitorGotLivechatOperator",(function(e){var t=e.client;s(t,D),I(t)})).listen("ClientDataChanged",(function(e){var t=e.clientId,n=e.data;console.log("ClientDataChanged",t,n),f(t,n)})).listen("ClientDepartmentChanged",(function(e){var t=e.clientId,n=e.data;p(t,n,S)})).listen("VisitorDidNotGetOperator",(function(e){var t=e.client;O(t)})).listen("ClientSessionOpened",(function(e){var t=e.client;j(t)})).listen("ClientSessionClosed",(function(e){var t=e.client,n=e.hasOtherSessions;w(t,n)}))})),function(){e.forEach((function(e){e.stopListening("VisitorAskingForLivechat").stopListening("VisitorGotLivechatOperator").stopListening("ClientDataChanged").stopListening("ClientDepartmentChanged").stopListening("StopConversationWithClient").stopListening("VisitorDidNotGetOperator").stopListening("ClientSessionOpened").stopListening("ClientSessionClosed")}))}}),[D]);var F=C.user_notifications_setting.site_long_notifications,L=C.user_notifications_setting.site_short_notifications;return Object(r.useEffect)((function(){var e=q();return e.forEach((function(e){e.listen("ClientNewMessage",(function(e){var t,n=e.message,a=e.client;n.client=a,o(n),f(a.id,{unread_messages_count:a.unread_messages_count});var r=Boolean(n.user&&(null===(t=n.user)||void 0===t?void 0:t.id.toString())!==D.toString()),i=n.type===R.f;L&&(i||r)&&N()})).listen("StopConversationWithClient",(function(e){var t=e.clientId;E(t),k&&+k==+t&&setTimeout((function(){x.push(v.a.homeRoute.getLink(S))}),0)}))})),function(){e.forEach((function(e){e.stopListening("ClientNewMessage")}))}}),[D,k,F,L]),Object(r.useEffect)((function(){if(k){var e=A.a.private("ClientInternal.".concat(k));return e.listen("ClientNewMessage",(function(e){var t=e.message,n=e.client;t.client=n,y(t)})),t(e),function(){e.stopListening("ClientNewMessage"),t(null)}}}),[k,F,L]),i.a.createElement(i.a.Fragment,null,a)}F.propTypes={tab:s.a.string,openedChatId:s.a.string,needPreloadClients:s.a.bool.isRequired,updateClientsLastMessageDate:s.a.func.isRequired,addClientAskingLivechat:s.a.func.isRequired,handleVisitorGotOperator:s.a.func.isRequired,openChatWithClient:s.a.func.isRequired,updateClient:s.a.func.isRequired,handleDepartmentChanged:s.a.func.isRequired,loadClients:s.a.func.isRequired,addNewMessage:s.a.func.isRequired,handleConversationStopped:s.a.func.isRequired,handleClientDidNotGetOperator:s.a.func.isRequired,clientSessionOpened:s.a.func.isRequired,clientSessionClosed:s.a.func.isRequired,setActiveClientChannel:s.a.func.isRequired,children:s.a.any.isRequired};var L=Object(m.c)((function(e){var t;return{needPreloadClients:!(null===(t=e.liveChat.get("allClients","ids"))||void 0===t?void 0:t.size)}}),(function(e){return{openChatWithClient:function(t){return e(N(t))},updateClientsLastMessageDate:function(t){e(function(e){return{type:d.a.CLIENTS_UPDATE_LAST_MESSAGE,payload:e}}(t))},addClientAskingLivechat:function(t){e(function(e){return function(t,n){t(C());var a=n().auth.getIn(["user","id"]);return e.assign_operator_id||e.operator_id?t({type:d.a.CLIENTS_GOT_OPERATOR,payload:{client:e,operatorId:a,isCurrentOperator:e.assign_operator_id.toString()===a.toString()||e.operator_id.toString()===a.toString()}}):t({type:d.a.CLIENTS_ADD_ASKING_LIVECHAT,payload:e})}}(t))},handleVisitorGotOperator:function(t,n){e(function(e){var t=e.client,n=e.operatorId;return function(e){return e(C()),e({type:d.a.CLIENTS_GOT_OPERATOR,payload:{client:t,operatorId:n,isCurrentOperator:t.operator_id.toString()===n.toString()}})}}({client:t,operatorId:n}))},handleClientDidNotGetOperator:function(t){e(function(e){return function(t){return t(C()),t({type:d.a.CLIENTS_DID_NOT_GET_OPERATOR,payload:e})}}(t))},handleConversationStopped:function(t){e(function(e){return function(t){return t(C()),t({type:d.a.CONVERSATION_STOPPED,payload:e})}}(t))},updateClient:function(t,n,a){e(_(t,n,a))},handleDepartmentChanged:function(t,n,a){e(j(t,n,a))},loadClients:function(t){return e(S(t))},addNewMessage:function(t){e(function(e){return{type:d.a.CLIENT_NEW_MESSAGE,payload:e}}(t))},clientSessionOpened:function(t){var n;e((n=t,function(e){return e(C()),e({type:d.a.ONLINE_VISITOR_NEW_SESSION_OPENED,payload:n})}))},clientSessionClosed:function(t,n){e(function(e,t){return function(n){return n(C()),n({type:d.a.ONLINE_VISITOR_SESSION_CLOSED,payload:{client:e,hasMoreSessions:t}})}}(t,n))}}}))(F),B=n("9Koi"),V=function(){var e=Object(B.a)().t;return i.a.createElement("div",{className:"w-100 text-large text-center align-self-center"},e("liveChat.chat-window.select-chat-placeholder"))},z=n("6Rhw"),U=n("sOKU"),W=n("TSYQ"),H=n.n(W);function Q(e){var t=e.children,n=e.className;return i.a.createElement("div",{className:H()("sidebar-block",n)},t)}Q.propTypes={children:s.a.any.isRequired,className:s.a.string};var G=Q,$=n("ma3e");function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function J(e){var t=e.renderForm,n=e.renderView,a=K(Object(r.useState)(!1),2),l=a[0],o=a[1],c=function(){return o((function(e){return!e}))};return i.a.createElement(G,null,l?t(c):i.a.createElement("div",{className:"d-flex align-items-baseline justify-content-between"},n(),i.a.createElement(U.a,{onClick:c,color:"link",className:"no-shadow text-dec-none py-0 px-0"},i.a.createElement($.x,{className:"icon-size-20 color-gray position-relative mb-1"}))))}J.propTypes={renderForm:s.a.func.isRequired,renderView:s.a.func.isRequired};var X=n("nc57"),Z=n("x37D");function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){var t=e.clientId,n=e.fieldName,a=e.fieldValue,r=e.renderField,l=e.renderView,o=e.values,c=void 0===o?{}:o,s=Object(B.a)().t;return i.a.createElement(J,{key:t,renderView:l,renderForm:function(e){return i.a.createElement(X.a,{initialValues:te(ne({},n,a),c),handleSubmit:function(a,r){(function(e,a){var r=a.setSubmitting,i=a.setErrors;return f.a.call("post","/methods/clients/".concat(t),{},te(ne({},n,e[n]),e)).validation((function(e,t){i(t),r(!1)})).catch((function(){r(!1)}))})(a,r).then(e)},renderForm:function(t){var n=t.handleChange,a=t.handleBlur,l=t.values,o=t.errors,c=t.isSubmitting,u=t.setFieldValue;return i.a.createElement("div",null,r({handleChange:n,handleBlur:a,values:l,errors:o,setFieldValue:u}),i.a.createElement(Z.a,{className:"mr-3 mb-2",disabled:c},s("common.saveBtnText")),i.a.createElement(U.a,{className:"mb-2",onClick:e},s("common.cancelBtnText")))}})}})}ae.propTypes={clientId:s.a.oneOfType([s.a.string,s.a.number]).isRequired,fieldName:s.a.string.isRequired,fieldValue:s.a.any,renderField:s.a.func.isRequired,renderView:s.a.func.isRequired,values:s.a.object};var re=ae,ie=n("1QrW"),le=n("2Te1"),oe=n("8WGv");function ce(e){var t=e.client,n=Object(B.a)().t,a=t.name,l=t.is_blocked,o=t.variables;o.is_blocked=l;var c=Object(u.a)().isCompanyAdministrator,s=Object(r.useCallback)((function(){return i.a.createElement("div",null,i.a.createElement("span",null,a)," ",l?i.a.createElement(le.a,{color:"danger",className:"d-inline-flex align-items-center align-top"},i.a.createElement("span",{className:"blocked-text"},n("clients.is_blocked.".concat(l)))):null,i.a.createElement("br",null),o.first_name," ",o.last_name," ",o.phone_number)}),[a,o,l]),m=Object(r.useCallback)((function(e){var t=e.handleChange,a=e.setFieldValue,r=e.handleBlur,l=e.values,o=e.errors;return i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,{className:"pt-0",id:"first_name",name:"first_name",label:n("liveChat.chat-window.details.first_name-label"),placeholder:n("liveChat.chat-window.details.first_name-placeholder"),type:"text",onChange:t,onBlur:r,value:l.first_name||"",errors:o}),i.a.createElement(z.a,{className:"pt-0",id:"last_name",name:"last_name",label:n("liveChat.chat-window.details.last_name-label"),placeholder:n("liveChat.chat-window.details.last_name-placeholder"),type:"text",onChange:t,onBlur:r,value:l.last_name||"",errors:o}),i.a.createElement(ie.a,{phone:!0,className:"pt-0",id:"phone_number",name:"phone_number",label:n("liveChat.chat-window.details.phone_number-label"),placeholder:n("liveChat.chat-window.details.phone_number-placeholder"),type:"text",onChange:t,onBlur:r,value:l.phone_number||"",errors:o}),c?i.a.createElement(oe.a,{id:"is_blocked",name:"is_blocked",label:n("liveChat.chat-window.details.is_blocked-label"),placeholder:n("liveChat.chat-window.details.is_blocked-placeholder"),value:l.is_blocked,setFieldValue:a,options:[{label:n("clients.is_blocked.0"),value:0},{label:n("clients.is_blocked.1"),value:1}],errors:o}):null)}),[n]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(re,{clientId:t.id,fieldName:"name",fieldValue:a||"",renderView:s,renderField:m,values:o}))}ce.propTypes={client:s.a.instanceOf(p.a).isRequired};var se=n("T7vI");function ue(e){var t=e.variables,n=void 0===t?{}:t,a=Object(B.a)().t;return Object.values(n).fill(Boolean).length?i.a.createElement(G,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.cb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.variables-title")),i.a.createElement(se.a,{varClassName:"var-table",data:n})):null}ue.propTypes={variables:s.a.object.isRequired};var me=i.a.memo(ue),de=n("xilt"),fe=n("6ukn");function pe(e){var t=e.clientId,n=e.tags;n=n.map((function(e){return{label:e.name,value:e.id}}));var a=Object(B.a)().t,l=Object(r.useCallback)((function(e){var n=(e||[]).map((function(e){return{id:e.__isNew__?null:e.value,name:e.label}}));f.a.call("post","/methods/tags/add-client-tags/".concat(t),{},{tags:n})}),[t]);return i.a.createElement(G,null,i.a.createElement("p",{className:"mb-2"},i.a.createElement($.sb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.tags-title")),i.a.createElement(de.a,{value:n,isMulti:!0,defaultOptions:!0,loadOptions:fe.a,onChange:l}))}pe.defaultValue={tags:s.a.array},pe.propTypes={clientId:s.a.oneOfType([s.a.string,s.a.number]).isRequired,tags:s.a.array};var be=i.a.memo(pe),ve=n("3OM0");function he(e){var t=e.client,n=Object(B.a)().t,a=t.note,l=Object(r.useCallback)((function(e){var t=e.handleChange,a=e.handleBlur,r=e.values,l=e.errors;return i.a.createElement(z.a,{className:"pt-0",id:"note",name:"note",label:n("liveChat.chat-window.details.note-label"),placeholder:n("liveChat.chat-window.details.note-placeholder"),type:"textarea",onChange:t,onBlur:a,value:r.note||"",errors:l})}),[n]),o=Object(r.useCallback)((function(){return i.a.createElement("div",null,i.a.createElement(ve.a,{className:"client-info-title color-black pr-1",htmlFor:"note"},i.a.createElement($.eb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),n("liveChat.chat-window.details.note-title")),i.a.createElement("i",{className:"d-block"},a||n("liveChat.chat-window.details.note-empty-text")))}),[a,n]);return i.a.createElement(re,{clientId:t.id,fieldName:"note",fieldValue:a||"",renderView:o,renderField:l})}he.propTypes={client:s.a.instanceOf(p.a).isRequired};var ge=i.a.memo(he),ye=n("FN/A"),Ee=n("83d4"),Oe=n("LEWT"),je=n("BAJy");function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ce(e){var t=e.clientId,n=e.departmentId,a=e.responsibleOperator,l=Object(u.a)(),o=Object(m.d)(),c=Object(B.a)().t,s=we(Object(r.useState)(1),2),d=s[0],p=s[1],b=we(Object(r.useState)(!!n),2),v=b[0],h=b[1];Object(r.useEffect)((function(){h(!!n)}),[n]);return a&&a.id===l.id?i.a.createElement("div",{className:"d-flex w-100 justify-content-between mb-2"},i.a.createElement("div",null,i.a.createElement("div",{className:"d-flex"},i.a.createElement(je.a,{id:"stop-live-chat",className:"d-inline-block",type:"checkbox",checked:!!d,onChange:function(e){p(+e.target.checked)}}),i.a.createElement("label",{htmlFor:"stop-live-chat",className:"stop-live-chat-label"},c("liveChat.chat-window.details.leave-chat-checkbox"))),i.a.createElement("div",{className:"d-flex"},i.a.createElement(je.a,{id:"remove-department",className:"d-inline-block",type:"checkbox",checked:!!v,onChange:function(e){h(+e.target.checked)}}),i.a.createElement("label",{htmlFor:"remove-department",className:"stop-live-chat-label"},c("liveChat.chat-window.details.remove-department-checkbox")))),i.a.createElement(U.a,{className:"leave-chat-btn",color:"outline-danger",onClick:function(){o(Object(Oe.c)("Do you really want leave conversation?")).then((function(){f.a.call("post","/methods/live-chat/stop-conversation/".concat(t),{},{stopLiveChat:d,removeDepartment:v}).then((function(){}))}))}},c("liveChat.chat-window.details.leave-chat-btn"))):null}Ce.propTypes={clientId:s.a.oneOfType([s.a.string,s.a.number]).isRequired,departmentId:s.a.oneOfType([s.a.string,s.a.number]),responsibleOperator:s.a.instanceOf(Ee.d)};var Ne=Ce,_e=n("FCdT"),ke=n("F6sc"),Re=n("QDav"),qe=n("NIcq");function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Te(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Me=function(e){var t=e.innerProps,n=e.isDisabled,a=e.data;return n?null:i.a.createElement("div",Ae({className:"d-flex align-items-center p-2"},t),i.a.createElement(ye.a,{showIsOnline:!0,user:a.user}),i.a.createElement("span",{className:"ml-2"},a.label))},Pe=function(e){var t=e.getValue,n=Te(e,["getValue"]),a=xe(t(),1)[0];return a?i.a.createElement("div",{className:"d-flex align-items-center p-2"},i.a.createElement(ye.a,{showIsOnline:!0,user:a.user}),i.a.createElement("span",{className:"ml-2"},a.label)):i.a.createElement(_e.z.SingleValue,Ae({},n,{getValue:t}))};function De(e){var t=e.operator,n=e.clientId,a=Object(B.a)().t;return i.a.createElement("div",null,i.a.createElement(qe.a,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),i.a.createElement("label",null,a("liveChat.chat-window.assign")),i.a.createElement(Re.a,{components:{Option:function(e){return i.a.createElement(Me,Ae({},e,{isDisabled:e.value===(null==t?void 0:t.id)}))},SingleValue:Pe},value:t?{value:t.id,label:t.name,user:t}:null,defaultOptions:!0,loadOptions:ke.a,onChange:function(e){var t=e.value;f.a.call("post","/methods/live-chat/set-assign-operator/".concat(n),{},{id:t})}}))}De.defaultValue={},De.propTypes={operator:s.a.instanceOf(Ee.d),clientId:s.a.number.isRequired};var Fe=De;function Le(e){var t=e.operator,n=e.clientId,a=e.departmentId,r=e.assignOperator,l=Object(B.a)().t;return i.a.createElement(G,{className:"responsible-operator"},i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.Fb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),l("liveChat.chat-window.details.responsible-operator-title")),t?i.a.createElement("div",{className:"d-flex flex-wrap justify-content-between"},i.a.createElement("div",{className:"d-flex align-items-center mr-2 mb-2 w-100"},i.a.createElement(ye.a,{showIsOnline:!0,user:t}),i.a.createElement("span",{className:"ml-2"},t.name)),i.a.createElement(Ne,{clientId:n,responsibleOperator:t,departmentId:a})):i.a.createElement("div",{className:"text-center"},l("liveChat.chat-window.details.no-responsible-operator")),i.a.createElement(Fe,{operator:r,clientId:n}))}Le.propTypes={operator:s.a.instanceOf(Ee.d),assignOperator:s.a.instanceOf(Ee.d),clientId:s.a.number.isRequired,departmentId:s.a.number};var Be=i.a.memo(Le);function Ve(e){var t=e.attachment,n=e.fullWidth;switch(t.type){case R.c:return i.a.createElement("div",{className:"py-2",style:{maxWidth:n?200:100}},i.a.createElement("img",{src:t.data.url,alt:"",className:"img-fluid"}));case R.d:return i.a.createElement("div",{className:"py-2",style:{maxWidth:n?300:150}},i.a.createElement("video",{controls:"controls",className:"chat-message-video"},i.a.createElement("source",{src:t.data.url})));case R.a:return i.a.createElement("div",{className:"py-2 chat-message-audio",style:{maxWidth:n?300:150}},i.a.createElement("audio",{controls:!0,src:t.data.url}));case R.b:return i.a.createElement("div",{className:"chat-message-file my-1"},i.a.createElement("a",{href:t.data.url},i.a.createElement($.C,{className:"icon-size-20 color-gray"})))}return null}Ve.propTypes={attachment:s.a.object,fullWidth:s.a.bool};var ze=Ve;function Ue(e){switch(e.type){case R.g:return null;case R.e:return"/img/default_chatbot_img.svg";case R.f:return"/img/default_user_image.svg"}}var We=n("BLzl"),He=n("/kxI");function Qe(e){var t=e.link,n=e.image_link,a=e.title,r=e.internal_product_id,l=e.catalog_id,o=e.description,c=e.quantity_to_sell_on_facebook,s=e.price,u=Object(B.a)().t;return i.a.createElement(We.a,{className:"m-1 mb-2 order-preview"},i.a.createElement(He.a,null,i.a.createElement("div",{className:"mb-3"},i.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},i.a.createElement("div",{className:"mr-4"},i.a.createElement("a",{href:t,target:"_blank",className:"product-img-link"},i.a.createElement("img",{src:n,alt:a,className:"img-responsive product-img"}))),i.a.createElement("div",{className:"product-info"},i.a.createElement("div",{title:r,"data-productid":r,"data-catalogid":l},i.a.createElement("b",null,a)),i.a.createElement("div",null,o),i.a.createElement("div",null,i.a.createElement("div",{className:"mr-2"},i.a.createElement("b",{className:"mr-2"},u("shop.product-context.quantity")),i.a.createElement("span",null,c)),i.a.createElement("span",null,i.a.createElement("b",{className:"mr-1"},u("shop.product-context.price")),i.a.createElement("span",null,s)))))),i.a.createElement("h5",{className:"d-flex justify-content-between"},i.a.createElement("span",null,u("shop.order.preview.price")),i.a.createElement("span",null,s))))}Qe.propTypes={link:s.a.string.isRequired,image_link:s.a.string.isRequired,title:s.a.string.isRequired,internal_product_id:s.a.string.isRequired,catalog_id:s.a.number.isRequired,description:s.a.string,quantity_to_sell_on_facebook:s.a.number,price:s.a.string};var Ge=Qe,$e=n("Q59H");function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ye(e){var t,n=e.chatMessage,a=e.isPreview,r=e.formatMsgTime,l=function(e){return e.isFromClient?e.client:e.isFromOperator?e.user:{name:"Bot"}}(n),o=Ue(n),c=Object(B.a)().t;return t=n.isSystem?c(n.message.message,n.message.params):"singleProductMessage"===n.productInfoType?n.singleProductMessageText:n.formatted_message,i.a.createElement("div",{title:n.id,className:H()("message-container clearfix",{"from-client":n.isFromClient,"from-operator":n.isFromOperator,"from-bot":n.isFromBot,"from-system":n.isOldSystem||n.isSystem,preview:a})},i.a.createElement("div",{className:"message-wrapper"},i.a.createElement("div",{className:"message py-1"},o?i.a.createElement("img",{className:"message-img-autor mx-sm-4 mx-2",src:o,alt:"author img"}):null,i.a.createElement("div",{className:"message-content text-block"},i.a.createElement("div",{className:"chat-message color-black",dangerouslySetInnerHTML:{__html:t}}),i.a.createElement("div",null,n.attachments.map((function(e){return i.a.createElement(ze,{key:e.id,attachment:e,fullWidth:!n.message})}))),n.order?i.a.createElement($e.a,{order:n.order}):null,n.productInfo?i.a.createElement(Ge,n.productInfo):null,n.productsInfo?i.a.createElement("div",null,n.productsInfo.map((function(e){return i.a.createElement(Ge,Ke({key:e.internal_product_id},e))}))):null,n.isOldSystem||n.isSystem?null:i.a.createElement("div",{className:"message-info-mark mt-2"},i.a.createElement("span",{className:"color-black mr-2"},null==l?void 0:l.name),n.created_at?i.a.createElement("span",{className:"color-dark-gray"},r(n.created_at)):null)))))}Ye.defaultProps={isPreview:!1},Ye.propTypes={chatMessage:s.a.instanceOf(R.h).isRequired,isPreview:s.a.bool,formatMsgTime:s.a.func.isRequired};var Je=i.a.memo(Ye),Xe=n("RotF"),Ze=n.n(Xe),et=n("wDsf");function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var at=n("YOdH"),rt=n("19iC"),it=n("gmZo");function lt(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(at.a)(),n=Object(rt.c)(),a=Object(rt.d)(),i=Object(B.a)(),l=i.t;return Object(r.useCallback)((function(r){var i=Object(it.a)(1e3*r).tz(t);if(((new Date).getTime()-i.toDate().getTime())/1e3<3600&&e)return i.fromNow();if(i.isSame(new Date,"day"))return l("common.date.today")+", "+i.format(a);var o=new Date;return i.isSame(o.setTime(o.getTime()-864e5),"day")?l("common.date.yesterday")+", "+i.format(a):i.format(n)}),[n,t,a,l,e])}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function st(e){var t,n,a,l=e.client,o=e.activeClientChannel,c=e.newMessages,s=e.oldMessages,u=e.loading,m=e.hasMore,d=e.loadMessages,f=null===(t=l.name)||void 0===t?void 0:t.toString(),p=l.id.toString(),b=lt(),v=ot(Object(r.useState)(null),2),h=v[0],g=v[1],y=ot(function(e,t,n){var a=e.id.toString(),i=Object(et.a)(a),l=Object(r.useRef)(),o=tt(Object(r.useState)(!1),2),c=o[0],s=o[1],u=tt(Object(r.useState)(!1),2),m=u[0],d=u[1],f=Object(r.useCallback)((function(){var e=l.current;return e.clientHeight+e.scrollTop>=e.scrollHeight-50}),[l]),p=Object(r.useCallback)((function(){var e=l.current;e.scrollTop=e.scrollHeight}),[l]);Object(r.useEffect)((function(){!t&&a&&(s(!1),d(!1))}),[a,t]),Object(r.useEffect)((function(){!c&&t&&a&&(p(),s(!0),d(!0))}),[p,t,c,a]),Object(r.useEffect)((function(){a===i&&c&&m&&p()}),[n,c,a,i]);var b=Object(r.useCallback)((function(){var e=f();e!==m&&d(e)}),[m,d,f]);return[l,b,c,f]}(l,s,c),4),E=y[0],O=y[1],j=y[2],w=y[3];Object(r.useEffect)((function(){d(p)}),[p,d]);var S=Object(r.useCallback)((function(e,t){return e&&!t?R.h.instantiate({id:"preview",message:e,created_at:null,client:l,type:R.f}):null}),[f]);Object(r.useEffect)((function(){if(o)return o.listenForWhisper("typing",(function(e){var t=e.message,n=e.fromOperator;g(S(t,n)),setTimeout((function(){g(null)}),2e3)})),function(){o.stopListeningForWhisper("typing")}}),[o,S]);var C,N=null===(n=E.current)||void 0===n?void 0:n.scrollHeight,_=null===(a=E.current)||void 0===a?void 0:a.scrollTop;return Object(r.useEffect)((function(){var e=E.current;if(e&&N&&!w()){var t=e.scrollHeight-N;e.scrollTop=_+t}}),[s,h]),C=s?i.a.createElement("div",{className:"pr-4"},i.a.createElement(Ze.a,{threshold:30,isReverse:!0,loadMore:function(){m&&!u&&j&&d(p)},hasMore:m&&!u&&j,loader:null,useWindow:!1,getScrollParent:function(){return E.current}},s.map((function(e,t){return i.a.createElement(Je,{key:"".concat(t,"-").concat(e.id),chatMessage:e,formatMsgTime:b})}))),c.map((function(e){return i.a.createElement(Je,{key:e.id,chatMessage:e,formatMsgTime:b})})),h?i.a.createElement(Je,{chatMessage:h,formatMsgTime:b}):null):null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"small-scrollbar messages-list messages-list-scrollbar w-100 pr-2",ref:E,onScroll:O},C))}st.propTypes={client:s.a.instanceOf(p.a).isRequired,activeClientChannel:s.a.object,newMessages:s.a.object.isRequired,oldMessages:s.a.object,loading:s.a.bool,hasMore:s.a.bool,loadMessages:s.a.func.isRequired};var ut=Object(m.c)((function(e){var t=e.liveChat;return{newMessages:t.get("newClientMessages"),oldMessages:t.get("oldClientMessages"),hasMore:t.get("oldMessagesHasMore"),loading:t.get("clientMessagesLoading")}}),(function(e){return{loadMessages:function(t){return e(k(t))}}}))(st),mt=n("7BfX"),dt=n("55Ip"),ft=n("XRgj"),pt=n("mDHu"),bt=n("zEWu");function vt(e){var t,n=e.variables,a=e.integrationType,r=[];switch(n.first_name&&r.push(n.first_name),n.last_name&&r.push(n.last_name),n.phone_number&&r.push(n.phone_number),+a){case ft.i:t=i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"mr-2"},r.join(" ")),i.a.createElement("div",{className:"d-flex"},i.a.createElement("span",{className:"mr-2"},n.ip),Object(bt.a)(n.geo)?i.a.createElement(pt.a,{geo:n.geo}):null));break;default:t=i.a.createElement("div",null,r.join(" "))}return t?i.a.createElement("div",{className:"mb-2 d-flex flex-wrap"},t):null}vt.propTypes={variables:s.a.object.isRequired,integrationType:s.a.number.isRequired};var ht=vt,gt=n("HayB");function yt(e){var t=e.onClick,n=e.href,a=i.a.createElement($.e,{className:"icon-size-20 color-blue mb-2"});return t?i.a.createElement("button",{className:"btn btn-link no-shadow text-dec-none d-flex align-items-center px-2",onClick:t},a):n?i.a.createElement(dt.a,{className:"btn btn-link no-shadow text-dec-none d-flex align-items-center px-2",to:n},a):null}function Et(e){var t=e.onClick,n=e.href,a=e.client,r=e.toggleShowDetails,l=a.integration.service,o=a.variables;return i.a.createElement("div",{className:"mobile-chat-header-container pt-3 pb-2 pl-1"},i.a.createElement(yt,{onClick:t,href:n}),i.a.createElement("button",{type:"button",onClick:r,className:"current-interlocutor btn-link no-shadow border-0 w-100 px-1 d-flex align-items-center text-left"},i.a.createElement("div",{className:"d-flex flex-wrap align-items-center img-block mr-3 mb-2"},gt.b[l]()),i.a.createElement("div",{className:"d-flex flex-wrap align-items-center"},i.a.createElement("div",{className:"w-100 mb-2"},a.name),o&&i.a.createElement(ht,{variables:o,integrationType:l}))))}yt.propTypes={onClick:s.a.func,href:s.a.string},Et.propTypes={onClick:s.a.func,href:s.a.string,client:s.a.instanceOf(p.a).isRequired,toggleShowDetails:s.a.func.isRequired};var Ot=Et,jt=s.a.oneOf([h.a,h.b,h.d,h.e,h.c]),wt=n("bTjV"),St=n("33Fu");function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _t(e){var t=e.message,n=e.formatDateTime;return i.a.createElement("div",{style:{border:"1px solid #cecece",marginBottom:5,padding:5,borderRadius:3}},i.a.createElement("div",{style:{fontSize:13,color:"#6d6d6d",marginBottom:3}},n(t.send_at)),t.text?i.a.createElement("div",{style:{paddingLeft:15},dangerouslySetInnerHTML:{__html:t.text}}):i.a.createElement("div",null,t.trigger))}function kt(e){var t=e.clientId,n=Object(B.a)().t,a=Ct(Object(r.useState)(null),2),l=a[0],o=a[1],c=Ct(Object(r.useState)(!1),2),s=c[0],u=c[1],m=Object(rt.a)();Object(r.useEffect)((function(){o(null),u(!1)}),[t]);var d,p=function(){o(null),u(!1)};return d=null!==l||s?s?i.a.createElement("div",{className:"text-center"},i.a.createElement(wt.a,null)):s||!l||l.length?l?i.a.createElement("div",null,i.a.createElement("div",null,l.map((function(e){return i.a.createElement(_t,{key:e.id,message:e,formatDateTime:m})}))),i.a.createElement("div",{className:"text-center"},i.a.createElement(U.a,{onClick:p,block:!0},n("liveChat.chat-window.scheduled-messages.hide-btn")))):null:i.a.createElement("div",{className:"text-center"},i.a.createElement("p",null,n("liveChat.chat-window.scheduled-messages.no-scheduled-messages")),i.a.createElement(U.a,{onClick:p,block:!0},n("liveChat.chat-window.scheduled-messages.hide-btn"))):i.a.createElement("div",null,i.a.createElement(U.a,{onClick:function(){u(!0),f.a.call("get","/methods/clients/".concat(t,"/scheduled-messages")).data((function(e){o(e),u(!1)}))},block:!0},n("liveChat.chat-window.scheduled-messages.show-btn"))),i.a.createElement(G,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement(St.a,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),n("liveChat.chat-window.scheduled-messages.scheduled-title")),d))}_t.propTypes={message:s.a.object.isRequired,formatDateTime:s.a.func.isRequired},kt.propTypes={clientId:s.a.number.isRequired};var Rt=i.a.memo(kt);function qt(e){var t=e.client,n=gt.b[t.integration.service];return i.a.createElement(dt.a,{to:v.a.chatRoute.getLink("conversations",t.id),className:"d-flex w-100 client-variation"},i.a.createElement("div",{className:"service-icon-block service-icon-block_small"},n()),i.a.createElement("span",{className:"ml-1"},t.name))}qt.propTypes={client:s.a.instanceOf(p.a).isRequired};var xt=qt,It=n("6jMY"),Tt=n("qtta");function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt=Object(It.b)([ft.c,ft.d]),Bt={control:function(e){return Dt(Dt({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function Vt(e){var t=e.phoneNumber,n=e.hideForm,a=Object(m.d)(),o=Object(B.a)().t,c=At(Object(r.useState)(null),2),s=c[0],u=c[1],b=At(Object(r.useState)(null),2),h=b[0],g=b[1],y=Object(r.useCallback)((function(e,t){a(function(e,t){return function(n,a){var r=a().liveChat,i=r.getIn(["allClients","ids"]).concat(r.getIn(["onlineClients","ids"])).concat(r.getIn(["liveClients","ids"])).concat(r.getIn(["skipped","ids"])),l=null;i.toSet().map((function(a){(l=r.getIn(["clientsMap",a])).phone===t&&l.id.toString()!==e.toString()&&f.a.call("get","/methods/live-chat/get-client/".concat(l.id)).data((function(e){n({type:d.a.UPDATE_WHOLE_CLIENT,payload:p.a.instantiate(e)})}))}))}}(e,t))}),[a]);if(s)return i.a.createElement(l.a,{to:v.a.chatRoute.getLink("conversations",s)});return i.a.createElement("div",null,i.a.createElement(Re.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:Lt,onChange:function(e){var t=e.value;g(t)},styles:Bt,className:"mb-2"}),i.a.createElement("div",{className:"d-flex justify-content-between"},i.a.createElement(U.a,{type:"button",color:"danger",outline:!0,onClick:n,className:"new-client-form-btn"},o("common.cancelBtnText")),i.a.createElement(U.a,{type:"button",color:"success",outline:!0,onClick:function(){if(h){var e={integration_id:h,phone_number:t,variables:[{name:"phone_number",value:t}],tags:[]};f.a.call("post","/methods/clients",{},e).data((function(e){g(null),u(e.id),y(e.id,e.phone)})).catch((function(){g(null),n()}))}},disabled:!h,className:"new-client-form-btn"},o("common.addBtnText"))))}function zt(e){var t=e.phoneNumber,n=At(Object(r.useState)(!1),2),a=n[0],l=n[1],o=Object(r.useCallback)((function(){return l(!1)}),[]);return i.a.createElement("div",null,a?i.a.createElement(Vt,{hideForm:o,phoneNumber:t}):i.a.createElement("div",{className:"text-center"},i.a.createElement(U.a,{type:"button",outline:!0,color:"primary",onClick:function(){return l(!0)}},i.a.createElement(Tt.b,null))))}Vt.propTypes={phoneNumber:s.a.string.isRequired,hideForm:s.a.func.isRequired},zt.propTypes={phoneNumber:s.a.string.isRequired};var Ut=zt;function Wt(e){var t=e.clients,n=e.clientPhone,a=Object(B.a)().t;return i.a.createElement(G,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.o,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.other-chats-with-lead-title")),i.a.createElement("div",{className:"other-clients-list mb-3"},t.length?t.map((function(e){return i.a.createElement(xt,{key:e.id,client:e})})):i.a.createElement("div",{className:"text-secondary text-sm-left no-other-chats"},a("liveChat.chat-window.details.no-other-chats-with-lead"))),i.a.createElement(Ut,{phoneNumber:n}))}Wt.propTypes={clients:s.a.arrayOf(s.a.instanceOf(p.a)).isRequired,clientPhone:s.a.string.isRequired};var Ht=Wt,Qt=n("jHW1"),Gt=n("hBLe");function $t(e){var t,n=e.event,a=Object(B.a)().t,r=Object(Gt.a)(),l=Object(rt.a)(),o=Object(rt.b)(),c=(n.end_time-n.start_time)/3600>24,s=[];return n.email&&s.push(n.email),n.user_phone&&s.push(n.user_phone),t=c?i.a.createElement("div",{className:"date-block color-dark-gray text-right"},l(n.start_time)," -"," ",l(n.end_time)," "):i.a.createElement("div",{className:"date-block color-dark-gray text-right"},o(n.start_time)," - ",o(n.end_time)," ",r(n.start_time)),i.a.createElement("div",{className:"user-event-item message"},i.a.createElement("div",{className:"main-data"},n.calendar.name,": ",n.username),i.a.createElement("div",{className:"main-data"},a("liveChat.chat-window.details.contacts-subtitle")," ",s.join(", ")),n.comment?i.a.createElement("div",{className:"comment-block"},n.comment):null,t)}function Kt(e){var t=e.events,n=Object(B.a)().t;return i.a.createElement(G,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.Y,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),n("liveChat.chat-window.details.calendar-events-title")),i.a.createElement("div",{className:"other-clients-list mb-3"},t.length?t.map((function(e){return i.a.createElement($t,{key:e.id,event:e})})):i.a.createElement("div",{className:"text-secondary text-sm-left no-other-chats"},n("liveChat.chat-window.details.no-calendar-events"))))}$t.propTypes={event:s.a.instanceOf(Qt.a).isRequired},Kt.propTypes={events:s.a.arrayOf(s.a.instanceOf(Qt.a)).isRequired};var Yt=Kt,Jt=n("LdVD"),Xt=function(e){var t=e.clientId,n=e.department,a=Object(B.a)().t;return i.a.createElement(G,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.j,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.department-title")),i.a.createElement(Re.a,{placeholder:a("departments.lobby-department"),value:n?{value:n.id,label:n.name}:null,defaultOptions:!0,loadOptions:Jt.a,onChange:function(e){f.a.call("post","/methods/departments/add-to-client/".concat(t),{},{department_id:e?e.value:null})},isClearable:!0}))};Xt.propTypes={clientId:s.a.number.isRequired,department:s.a.shape({id:s.a.number.isRequired,name:s.a.string.isRequired})};var Zt=Xt;function en(e){var t=e.file,n=e.setFile,a=e.disabled,l=Object(r.useCallback)((function(){a||n(null)}),[a,n]);return i.a.createElement("div",{className:"d-flex align-items-center px-2"},i.a.createElement($.C,{className:"icon-size-14 color-gray mr-1"}),i.a.createElement("span",null,t.name),i.a.createElement("button",{onClick:l,className:"btn btn-link text-dec-none no-shadow p-1"},i.a.createElement($.vb,{className:"icon-size-12 color-red"})))}en.propTypes={file:s.a.shape({name:s.a.string.isRequired}),setFile:s.a.func.isRequired,disabled:s.a.bool};var tn=i.a.memo(en);function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return an(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function rn(e){return f.a.call("post","/methods/live-chat/pick-client/".concat(e))}function ln(e){var t=e.children,n=e.clientId,a=e.color,l=e.text,o=e.afterSend,c=e.title,s=e.className,m=nn(Object(r.useState)(!1),2),d=m[0],f=m[1],p=Object(u.a)();return i.a.createElement(U.a,{className:H()(s),disabled:d,color:a,onClick:function(){f(!0),rn(n,l||p.default_conversation_message).then((function(){o&&o()})).catch((function(){f(!1)}))},type:"button",title:c},t)}ln.defaultProps={color:"warning"},ln.propTypes={clientId:s.a.oneOfType([s.a.string,s.a.number]).isRequired,children:s.a.any.isRequired,color:s.a.string,text:s.a.string,title:s.a.string,afterSend:s.a.func,className:s.a.string};var on=i.a.memo(ln);function cn(e){var t=e.client,n=e.message,a=e.setMessage,l=Object(B.a)().t,o=Object(u.a)(),c=t.assign_operator_id,s=t.id.toString(),m=c===o.id,d=Object(r.useCallback)((function(){f.a.call("post","/methods/live-chat/decline-assign-operator/".concat(s))}),[s]);return i.a.createElement("div",{className:"assignment-block"},i.a.createElement("p",{className:"mb-1"},m?l("liveChat.chat-window.assigned-you"):l("liveChat.chat-window.assigned-someone",{user:t.assignOperator.name})),i.a.createElement("div",{className:"text-center"},i.a.createElement(on,{className:"btn btn-success no-shadow border-0 mr-1",color:"success",clientId:t.id,text:n,afterSend:function(){a("")}},l("liveChat.chat-window.pick-up")),m&&i.a.createElement(U.a,{onClick:d,color:"warning"},l("liveChat.chat-window.decline-assignment"))))}cn.propTypes={client:s.a.instanceOf(p.a).isRequired,message:s.a.string,setMessage:s.a.func.isRequired};var sn=i.a.forwardRef((function(e,t){var n=e.disabled,a=e.setFile,l=Object(r.useCallback)((function(e){n||a(e.target.files[0])}),[n,a]);return i.a.createElement("label",{className:"mb-0"},i.a.createElement("input",{ref:t,type:"file",onChange:l,className:"d-none",disabled:n}),i.a.createElement($.R,{className:"icon-size-20 color-gray position-relative ml-sm-4 ml-2 my-2"}))}));sn.propTypes={setFile:s.a.func.isRequired,disabled:s.a.bool};var un=i.a.memo(sn);function mn(e){var t=e.operatorId,n=e.message,a=e.setMessage,l=e.disabled,o=e.activeClientChannel,c=e.onSubmit,s=Object(r.useRef)();Object(r.useEffect)((function(){if(!l){var e=(s.current.value||"").length;s.current.focus(),s.current.setSelectionRange(e,e)}}),[l]);var u=Object(r.useCallback)((function(e){l||13!==e.keyCode||e.shiftKey||c()}),[l,c]),m=Object(r.useCallback)((function(e){l||(o&&o.whisper("typing",{message:"operator typing message...",fromOperator:t}),a(e.target.value))}),[t,l,o,a]),d=Object(B.a)().t;return i.a.createElement("textarea",{ref:s,disabled:l,className:H()("w-100 message-text-field ml-2",{disabled:l}),onChange:l?null:m,onKeyDown:u,value:n||"",placeholder:d("liveChat.chat-window.text-editor-placeholder")})}mn.propTypes={operatorId:s.a.number,message:s.a.string,disabled:s.a.bool,setMessage:s.a.func.isRequired,onSubmit:s.a.func.isRequired,activeClientChannel:s.a.object};var dn=mn,fn=n("t8fN");function pn(e){var t=e.activeClientChannel,n=e.client,a=e.needPickClientToSendMessage,r=e.isSubmitting,l=e.message,o=e.setMessage,c=e.file,s=e.setFile,u=e.onSubmit,m=e.fileRef,d=e.audioMessage,f=e.setAudioMessage,p=Boolean(r||!c&&!l&&!d);return i.a.createElement(i.a.Fragment,null,i.a.createElement(un,{ref:m,setFile:s,disabled:Boolean(r||d)}),i.a.createElement(fn.a,{className:"mx-2",setAudioMessage:f,disabled:Boolean(r||c)}),i.a.createElement(dn,{operatorId:n.operator_id,message:l,setMessage:o,disabled:r,activeClientChannel:t,onSubmit:u}),a?i.a.createElement(on,{title:"Pick client",className:"send-btn btn-link no-shadow border-0",clientId:n.id,text:l,afterSend:function(){o("")}},i.a.createElement("img",{className:"send-icon",src:"/img/send.svg",alt:"send"})):i.a.createElement(Z.a,{title:"Send",className:H()("send-btn btn-link no-shadow border-0",{disabled:p}),disabled:p,onClick:u},i.a.createElement("img",{className:"send-icon",src:"/img/send.svg",alt:"send"})))}pn.propTypes={client:s.a.instanceOf(p.a).isRequired,activeClientChannel:s.a.object,isSubmitting:s.a.bool,needPickClientToSendMessage:s.a.bool,message:s.a.string,setMessage:s.a.func.isRequired,audioMessage:s.a.oneOfType([s.a.object,s.a.string]),setAudioMessage:s.a.func.isRequired,onSubmit:s.a.func.isRequired,file:s.a.object,fileRef:s.a.object,setFile:s.a.func.isRequired};var bn=n("zl2q"),vn=n("Z04g"),hn=n("Gv9V");function gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function En(e){var t=e.message,n=e.onQuickReplySelect,a=gn(Object(r.useState)([]),2),l=a[0],o=a[1];Object(r.useEffect)((function(){f.a.call("get","/methods/quick-replies/search",{q:t}).data((function(e){o(e)}))}),[t]);var c=l.map((function(e){return{renderButton:function(){return i.a.createElement("div",null,e.subject_name)},renderContent:function(){return i.a.createElement("div",null,e.replies.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement(U.a,{type:"button",color:"white",className:"btn-quick-answers",onClick:function(){n(e)}},i.a.createElement("span",{className:"name"},e.name)," ",i.a.createElement("span",{className:"message"},e.message),i.a.createElement("span",{className:"message message-hovered"},e.message),e.attachment?i.a.createElement("span",{className:"attachment"},i.a.createElement("a",{href:e.attachment.url},i.a.createElement($.C,null))):null,e.audio_message?i.a.createElement("span",{className:"attachment audio"},i.a.createElement(hn.a,{url:e.audio_message.url})):null))})))}}}));return i.a.createElement("div",{className:"quick-answers-block"},i.a.createElement(vn.a,{className:"quick-answers",items:c}))}En.propTypes={message:s.a.string,onQuickReplySelect:s.a.func.isRequired};var On=n("o0o1"),jn=n.n(On);function wn(e,t,n,a,r,i,l){try{var o=e[i](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function Sn(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function l(e){wn(i,a,r,l,o,"next",e)}function o(e){wn(i,a,r,l,o,"throw",e)}l(void 0)}))}}function Cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function xn(e){var t=e.client,n=e.activeClientChannel,a=Object(u.a)(),l=Rn(Object(r.useState)(!1),2),o=l[0],c=l[1],s=Rn(Object(r.useState)(""),2),m=s[0],d=s[1],p=Rn(Object(r.useState)(null),2),b=p[0],v=p[1],h=Rn(Object(r.useState)(null),2),g=h[0],y=h[1],E=t.id.toString(),O=!t.operator_id||t.operator_id!==a.id,j=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(r.useState)(e),n=Cn(t,2),a=n[0],i=n[1],l=Object(r.useCallback)(function(){var e=Sn(jn.a.mark((function e(t){var n;return jn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,f.a.call("GET","/methods/live-chat/draft/".concat(t));case 3:return n=e.sent,i(!1),e.abrupt("return",n.data?n.data.draft:"");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),o=Object(r.useRef)(),c=Object(r.useRef)(),s=function(e,t){o.current&&clearTimeout(o.current),c.current&&clearTimeout(c.current),t?o.current=setTimeout((function(){f.a.call("POST","/methods/live-chat/draft/".concat(e),{},{message:t})}),1e3):c.current=setTimeout((function(){f.a.call("DELETE","/methods/live-chat/draft/".concat(e))}),200)};return{isLoadingDraft:a,loadDraft:l,handleDraftChange:s}}(!O),w=j.isLoadingDraft,S=j.handleDraftChange,C=j.loadDraft,N=function(e){var t=e.message,n=e.setIsSubmitting,a=e.setMessage,i=e.setAudioMessage,l=e.setFile,o=_n(Object(r.useState)(!1),2),c=o[0],s=o[1],u=_n(Object(r.useState)(null),2),m=u[0],d=u[1];Object(r.useEffect)((function(){s(t&&"/"===t[0])}),[t]);var f=Object(r.useCallback)((function(e){n(!0),s(!1),d(e.id),a(e.message?e.message:e.trigger),e.audio_message&&i(e.audio_message.url),e.attachment&&l(e.attachment),setTimeout((function(){n(!1)}),0)}),[i,l,n,a]);return{showQuickRepliesBlock:c,setQuickReplyId:d,quickReplyId:m,onQuickReplySelect:f}}({message:m,setIsSubmitting:c,setMessage:d,setAudioMessage:y,setFile:v}),_=N.showQuickRepliesBlock,k=N.quickReplyId,R=N.setQuickReplyId,q=N.onQuickReplySelect,x=a.default_conversation_message;Object(r.useEffect)((function(){var e=O?x:"";d(e),O||C(E).then((function(t){d(t||e)}))}),[E,O,x,C]);var I,T=Object(r.useCallback)((function(e){d(e),e||"/"!==e[0]||S(E,e)}),[E]),A=Object(r.useRef)(),M=Object(r.useCallback)((function(){T(""),v(null),y(null),R(null),A.current&&(A.current.files=null,A.current.value=null)}),[A,T]),P=Object(r.useCallback)((function(){if(!o){c(!0);var e=m;((m||"").match(/(http[s]?|ftp):\/\/[\w\d]{1}[^\s]*/g)||[]).forEach((function(t){e=e.replace(t,'<a href="'.concat(t,'" target="_blank">').concat(t,"</a>"))}));var t=new FormData;t.append("text",e),!k&&b&&t.append("attachment",b),!k&&g&&t.append("audioMessage",g),k&&t.append("quickReplyId",k),f.a.call("post","/methods/live-chat/send-message/".concat(E),{},t).then((function(){M()})).finally((function(){c(!1)}))}}),[o,m,b,M,E,g,k]),D=Object(r.useCallback)((function(){rn(E).then((function(){P()}))}),[E,P]);return I=t.assign_operator_id?i.a.createElement(cn,{client:t,message:m,setMessage:T}):i.a.createElement(pn,{activeClientChannel:n,client:t,isSubmitting:o||w,message:m,setMessage:T,file:b,setFile:v,needPickClientToSendMessage:O,onSubmit:O?D:P,audioMessage:g,setAudioMessage:y}),i.a.createElement("div",{className:H()("mt-3",{"is-audio-message":g,"is-file":b})},i.a.createElement("div",{className:"position-relative"},_&&m?i.a.createElement(En,{message:m.substring(1),onQuickReplySelect:q}):null),b?i.a.createElement(tn,{file:b,setFile:v,disabled:o,isAudio:!1}):null,g?i.a.createElement(bn.a,{audioMessage:g,setAudioMessage:y}):null,i.a.createElement("div",{className:H()("d-flex align-items-center message-send-block",{"need-pick-user":O})},I))}xn.propTypes={client:s.a.instanceOf(p.a).isRequired,activeClientChannel:s.a.object};var In=n("gvs2");function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Mn(e){var t=e.orderId,n=Tn(Object(r.useState)(!1),2),a=n[0],l=n[1],o=Object(r.useCallback)((function(){l(!0),f.a.call("post","/methods/live-chat/send-checkout-link/".concat(t)).then((function(){l(!1)}))}),[t]);return i.a.createElement(U.a,{disabled:a,onClick:o},"Send payment link")}function Pn(e){var t=e.clientId,n=Tn(Object(r.useState)(!0),2),a=n[0],l=n[1],o=Tn(Object(r.useState)([]),2),c=o[0],s=o[1];return Object(r.useEffect)((function(){f.a.call("get","/methods/clients/".concat(t,"/active-orders")).data((function(e){s(e.map(In.a.instantiate)),l(!1)})).catch((function(){s([]),l(!1)}))}),[t]),a?i.a.createElement("div",{className:"text-center"},i.a.createElement(wt.a,null)):i.a.createElement("ul",{className:"list-unstyled"},c.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(dt.a,{to:"/orders/".concat(e.id,"/view")},i.a.createElement("span",null,e.extended_details.accepted.products.map((function(e){return e.product.title})).join(", "))," ",i.a.createElement("span",null,e.extended_details.accepted.sum," ",e.extended_details.currency)),i.a.createElement(Mn,{orderId:e.id}))})))}var Dn=function(e){var t=e.clientId,n=e.count,a=Object(B.a)().t,l=Tn(Object(r.useState)(!1),2),o=l[0],c=l[1];return i.a.createElement(G,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.j,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.orders-title")," ",i.a.createElement("span",null,n)),o?i.a.createElement(Pn,{clientId:t}):i.a.createElement("div",{className:"text-center"},i.a.createElement(U.a,{color:"primary",onClick:function(){return c(!0)}},"Load orders")))};Dn.propTypes={clientId:s.a.number.isRequired,count:s.a.number};var Fn=Dn;function Ln(){return(Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function zn(e){var t=e.activeClientChannel,n=e.tab,a=Object(B.a)().t,o=Object(m.d)(),c=Bn(Object(r.useState)(!1),2),s=c[0],u=c[1],d=Bn(Object(r.useState)(!1),2),f=d[0],p=d[1],b=M();Object(r.useEffect)((function(){b||p(!1)}),[b]);var h,g=function(){u(!1)},y=Object(r.useCallback)((function(){u((function(e){return!e}))}),[]),E=Object(mt.useSwipeable)({onSwipedLeft:function(){u(!0)},onSwipedRight:function(){s?g():(p(!0),o(N(null)))}});return f?i.a.createElement(l.a,{to:v.a.homeRoute.getLink(n)}):(h=b?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"messages-area"},i.a.createElement(Ot,{client:b,href:v.a.homeRoute.getLink(n),toggleShowDetails:y}),i.a.createElement("div",{className:"messages-area-content pt-xl-4 pt-0"},i.a.createElement(xn,{client:b,activeClientChannel:t}),i.a.createElement(ut,{client:b,activeClientChannel:t}))),i.a.createElement("div",{className:"client-info-area-wrapper"},i.a.createElement(Ot,{client:b,onClick:g,toggleShowDetails:y}),i.a.createElement("div",{className:"client-info-area small-scrollbar"},i.a.createElement("div",{className:"info-area top-area pt-xl-4 pt-2 pb-4 px-3 mb-3"},i.a.createElement("div",{className:"client-info color-black mb-3"},i.a.createElement($.J,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.title")),i.a.createElement(ce,{client:b}),i.a.createElement(Be,{assignOperator:b.assignOperator,operator:b.responsibleOperator,clientId:b.id,responsibleOperator:b.responsibleOperator,departmentId:b.department?b.department.id:null}),i.a.createElement(Zt,{clientId:b.id,department:b.department}),b.active_product_orders_count?i.a.createElement(Fn,{clientId:b.id,count:b.active_product_orders_count}):null),i.a.createElement("div",{className:"info-area bottom-area py-4 px-3 mb-3"},i.a.createElement(me,{variables:b.variables}),b.phone?i.a.createElement(Ht,{clientPhone:b.phone,clients:b.clients_with_same_lead}):null,b.calendar_events.length?i.a.createElement(Yt,{events:b.calendar_events}):null,i.a.createElement(be,{clientId:b.id,tags:b.tags}),i.a.createElement(ge,{client:b}),i.a.createElement(Rt,{clientId:b.id}))))):i.a.createElement(V,null),i.a.createElement("div",Ln({className:H()("chat-window",{active:!!b,"show-info":s})},E),h))}zn.propTypes={activeClientChannel:s.a.object,tab:jt};var Un=zn,Wn=n("hAFs"),Hn=n("CXWj");function Qn(e){var t=e.name,n=e.label,a=Object(u.a)(),l=Object(m.d)(),o=a.user_notifications_setting[t];Object(r.useEffect)((function(){A.a.private("User.self.".concat(a.id)).listen("UserNotificationSettingsChanged",(function(e){var t=e.data;l(Object(Wn.a)(a.set("user_notifications_setting",t).toJS()))}))}),[Wn.a,a]);return i.a.createElement(Hn.a,{formGroupClass:"pt-2 pb-0",id:t,label:n,name:t,value:o,setFieldValue:function(e,t){f.a.call("patch","/methods/user/notifications-settings/".concat(a.user_notifications_setting.id),{},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))},errors:{}})}Qn.propTypes={name:s.a.string.isRequired,label:s.a.string.isRequired};var Gn=Qn,$n=n("h4JF"),Kn=n("zwA0");function Yn(e){var t=e.lastMessage,n=Ue(t),a=Object(B.a)().t;return i.a.createElement("div",{className:"d-flex last-message mb-2"},n?i.a.createElement("img",{className:"last-message-author mr-2",src:n,alt:"author img"}):null,t.message?i.a.createElement("div",{className:"message-body color-dark-gray mr-2",dangerouslySetInnerHTML:{__html:t.isSystem?a(t.message.message,t.message.params):t.formatted_message},style:{maxHeight:50,overflow:"hidden"}}):i.a.createElement($.C,{className:"icon-size-20 color-gray"}))}function Jn(e){var t=e.tags;return i.a.createElement(i.a.Fragment,null,t.map((function(e){return i.a.createElement("div",{key:e.id,className:"tag-item mr-1 my-1"},e.name)})))}Yn.propTypes={lastMessage:s.a.instanceOf(R.h).isRequired,clientName:s.a.string},Jn.propTypes={tags:s.a.array.isRequired};var Xn=Jn;function Zn(e){var t=e.department;return i.a.createElement("div",{className:"d-inline-block tag-item department mr-1 my-1"},t.name)}Zn.propTypes={department:s.a.object.isRequired};var ea=Zn,ta=n("oI+J"),na=n("Z7gm"),aa=n("X68C"),ra=n("kvuc");function ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return la(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return la(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function oa(e){var t=e.session;return i.a.createElement("p",{className:"mb-2 text-middle"},t.url)}function ca(e){var t=e.sessions,n=ia(Object(r.useState)(!1),2),a=n[0],l=n[1],o=t[0],c=t.slice(1);return i.a.createElement("div",null,i.a.createElement(oa,{key:"session-".concat(o.id),session:o}),c.length?i.a.createElement(ta.a,{className:"session-dropdown",isOpen:a,toggle:function(){return l((function(e){return!e}))}},i.a.createElement(na.a,{className:"session-btn text-middle py-1 px-2",color:"outline-secondary",caret:!0},"+",c.length),i.a.createElement(aa.a,null,c.map((function(e){return i.a.createElement(ra.a,{className:"session-dropdown-item",key:"session-".concat(e.id),toggle:!1},i.a.createElement(oa,{session:e}))})))):null)}oa.propTypes={session:s.a.shape({id:s.a.number.isRequired,url:s.a.string.isRequired}).isRequired},ca.propTypes={sessions:s.a.array.isRequired};var sa=ca;var ua=function(){var e=Object(B.a)().t;return i.a.createElement("div",{className:"d-inline-block tag-item skipped mr-1 my-1"},e("skipped"))};function ma(e){var t=e.client,n=e.tab,a=e.showSessions,r=e.formatMsgTime,l=e.authUserId,o=t.integration.service,c=t.lastMessage,s=t.name,u=t.id,m=t.tags,d=t.department,f=t.has_skipped_live_chat_request,p=t.variables,b=t.active_sessions,h=Object(B.a)().t,g=t.assign_operator_id;return i.a.createElement(dt.a,{to:v.a.chatRoute.getLink(n,u),className:"d-flex chat-list-item-content pb-1"},i.a.createElement("div",{className:"service-icon-block"},i.a.createElement("span",null,gt.b[o]())),i.a.createElement("div",{className:"chat-list-info"},i.a.createElement("div",{className:"d-flex justify-content-between align-items-center w-100 mb-2"},i.a.createElement("div",null,i.a.createElement("span",null,s),g&&l.toString()===g.toString()?i.a.createElement("span",{className:"text-danger ml-2"},h("liveChat.chats-panel.accept-chat")):null),c?i.a.createElement("span",{className:"date color-dark-gray"},r(c.created_at)):null),p&&i.a.createElement(ht,{variables:p,integrationType:o}),i.a.createElement("div",{className:"d-flex messages-container"},c?i.a.createElement(Yn,{lastMessage:c,clientName:s}):null,t.unread_messages_count>0?i.a.createElement("span",{className:"unread-messages-count-wrapper"},i.a.createElement("div",{className:"unread-messages-count"},t.unread_messages_count)):null),i.a.createElement("div",{className:"d-flex flex-wrap"},f?i.a.createElement(ua,null):null,i.a.createElement(ea,{department:d||{name:h("departments.lobby-department")}}),i.a.createElement(Xn,{tags:m})),a&&b.length?i.a.createElement(sa,{sessions:b}):null))}ma.propTypes={client:s.a.instanceOf(p.a).isRequired,tab:jt,showSessions:s.a.bool,formatMsgTime:s.a.func.isRequired,authUserId:s.a.oneOfType([s.a.string,s.a.number]).isRequired};var da=i.a.memo(ma);function fa(e){var t=e.client,n=e.waitingLiveChat,a=e.isActive,r=e.tab,l=e.showSessions,o=e.formatMsgTime,c=e.authUserId;return i.a.createElement("li",{id:t.id,className:H()("chat-list-item pt-3 pb-2 px-3",{active:a,"waiting-for-live-chat":n})},i.a.createElement(da,{client:t,tab:r,showSessions:l,formatMsgTime:o,authUserId:c}))}fa.propTypes={client:s.a.instanceOf(p.a).isRequired,waitingLiveChat:s.a.bool,isActive:s.a.bool,tab:jt,showSessions:s.a.bool,formatMsgTime:s.a.func.isRequired,authUserId:s.a.oneOfType([s.a.string,s.a.number]).isRequired};var pa=Object(m.c)((function(e,t){var n;return{isActive:(null===(n=e.liveChat.get("activeClientId"))||void 0===n?void 0:n.toString())===t.client.id.toString()}}))(fa);function ba(e){var t=e.formatMsgTime,n=e.chatType,a=e.tabRoute,l=Object(r.useRef)(),o=Object(B.a)().t,c=Object(u.a)(),s=Object(m.e)((function(e){return e.liveChat.get("clientsMap")})),d=Object(m.e)((function(e){return e.liveChat.get(n)})),f=d.get("listLoading"),p=d.get("hasMore"),b=d.get("listLoadingError"),v=d.get("ids"),h=Object(m.d)(),g=Object(r.useCallback)((function(){return h(S(n))}),[h,n]);return!v.size&&f?i.a.createElement($n.a,null):b?i.a.createElement(Kn.a,null):i.a.createElement("div",{ref:l,className:"chat-list view small-scrollbar"},i.a.createElement(Ze.a,{pageStart:0,loadMore:function(){!f&&p&&g()},hasMore:p,loader:null,useWindow:!1,getScrollParent:function(){return l.current}},v.size?i.a.createElement("ul",{className:"list-unstyled mb-0"},v.map((function(e){var n=s.get(e);return i.a.createElement(pa,{key:n.id,client:n,tab:a,showSessions:!0,formatMsgTime:t,authUserId:c.id})}))):i.a.createElement("div",{className:"mt-4 text-center text-middle"},o("liveChat.chats-panel.no-conversations"))))}ba.propTypes={formatMsgTime:s.a.func.isRequired,chatType:s.a.string.isRequired,tabRoute:s.a.string.isRequired};var va=ba;function ha(e){var t,n=e.tab,a=M(),r=lt(!1);switch(n){case h.a:t=i.a.createElement(va,{chatType:"allClients",tabRoute:h.a,formatMsgTime:r});break;case h.d:t=i.a.createElement(va,{chatType:"onlineClients",tabRoute:h.d,formatMsgTime:r});break;case h.b:t=i.a.createElement(va,{chatType:"liveClients",tabRoute:h.b,formatMsgTime:r});break;case h.e:t=i.a.createElement(va,{chatType:"skipped",tabRoute:h.e,formatMsgTime:r});break;case h.c:t=i.a.createElement(va,{chatType:"myChats",tabRoute:h.c,formatMsgTime:r});break;default:t=null}return i.a.createElement("div",{className:H()("chat-list-container",{"d-md-block d-none":!!a})},t)}ha.propTypes={tab:jt};var ga=i.a.memo(ha),ya=n("dbgk"),Ea=n("rhny"),Oa=n("ok1R");function ja(e){var t=e.tab,n=Object(B.a)().t,a=Object(m.e)((function(e){return e.liveChat.get("meta")})),l=Object(m.d)();return Object(r.useEffect)((function(){l(C())}),[l]),i.a.createElement("div",{className:"nav-panel-wrapper chat-list-switcher"},i.a.createElement("div",{className:"nav-panel nav-tabs px-3 d-flex"},i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(dt.a,{to:v.a.homeRoute.getLink(h.a),className:H()("nav-link w-100  px-2 small",{active:t===h.a})},n("liveChat.chats-panel.tab-conversations"))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(dt.a,{to:v.a.homeRoute.getLink(h.e),className:H()("nav-link w-100  px-2 small",{active:t===h.e})},n("liveChat.chats-panel.tab-social-queue")," ",!!a.get("skipped")&&i.a.createElement(le.a,{pill:!0},a.get("skipped")))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(dt.a,{to:v.a.homeRoute.getLink(h.d),className:H()("nav-link px-2 small",{active:t===h.d})},n("liveChat.chats-panel.tab-online-visitors")," ",!!a.get("onlineClients")&&i.a.createElement(le.a,{pill:!0,color:"warning"},a.get("onlineClients")))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(dt.a,{to:v.a.homeRoute.getLink(h.b),className:H()("nav-link w-100 px-2 small",{active:t===h.b})},n("liveChat.chats-panel.tab-live-queue")," ",!!a.get("liveClients")&&i.a.createElement(le.a,{pill:!0,color:"danger"},a.get("liveClients")))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(dt.a,{to:v.a.homeRoute.getLink(h.c),className:H()("nav-link px-2 small",{active:t===h.c})},n("liveChat.chats-panel.tab-my-chats")," ",!!a.get("myChats")&&i.a.createElement(le.a,{pill:!0,color:"warning"},a.get("myChats")),!!a.get("myChats")&&i.a.createElement(le.a,{pill:!0,color:"danger ml-2"},a.get("myChatsAssigned"))))))}ja.propTypes={tab:jt};var wa=i.a.memo(ja);function Sa(e){var t=e.afterLeaveChats,n=Object(B.a)().t,a=Object(m.d)();return i.a.createElement(U.a,{color:"danger",onClick:function(){a(Object(Oe.c)(n("liveChat.leave-all-conversations-question"))).then((function(){f.a.call("post","/methods/live-chat/leave-all-conversations").then((function(){t&&t()}))}))},className:"leave-all-chats-btn"},n("liveChat.chat-window.leave-all-chats"))}Sa.propTypes={afterLeaveChats:s.a.func};var Ca=Sa,Na=n("KDeF");function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ka(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ka(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ra(){var e=Object(l.j)(),t=e.chatId,n=e.type||h.a,a=Object(B.a)().t,c=_a(Object(r.useState)(null),2),s=c[0],u=c[1],m=Object(l.h)(),d=Object(r.useCallback)((function(){m.push(v.a.homeRoute.getLink(n))}),[m,n]);return i.a.createElement(o.a,{mainContainerStyle:{background:"var(--chatboard-background)"}},i.a.createElement("div",{className:"livechat-container"},i.a.createElement(L,{tab:n,openedChatId:t,setActiveClientChannel:u},i.a.createElement(i.a.Fragment,null,i.a.createElement(ya.a,null,i.a.createElement(Oa.a,null,i.a.createElement(Ea.a,{xl:10,lg:9,md:8,className:"title-liveChat"},i.a.createElement("span",null,a("liveChat.title")),i.a.createElement("div",{className:"pb-1"},i.a.createElement(dt.b,{to:"/clients/create",className:"d-inline-block"},i.a.createElement($.Eb,{id:"create-client",className:"icon-size-40 color-blue mr-4 table-button-icon"}),i.a.createElement(Na.a,{target:"create-client",placement:"right"},a("liveChat.create-client-link"))),i.a.createElement(dt.b,{to:"/clients/1",className:"d-inline-block"},i.a.createElement(Tt.a,{id:"clients-link",className:"icon-size-40 color-blue mr-4 table-button-icon"}),i.a.createElement(Na.a,{placement:"right",target:"clients-link"},a("liveChat.clients-list-link"))),i.a.createElement(Ca,{afterLeaveChats:d}))),i.a.createElement(Ea.a,{xl:2,lg:3,md:4,className:"d-none d-md-block"},i.a.createElement(Gn,{name:"site_long_notifications",label:a("user.notifications.site-long-notifications-label")}),i.a.createElement(Gn,{name:"site_short_notifications",label:a("user.notifications.site-short-notifications-label")}))),i.a.createElement(Oa.a,null,i.a.createElement(Ea.a,null,i.a.createElement(wa,{tab:n})))),i.a.createElement("div",{className:"live-chat-content-container"},i.a.createElement(ga,{tab:n}),i.a.createElement(Un,{tab:n,activeClientChannel:s}))))))}},Buep:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n("q1tI"),r=n.n(a),i=n("QDav"),l=n("jrRI"),o=n("3OM0"),c=n("TSYQ"),s=n.n(c),u=n("sPdi"),m=n("17x9"),d=n.n(m),f=n("9Koi");function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={control:function(e){return g(g({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function O(e){var t,n,c=e.id,m=e.label,d=e.errors,v=e.loadOptions,h=e.loadValue,g=e.name,y=e.setFieldValue,O=e.setFieldLabel,j=e.value,w=e.className,S=e.placeholder,C=e.isClearable,N=e.selectOptions,_=b(Object(a.useState)(null),2),k=_[0],R=_[1],q=Object(f.a)().t;return Object(a.useEffect)((function(){j&&!k&&h(j).then((function(e){R(e)}))}),[h,k,j]),r.a.createElement(l.a,{className:s()(w)},!1===m?null:r.a.createElement(o.a,{htmlFor:c},m),r.a.createElement(i.a,p({},N,{cacheOptions:!0,defaultOptions:!0,loadOptions:v,onChange:function(e){y(g,e?e.value:null),O&&O(e?e.label:null),R(e)},value:j?k:null,isClearable:C,className:s()({"is-invalid":!!(null===(t=d[g])||void 0===t?void 0:t.length)}),placeholder:S||q("common.default-select-placeholder"),styles:E})),(null===(n=d[g])||void 0===n?void 0:n.length)?r.a.createElement(u.a,{errors:d[g]}):null)}O.defaultProps={isClearable:!0},O.propTypes={errors:d.a.object.isRequired,id:d.a.oneOfType([d.a.string,d.a.number]),value:d.a.oneOfType([d.a.string,d.a.number]),label:d.a.any.isRequired,name:d.a.string.isRequired,setFieldValue:d.a.func.isRequired,setFieldLabel:d.a.func,loadOptions:d.a.func.isRequired,loadValue:d.a.func.isRequired,className:d.a.string,placeholder:d.a.string,isClearable:d.a.bool,selectOptions:d.a.object}},F6sc:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("MwQV"),r=n("83d4");function i(e){return new Promise((function(t){var n={q:e};a.a.call("get","/methods/user/search",n).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id,user:r.d.instantiate(e)}})))}))}))}},Gv9V:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("ma3e");function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e){var t=e.url,n=Object(a.useRef)(),i=c(Object(a.useState)(!1),2),l=i[0],s=i[1];Object(a.useEffect)((function(){var e=n.current;s(!e.paused),e.onended=function(){s(!1)}}),[]);return r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){var e=n.current;e.paused?e.play():(e.pause(),e.currentTime=0),s(!e.paused)},className:"btn btn-outline-dark"},l?r.a.createElement(o.ob,null):r.a.createElement(o.U,null)),r.a.createElement("audio",{ref:n,src:t,controls:!0,className:"d-none"}))}u.propTypes={url:l.a.string.isRequired}},HayB:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return w}));var a,r=n("q1tI"),i=n.n(r),l=n("17x9"),o=n.n(l),c=n("XRgj"),s=n("ok1R"),u=n("rhny"),m=n("xbK4"),d=n("TSYQ"),f=n.n(d),p=n("6rqU"),b=n("9Koi"),v=n("BAJy"),h=n("3OM0"),g=n("ma3e");function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=(O(a={},c.i,(function(){return i.a.createElement(g.E,{className:"service-icon color-blue3 icon-size-40"})})),O(a,c.b,(function(){return i.a.createElement(g.B,{className:"service-icon facebook-icon icon-size-40 color-facebook"})})),O(a,c.c,(function(){return i.a.createElement("img",{className:"service-img sms-chat",src:"/img/services/sms-chat.png",alt:"sms-chat"})})),O(a,c.d,(function(){return i.a.createElement(g.Hb,{className:"service-icon whatsapp-icon icon-size-40 color-whatsapp"})})),O(a,c.e,(function(){return i.a.createElement(g.tb,{className:"service-icon telegram-icon icon-size-40 color-telegram"})})),O(a,c.h,(function(){return i.a.createElement(g.Gb,{className:"service-icon viber-icon icon-size-40 color-viber"})})),O(a,c.g,(function(){return i.a.createElement("span",{className:"d-flex justify-content-center position-relative service-img-wrapper"},i.a.createElement("img",{className:"service-img twilio",src:"/img/services/twilio-red.svg",alt:"twilio-whatsapp"}),i.a.createElement("div",{className:"position-absolute twilio-whatsapp rounded-circle d-flex justify-content-center align-items-center"},i.a.createElement(g.Hb,{className:"icon-size-20 color-whatsapp sm-whatsapp"})))})),O(a,c.f,(function(){return i.a.createElement("img",{className:"service-img twilio",src:"/img/services/twilio-red.svg",alt:"sms-twilio"})})),O(a,c.a,(function(){return i.a.createElement("img",{className:"service-img twilio",src:"/img/services/dotgo.svg",alt:"sms-twilio"})})),O(a,c.j,(function(){return i.a.createElement(g.Hb,{className:"service-icon whatsapp-icon icon-size-40 color-whatsapp"})})),a);function w(e){var t=e.validate,n=e.isEdit,a=e.handleChange,l=e.values,o=e.allowedSteps,d=e.changeStep,E=Object(b.a)().t,O=y(Object(r.useState)([{label:E("integrations.service.".concat(c.i)),value:c.i,icon:j[c.i],iconBtn:function(){return i.a.createElement(g.E,{className:"icon-size-25"})}},{label:E("integrations.service.".concat(c.b)),value:c.b,icon:j[c.b],iconBtn:function(){return i.a.createElement(g.B,{className:"icon-size-25"})}},{label:E("integrations.service.".concat(c.c)),value:c.c,icon:j[c.c],iconBtn:function(){return i.a.createElement("img",{className:"service-img sms-chat-btn",src:"/img/services/sms-chat.png",alt:"sms-chat"})}},{label:E("integrations.service.".concat(c.d)),value:c.d,icon:j[c.d],iconBtn:function(){return i.a.createElement(g.Hb,{className:"icon-size-25"})}},{label:E("integrations.service.".concat(c.e)),value:c.e,icon:j[c.e],iconBtn:function(){return i.a.createElement(g.tb,{className:"icon-size-25"})}},{label:E("integrations.service.".concat(c.h)),value:c.h,icon:j[c.h],iconBtn:function(){return i.a.createElement(g.Gb,{className:"icon-size-25"})}},{label:E("integrations.service.".concat(c.g)),value:c.g,icon:j[c.g],iconBtn:function(){return i.a.createElement("span",{className:"position-relative service-img-wrapper"},i.a.createElement("img",{className:"service-img twilio-btn",src:"/img/services/twilio-white.svg",alt:"twilio-whatsapp"}),i.a.createElement(g.Hb,{className:"pl-2 icon-size-20 color-white"}))}},{label:E("integrations.service.".concat(c.f)),value:c.f,icon:j[c.f],iconBtn:function(){return i.a.createElement("img",{className:"service-img twilio-btn",src:"/img/services/twilio-white.svg",alt:"sms-twilio"})}},{label:E("integrations.service.".concat(c.a)),value:c.a,icon:j[c.a],iconBtn:function(){return i.a.createElement("img",{className:"service-img twilio-btn",src:"/img/services/dotgo.svg",alt:"sms-twilio"})}},{label:E("integrations.service.".concat(c.j)),value:c.j,icon:j[c.j],iconBtn:function(){return i.a.createElement(g.Hb,{className:"icon-size-25"})}}]),1)[0],w=O.findIndex((function(e){return+e.value==+l.service})),S=-1===w?null:O[w];return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{className:"my-4"},O.map((function(e){var t=+e.value==+l.service;return i.a.createElement(u.a,{xl:4,md:4,sm:6,key:e.value,className:f()("my-3 px-sm-3 px-0",{active:t})},i.a.createElement("div",{className:"rounded d-flex align-items-center p-sm-3 py-3 px-2"},i.a.createElement("div",{className:"position-relative service-img-wrapper d-flex justify-content-center mr-1"},e.icon()),i.a.createElement(v.a,{className:"ml-2 ",value:e.value,onChange:n?null:a,checked:t,type:"radio",id:"service-".concat(e.value),name:"service",disabled:n}),i.a.createElement(h.a,{className:"mb-0",htmlFor:"service-".concat(e.value)},e.label)))}))),i.a.createElement(p.a,{validate:t,fields:["service"],allowedSteps:o,nextStep:m.a,changeStep:d,content:function(){return i.a.createElement(i.a.Fragment,null,E("integrations.form.next-btn.step-service",{serviceName:S.label}),i.a.createElement("span",{className:"ml-2 pl-1"},null==S?void 0:S.iconBtn()))}}))}w.propTypes={isEdit:o.a.bool,validate:o.a.func.isRequired,handleChange:o.a.func.isRequired,changeStep:o.a.func.isRequired,values:o.a.object.isRequired,allowedSteps:o.a.array.isRequired}},"K+m7":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/chat-bots/search",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},LEWT:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return y}));var a=n("fOp/"),r=n("Llg8"),i=n("q1tI"),l=n.n(i),o=n("17x9"),c=n.n(o),s=n("DCcX"),u=n("CaDr"),m=n("OBzv"),d=n("sOKU");function f(e){var t=e.text,n=e.onConfirm,a=e.onReject;return l.a.createElement(s.a,{isOpen:!0,toggle:a,className:"confirm-modal"},l.a.createElement(u.a,null,t),l.a.createElement(m.a,null,l.a.createElement(d.a,{color:"primary",onClick:n},"Confirm")," ",l.a.createElement(d.a,{color:"secondary",onClick:a},"Cancel")))}f.propTypes={text:c.a.string.isRequired,onConfirm:c.a.func.isRequired,onReject:c.a.func.isRequired};var p=f,b=n("mNz5"),v=n.n(b),h=function(e){return{type:a.a.ADD,payload:e}},g=function(e){return{type:a.a.REMOVE,payload:e}},y=function(e){return function(t){return new Promise((function(n,a){var i=v()(),o=new r.a({id:i,data:{text:e,onConfirm:n,onReject:a},render:function(){return l.a.createElement(p,{text:e,onConfirm:function(){n(),t(g(i))},onReject:function(){a(),t(g(i))}})}});t(h(o))}))}}},LdVD:function(e,t,n){"use strict";var a=n("MwQV");t.a=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return new Promise((function(n){a.a.call("get","/methods/departments/search",{q:t}).data((function(t){var a=t.map((function(e){return{label:e.name,value:e.id}}));n(e.concat(a))}))}))}}()(e)}},Llg8:function(e,t,n){"use strict";var a=n("Mpt7");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,e);var t,n,a,r=c(s);function s(){return i(this,s),r.apply(this,arguments)}return t=s,a=[{key:"instantiate",value:function(e){return new s(e)}}],(n=null)&&l(t.prototype,n),a&&l(t,a),s}(Object(a.d)({id:null,render:function(){return null}}));t.a=m},Q59H:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("9Koi"),c=n("BLzl"),s=n("/kxI"),u=l.a.shape({products_catalog_id:l.a.number,internal_product_id:l.a.string,image_link:l.a.string,link:l.a.string,title:l.a.string,description:l.a.string,price:l.a.string}),m=l.a.shape({quantity:l.a.number.isRequired,item_price:l.a.number.isRequired,catalog_id:l.a.number,internal_product_id:l.a.string.isRequired,product:u.isRequired});function d(e){var t=e.itemPrice,n=e.quantity,a=e.currency,i=Object(o.a)().t;return r.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},r.a.createElement("div",{className:"mr-4"},r.a.createElement("div",{className:"quantity"},r.a.createElement("b",{className:"quantity-label"},i("shop.order-item.quantity")," "),r.a.createElement("b",null,n))),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",null,r.a.createElement("b",null,"Unknown product")),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",{className:"mr-1"},i("shop.order-item.item-price")),r.a.createElement("span",null,t,a)))))}function f(e){var t=e.itemPrice,n=e.quantity,a=e.product,i=e.currency,l=Object(o.a)().t;return r.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},r.a.createElement("div",{className:"mr-4"},r.a.createElement("a",{href:a.link,target:"_blank",className:"product-img-link"},r.a.createElement("img",{src:a.image_link,alt:a.title,className:"img-responsive product-img"})),r.a.createElement("div",{className:"quantity"},r.a.createElement("b",{className:"quantity-label"},l("shop.order-item.quantity")," "),r.a.createElement("b",null,n))),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",null,r.a.createElement("b",null,a.title)),r.a.createElement("div",null,a.description),r.a.createElement("div",null,r.a.createElement("div",{className:"mr-2"},r.a.createElement("b",{className:"mr-2"},l("shop.order-item.price")),r.a.createElement("span",null,a.price)),r.a.createElement("div",null,r.a.createElement("b",{className:"mr-1"},l("shop.order-item.item-price")),r.a.createElement("span",null,t,i)))))}function p(e){var t=e.itemPrice,n=e.quantity,a=e.product,i=e.currency;return a?r.a.createElement(f,{quantity:n,itemPrice:t,currency:i,product:a}):r.a.createElement(d,{itemPrice:t,currency:i,quantity:n})}function b(e){var t=e.order,n=Object(o.a)().t;return r.a.createElement(c.a,{className:"m-1 mb-2 order-preview"},r.a.createElement(s.a,null,r.a.createElement("div",{className:"mb-3"},r.a.createElement("h5",null,n("shop.order.preview.ordered-title")),r.a.createElement("div",null,t.accepted.products.map((function(e){return r.a.createElement(p,{key:"".concat(e.quantity,"-").concat(e.internal_product_id),quantity:e.quantity,itemPrice:e.item_price,product:e.product,currency:t.currency})})))),t.productsNotEnough&&t.productsNotEnough.length?r.a.createElement("div",{className:"text-danger mb-3"},r.a.createElement("h2",null,n("shop.order.preview.failed-to-order-title")),r.a.createElement("div",null,t.productsNotEnough.map((function(e){return r.a.createElement(p,{key:"".concat(e.quantity,"-").concat(e.internal_product_id),quantity:e.quantity,itemPrice:e.item_price,product:e.product,currency:t.currency})})))):null,r.a.createElement("h5",{className:"d-flex justify-content-between"},r.a.createElement("span",null,n("shop.order.preview.total")),r.a.createElement("span",null,t.price," ",t.currency))))}d.propTypes={quantity:l.a.number.isRequired,itemPrice:l.a.number.isRequired,currency:l.a.string.isRequired},f.propTypes={product:u.isRequired,quantity:l.a.number.isRequired,itemPrice:l.a.number.isRequired,currency:l.a.string.isRequired},p.propTypes={product:u,quantity:l.a.number.isRequired,itemPrice:l.a.number.isRequired,currency:l.a.string.isRequired},b.propTypes={order:l.a.shape({currency:l.a.string.isRequired,price:l.a.string.isRequired,accepted:l.a.shape({sum:l.a.number.isRequired,products:l.a.arrayOf(m)}),productsNotEnough:l.a.arrayOf(m)})},t.a=b},T7vI:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("9Koi"),c=n("zEWu"),s=n("mDHu"),u=n("TSYQ"),m=n.n(u);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var b=["ip","geo","first_name","last_name","phone_number","email"];function v(e){var t=e.title,n=e.children;return r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"table-title"},t)),r.a.createElement("td",null,n))}function h(e){var t=e.data,n=e.varClassName,i=Object(o.a)().t,l=f(Object(a.useState)(!1),2),u=l[0],p=l[1],h=[],g=[];for(var y in t)if(t.hasOwnProperty(y)&&null!==t[y]){var E={name:y,value:t[y]};b.includes(y)?h.push(E):g.push(E)}var O=function(e){return e.map((function(e){var t,n=(t=e.value,Object(c.a)(t)?r.a.createElement(s.a,{geo:t}):Array.isArray(t)?t.join(", "):"object"===d(t)?JSON.stringify(t):t);return n?r.a.createElement(v,{key:e.name,title:e.name},n):null}))},j=g.length;return r.a.createElement("table",{className:m()(n)},r.a.createElement("tbody",null,O(h),j&&!u?r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("button",{type:"button",className:"btn btn-link no-shadow p-0 color-blue text-middle text-dec-none",onClick:function(){return p(!0)}},i("tables.json-show-more",{count:j})))):null,j&&u?O(g):null))}v.propTypes={title:l.a.string.isRequired,children:l.a.any},h.propTypes={data:l.a.object.isRequired,varClassName:l.a.string},t.a=h},Z04g:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("sOKU"),c=n("nsn4"),s=n("BLzl"),u=n("/kxI"),m=n("TSYQ"),d=n.n(m);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function b(e){var t=e.items,n=e.className,i=f(Object(a.useState)(0),2),l=i[0],m=i[1];return r.a.createElement("div",{className:d()("accordion",n)},t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(o.a,{className:"btn-notification",color:"",onClick:function(){return m(l===t?null:t)}},e.renderButton()),r.a.createElement(c.a,{isOpen:l===t},r.a.createElement(s.a,{className:"accordion-card"},r.a.createElement(u.a,{className:"border-0"},e.renderContent()))))})))}b.propTypes={items:l.a.arrayOf(l.a.shape({renderButton:l.a.func.isRequired,renderContent:l.a.func.isRequired})).isRequired,className:l.a.string}},clgt:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("XRgj");function r(e){return[a.i,a.b,a.g,a.f,a.a,a.j].includes(+e)}},dbgk:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i);function o(e){var t=e.children;return r.a.createElement("h1",{className:"title-main mb-3"},t)}o.propTypes={children:l.a.any.isRequired}},gQBd:function(e,t,n){"use strict";var a=n("Vjiq");window.io=n("gFX4");var r=new a.a({broadcaster:"socket.io",host:window.location.origin});t.a=r},gmZo:function(e,t,n){"use strict";n("iYuL");var a=n("f0Wu");a.locale(window.locale),t.a=a},mDHu:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i);function o(e){var t=e.geo,n=[];return t.city&&n.push(t.city),t.country&&n.push(t.country),r.a.createElement("div",{className:"d-flex align-items-center"},t.iso?r.a.createElement("img",{className:"flag mr-2",src:"/img/flags/".concat(t.iso.toLowerCase(),".gif"),alt:t.iso}):null,r.a.createElement("div",{className:"location"},n.join(", ")))}o.propTypes={geo:l.a.object.isRequired}},t8fN:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("R6dn"),c=n.n(o);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m={audio:!0,video:!1};var d=n("TSYQ"),f=n.n(d),p=n("ma3e");function b(e){var t=e.setAudioMessage,n=e.disabled,i=e.className,l=function(e){var t=s(Object(a.useState)(!1),2),n=t[0],r=t[1],i=s(Object(a.useState)(null),2),l=i[0],o=i[1],u=s(Object(a.useState)(!1),2),d=u[0],f=u[1],p=s(Object(a.useState)(!1),2),b=p[0],v=p[1],h=Object(a.useCallback)((function(){navigator.getUserMedia(m,(function(t){r(t);var n=new c.a(t);n.mimeType="audio/wav",o(n),n.ondataavailable=function(t){e(t)},n.start(36e5),f(!0),v(!1)}),(function(e){console.error(e),alert("You have to grant privileges to access your microphone to send audio messages.")}))}),[e]),g=Object(a.useCallback)((function(){b?l.resume():l.pause(),v(!b)}),[b,l]),y=Object(a.useCallback)((function(){l.resume(),l.stop(),f(!1),v(!1),o(null),n.getAudioTracks().forEach((function(e){e.stop()})),r(null)}),[l,n]);return{active:!0,isRecording:d,isPaused:b,togglePause:g,startRecording:h,stopRecording:y}}(t),o=l.isRecording,u=l.isPaused,d=l.startRecording,b=l.stopRecording,v=l.togglePause,h=null;return n||(h=o?b:d),r.a.createElement("div",{className:f()("d-flex",{"is-recording":o,"is-paused":u},i)},r.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:h,disabled:n},o?r.a.createElement(p.pb,{className:"icon-size-20 recording-stop-icon mr-1"}):r.a.createElement(p.O,{className:"icon-size-20 color-gray mr-1"})),o?r.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:n?null:v,disabled:n},u?r.a.createElement(p.V,{className:"icon-size-20 recording-play-icon color-gray mr-1"}):r.a.createElement(p.S,{className:"icon-size-20 recording-pause-icon color-gray mr-1"})):null)}b.propTypes={setAudioMessage:l.a.func.isRequired,disabled:l.a.bool,className:l.a.string}},wDsf:function(e,t,n){"use strict";var a=n("q1tI");t.a=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}},xbK4:function(e,t,n){"use strict";n.d(t,"c",(function(){return be})),n.d(t,"a",(function(){return ve})),n.d(t,"b",(function(){return he})),n.d(t,"d",(function(){return ge})),n.d(t,"e",(function(){return ye})),n.d(t,"f",(function(){return Oe}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("nc57"),c=n("TSYQ"),s=n.n(c),u=n("9Koi");function m(e){var t=e.values,n=e.validate,a=e.allowedScreens,i=e.step,l=e.showSetUpScreen,o=e.onChange,c=e.errors,m=Object(u.a)().t,d=[{label:m("integrations.form.step.".concat(be)),value:be,fields:["service"],dependsOn:[]},{label:m("integrations.form.step.".concat(ve)),value:ve,fields:["name","prefix","company_chat_bot_id","locale"],dependsOn:["service"]},{label:m("integrations.form.step.".concat(he)),value:he,nFields:["service","name","prefix","company_chat_bot_id","locale"],dependsOn:["service","name","prefix","company_chat_bot_id","locale"]},{label:m("integrations.form.step.".concat(ge)),value:ge,dependsOn:"all"},{label:m("integrations.form.step.".concat(ye)),value:ye,dependsOn:"all"}];return r.a.createElement("div",{className:"navigation-bar-wrapper"},r.a.createElement("div",{className:"navigation-bar w-100 d-flex"},d.map((function(e){if(e.value===ge&&!l)return null;var u,m=a.includes(e.value),d=Object.entries(c);u=e.fields?d.filter((function(t){return e.fields.includes(t[0])&&t[1].length})).length:!!e.nFields&&d.filter((function(t){return!e.nFields.includes(t[0])&&t[1].length})).length;return r.a.createElement("button",{key:e.value,type:"button",onClick:function(){n("all"===e.dependsOn?Object.keys(t):e.dependsOn).then((function(){o(e.value)}))},className:s()("navigation-item rounded-top w-100 py-2 px-3",{active:e.value===i,error:u}),disabled:!m},e.label)}))))}m.propTypes={values:l.a.object.isRequired,validate:l.a.func.isRequired,errors:l.a.object,allowedScreens:l.a.array.isRequired,step:l.a.string,onChange:l.a.func.isRequired,showSetUpScreen:l.a.bool};var d=n("HayB"),f=n("6rqU"),p=n("6Rhw"),b=n("Buep"),v=n("K+m7"),h=n("MwQV");function g(e){return new Promise((function(t){h.a.call("get","/methods/chat-bots/".concat(e)).data((function(e){t({label:e.name,value:e.id})}))}))}var y=n("9MIN");function E(){return new Promise((function(e){h.a.call("get","/methods/language").data((function(t){e(Object(y.a)(t))}))}))}function O(e){return new Promise((function(t){h.a.call("get","/methods/language/".concat(e)).data((function(e){t(Object(y.a)([e])[0])}))}))}var j=n("ok1R"),w=n("rhny"),S=n("CXWj");function C(e){var t=e.setFieldValue,n=e.handleChange,a=e.handleBlur,i=e.values,l=e.errors,o=e.allowedSteps,c=e.changeStep,s=e.validate,m=Object(u.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(w.a,{lg:6},r.a.createElement(p.a,{className:"limiter",name:"name",label:m("integrations.form.chatbot-screen.name-label"),placeholder:m("integrations.form.chatbot-screen.name-placeholder"),onChange:n,onBlur:a,value:i.name||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"prefix",label:m("integrations.form.chatbot-screen.prefix-label"),placeholder:m("integrations.form.chatbot-screen.prefix-placeholder"),onChange:n,onBlur:a,value:i.prefix||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"max_live_chat_inactivity_duration",label:m("integrations.form.chatbot-screen.max-inactivity-label"),placeholder:m("integrations.form.chatbot-screen.max-inactivity-placeholder"),value:i.max_live_chat_inactivity_duration,onChange:n,errors:l})),r.a.createElement(w.a,{lg:6},r.a.createElement(b.a,{className:"limiter",name:"company_chat_bot_id",label:m("integrations.form.chatbot-screen.chat-label"),value:i.company_chat_bot_id,setFieldValue:t,errors:l,loadOptions:v.a,loadValue:g}),r.a.createElement(b.a,{className:"limiter",name:"locale",label:m("integrations.form.chatbot-screen.language-label"),loadOptions:E,loadValue:O,value:i.locale,setFieldValue:t,errors:l}),r.a.createElement(S.a,{id:"show_messages_only_in_live_chat_mode",className:"limiter",name:"show_messages_only_in_live_chat_mode",label:m("integrations.form.chatbot-screen.show-messages-only-in-live-chat-mode-label"),value:i.show_messages_only_in_live_chat_mode,setFieldValue:t}),r.a.createElement(S.a,{id:"autostart_on_chat_page",className:"limiter",name:"autostart_on_chat_page",label:m("integrations.form.chatbot-screen.autostart-on-chat-page-label"),value:i.autostart_on_chat_page,setFieldValue:t}))),r.a.createElement(f.a,{validate:s,fields:["service","name","prefix","company_chat_bot_id","locale","max_live_chat_inactivity_duration"],changeStep:c,allowedSteps:o,nextStep:he,content:function(){return m("integrations.form.next-btn.step-chatbot")}}))}C.propTypes={allowedSteps:l.a.array.isRequired,changeStep:l.a.func.isRequired,validate:l.a.func.isRequired,errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,setFieldValue:l.a.func.isRequired,values:l.a.object.isRequired};var N=n("XRgj");function _(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function k(e,t){var n=e.service,a=_(e,["service"]);switch(+n){case N.i:return a.config_id&&!t.config_id;case N.j:return a.token&&a.app_secret&&a.phone_number_id&&!t.token&&!t.app_secret&&!t.phone_number_id;case N.b:return a.token&&a.app_secret&&!t.token&&!t.app_secret;case N.e:case N.c:case N.d:case N.h:return a.token&&!t.token;case N.g:case N.f:return a.token&&a.sid&&!t.token&&!t.sid;case N.a:return a.client_id&&a.client_secret&&!t.client_id&&!t.client_secret;default:return!1}}var R=n("sOKU"),q=n("aLZG");function x(e){var t=e.handleSubmit,n=e.video,a=e.values,i=e.errors,l=e.children,o=Object(u.a)().t;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{color:"dark",fade:!1},o("integrations.form.msg-instead-of-video"))):null,l,k(a,i)?r.a.createElement(R.a,{className:"pt-2 px-4 my-4",type:"submit",color:"primary",onClick:t},o("integrations.form.next-btn.step-configure")):null)}function I(){return new Promise((function(e){h.a.call("get","/methods/chat-box-configs/search").data((function(t){e(t.map((function(e){return{label:e.name,value:e.id}})))}))}))}function T(e){return new Promise((function(t){h.a.call("get","/methods/chat-box-configs/".concat(e)).data((function(e){t({label:e.name,value:e.id})}))}))}function A(e){var t=e.video,n=e.handleSubmitClick,a=e.setFieldValue,i=e.values,l=e.errors,o=Object(u.a)().t;return r.a.createElement(x,{video:t,handleSubmit:n(["config_id"]),values:i,errors:l},r.a.createElement(b.a,{className:"limiter",name:"config_id",label:o("integrations.form.configure-screen.config-label"),loadOptions:I,loadValue:T,value:i.config_id||"",setFieldValue:a,errors:l}))}function M(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,l=e.values,o=e.errors,c=Object(u.a)().t;return r.a.createElement(x,{handleSubmit:n(["token","app_secret"]),errors:o,values:l,video:t},r.a.createElement(p.a,{className:"limiter",name:"token",label:c("integrations.form.configure-screen.token-label"),placeholder:c("integrations.form.configure-screen.token-placeholder"),onChange:a,onBlur:i,value:l.token||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"app_secret",label:c("integrations.form.configure-screen.app-secret-label"),placeholder:c("integrations.form.configure-screen.app-secret-placeholder"),onChange:a,onBlur:i,value:l.app_secret||"",errors:o}))}function P(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,l=e.values,o=e.errors,c=n(["config_id"]),s=Object(u.a)().t;return r.a.createElement(x,{video:t,values:l,errors:o,handleSubmit:c},r.a.createElement(p.a,{className:"limiter",name:"token",label:s("integrations.form.configure-screen.token-label"),placeholder:s("integrations.form.configure-screen.token-placeholder"),value:l.token||"",onChange:a,onBlur:i,errors:o}))}function D(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,l=e.values,o=e.errors,c=n(["sid","token"]),s=Object(u.a)().t;return r.a.createElement(x,{handleSubmit:c,errors:o,values:l,video:t},r.a.createElement(p.a,{className:"limiter",name:"sid",label:s("integrations.form.configure-screen.sid-label"),placeholder:s("integrations.form.configure-screen.sid-placeholder"),onChange:a,onBlur:i,value:l.sid||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"token",label:s("integrations.form.configure-screen.token-label"),placeholder:s("integrations.form.configure-screen.token-placeholder"),onChange:a,onBlur:i,value:l.token||"",errors:o}))}function F(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,l=e.values,o=e.errors,c=n(["bot_id","client_id","client_secret"]),s=Object(u.a)().t;return r.a.createElement(x,{handleSubmit:c,errors:o,values:l,video:t},r.a.createElement(p.a,{className:"limiter",name:"client_id",label:s("integrations.form.configure-screen.client_id-label"),placeholder:s("integrations.form.configure-screen.client_id-placeholder"),onChange:a,onBlur:i,value:l.client_id||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"client_secret",label:s("integrations.form.configure-screen.client_secret-label"),placeholder:s("integrations.form.configure-screen.client_secret-placeholder"),onChange:a,onBlur:i,value:l.client_secret||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"bot_id",label:s("integrations.form.configure-screen.bot_id-label"),placeholder:s("integrations.form.configure-screen.bot_id-placeholder"),onChange:a,onBlur:i,value:l.bot_id||"",errors:o}))}function L(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,l=e.values,o=e.errors,c=Object(u.a)().t;return r.a.createElement(x,{handleSubmit:n(["token","app_secret","phone_number_id"]),errors:o,values:l,video:t},r.a.createElement(p.a,{className:"limiter",name:"token",label:c("integrations.form.configure-screen.token-label"),placeholder:c("integrations.form.configure-screen.token-placeholder"),onChange:a,onBlur:i,value:l.token||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"app_secret",label:c("integrations.form.configure-screen.app-secret-label"),placeholder:c("integrations.form.configure-screen.app-secret-placeholder"),onChange:a,onBlur:i,value:l.app_secret||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"phone_number_id",label:c("integrations.form.configure-screen.phone-number-id-label"),placeholder:c("integrations.form.configure-screen.phone-number-id-placeholder"),onChange:a,onBlur:i,value:l.phone_number_id||"",errors:o}))}function B(e){var t=e.setFieldValue,n=e.handleChange,a=e.handleBlur,i=e.values,l=e.errors,o=e.validate,c=e.handleSubmit,s=function(e){return function(t){if(t.preventDefault(),o){var n=e.concat(["service","name","prefix","company_chat_bot_id","locale","config_id"]);o(n).then((function(){c()}))}else c()}};switch(+i.service){case N.i:return r.a.createElement(A,{video:"bx79vJP4zWI",setFieldValue:t,values:i,errors:l,handleSubmitClick:s});case N.b:return r.a.createElement(M,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s});case N.e:return r.a.createElement(P,{video:"b9-cHk-7N8k",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s});case N.c:return r.a.createElement(P,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s});case N.d:return r.a.createElement(P,{video:"b9-cHk-7N8k",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s});case N.h:return r.a.createElement(P,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s});case N.g:case N.f:return r.a.createElement(D,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s});case N.a:return r.a.createElement(F,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s});case N.j:return r.a.createElement(L,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:l,handleSubmitClick:s})}}x.propTypes={children:l.a.any.isRequired,errors:l.a.object.isRequired,handleSubmit:l.a.func.isRequired,values:l.a.object.isRequired,video:l.a.string},A.propTypes={video:l.a.string,errors:l.a.object.isRequired,handleSubmitClick:l.a.func.isRequired,setFieldValue:l.a.func.isRequired,values:l.a.object.isRequired},M.propTypes={video:l.a.string,errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,handleSubmitClick:l.a.func.isRequired,values:l.a.object.isRequired},P.propTypes={video:l.a.string,errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,handleSubmitClick:l.a.func.isRequired,values:l.a.object.isRequired},D.propTypes={video:l.a.string,errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,handleSubmitClick:l.a.func.isRequired,values:l.a.object.isRequired},F.propTypes={video:l.a.string,errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,handleSubmitClick:l.a.func.isRequired,values:l.a.object.isRequired},L.propTypes={video:l.a.string,errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,handleSubmitClick:l.a.func.isRequired,values:l.a.object.isRequired},B.propTypes={errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,setFieldValue:l.a.func.isRequired,validate:l.a.func.isRequired,handleSubmit:l.a.func.isRequired,values:l.a.object.isRequired};var V=n("h4JF");function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function W(e){var t=e.video,n=e.integrationId,i=e.renderContent,l=z(Object(a.useState)(null),2),o=l[0],c=l[1],s=Object(u.a)().t;return Object(a.useEffect)((function(){h.a.call("get","/methods/integrations/".concat(n,"/setup-data")).data((function(e){c(e)}))}),[n]),o?r.a.createElement("div",{className:"video-player-block"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{color:"dark",fade:!1},s("integrations.form.msg-instead-of-video"))):null,i(o)):r.a.createElement(V.a,null)}function H(e){var t=e.values,n=Object(u.a)().t;return r.a.createElement(W,{integrationId:t.id,video:"vlDzYIIOYmM",renderContent:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-main pt-4"},n("integrations.form.setup-screen.copy-html-text")),r.a.createElement("p",{className:"copy-html-text p-3 rounded"},e.script))}})}function Q(e){var t=e.values,n=Object(u.a)().t;return r.a.createElement(W,{integrationId:t.id,video:"vlDzYIIOYmM",renderContent:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"limiter",label:n("integrations.form.setup-screen.callback-label"),name:"callbackUrl",value:e.callbackUrl,readOnly:1}),r.a.createElement(p.a,{className:"limiter",label:n("integrations.form.setup-screen.confirmation-token-label"),name:"token",value:e.verification,readOnly:1}))}})}function G(e){var t=e.values,n=e.video,a=Object(u.a)().t;return r.a.createElement(W,{integrationId:t.id,video:n,renderContent:function(e){return r.a.createElement(p.a,{className:"limiter",label:a("integrations.form.setup-screen.callback-label"),name:"callbackUrl",value:e.callbackUrl,readOnly:1})}})}function $(e){var t=e.values,n=e.changeStep,a=e.allowedSteps,i=Object(u.a)().t,l=null;switch(+t.service){case N.i:l=r.a.createElement(H,{values:t});break;case N.b:case N.j:l=r.a.createElement(Q,{values:t});break;case N.g:l=r.a.createElement(G,{video:"5kUu97Vkwj4",values:t});break;case N.f:case N.a:l=r.a.createElement(G,{video:"10byeZV5jcc",values:t})}return r.a.createElement(r.a.Fragment,null,l,r.a.createElement(f.a,{changeStep:n,allowedSteps:a,nextStep:ye,content:function(){return i("integrations.form.next-btn.step-setup")}}))}W.propTypes={integrationId:l.a.number.isRequired,renderContent:l.a.func.isRequired,video:l.a.string},H.propTypes={values:l.a.object.isRequired},Q.propTypes={values:l.a.object.isRequired},G.propTypes={video:l.a.string,values:l.a.object.isRequired},$.propTypes={allowedSteps:l.a.array.isRequired,changeStep:l.a.func.isRequired,values:l.a.object.isRequired};var K=n("55Ip"),Y=n("3OM0"),J=n("76xo"),X=n("jrRI"),Z=n("L3zb");function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ne(e){var t=e.values,n=Object(u.a)().t,a=ee(Object(J.a)(),2),i=a[0],l=a[1];return r.a.createElement("div",null,r.a.createElement("p",{className:"color-blue title-middle mt-4 pb-2"},n("integrations.form.success-screen.title")),r.a.createElement("p",{className:"text-main mb-5"},n("integrations.form.success-screen.text")),r.a.createElement("p",{className:"text-main mb-5"},r.a.createElement(X.a,null,r.a.createElement(Y.a,null,n("integrations.form.success-screen.api-token-label")),r.a.createElement(Z.a,{id:"api-token",type:"text",value:t.apiToken,readOnly:!0})),r.a.createElement("div",{className:"text-right"},i?r.a.createElement("span",null,n("integrations.form.success-screen.copied-message")):null,r.a.createElement(R.a,{onClick:l},n("integrations.form.success-screen.copy-btn")))),r.a.createElement(K.a,{to:"/integrations",className:"pt-2 px-4 mt-3 mb-sm-4 mb-5 btn btn-success"},n("integrations.form.next-btn.step-success")))}ne.propTypes={values:l.a.object.isRequired};var ae=ne;function re(e){var t=e.isEdit,n=e.handleChange,a=e.handleBlur,i=e.validate,l=e.values,o=e.errors,c=e.isSubmitting,s=e.setFieldValue,u=e.allowedScreens,m=e.changeStep,f=e.handleSubmit;switch(l.step){case be:return r.a.createElement(d.a,{isEdit:t,handleChange:n,values:l,allowedSteps:u,changeStep:m,validate:i});case ve:return r.a.createElement(C,{values:l,errors:o,setFieldValue:s,handleChange:n,handleBlur:a,allowedSteps:u,changeStep:m,validate:i});case he:return r.a.createElement(B,{values:l,errors:o,setFieldValue:s,handleChange:n,handleBlur:a,validate:i,handleSubmit:f});case ge:return r.a.createElement($,{values:l,allowedSteps:u,changeStep:m});case ye:return r.a.createElement(ae,{handleChange:n,handleBlur:a,values:l,errors:o,isSubmitting:c,setFieldValue:s,allowedSteps:u})}}re.propTypes={isEdit:l.a.bool,errors:l.a.object.isRequired,handleBlur:l.a.func.isRequired,handleChange:l.a.func.isRequired,isSubmitting:l.a.bool,setFieldValue:l.a.func.isRequired,validate:l.a.func.isRequired,values:l.a.object.isRequired,allowedScreens:l.a.array.isRequired,changeStep:l.a.func.isRequired,handleSubmit:l.a.func.isRequired};var ie=n("clgt"),le=n("BLzl"),oe=n("afej"),ce=n("/kxI"),se=n("PLmP");function ue(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw i}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be="service",ve="chat-bot",he="configure",ge="setup",ye="success";function Ee(e){var t=fe({},e);return void 0!==e.max_live_chat_inactivity_duration&&(t.max_live_chat_inactivity_duration=e.max_live_chat_inactivity_duration?Object(se.a)(e.max_live_chat_inactivity_duration)/1e3:null),t}function Oe(e){var t=e.isEdit,n=e.step,i=e.onSubmit,l=e.defaultData,c=Object(a.useCallback)((function(e,t){e=Ee(e),i(e,t)}),[i]);return console.log("defaultData",l),r.a.createElement(o.a,{className:"integration-form",initialValues:fe({step:t&&n?n:be},l),handleSubmit:c,renderForm:function(e){var n=e.handleChange,a=e.handleBlur,i=e.values,l=e.errors,o=e.isSubmitting,c=e.setFieldValue,s=e.setErrors,u=e.handleSubmit,d=[be],f=!!i.service;f&&d.push(ve);var p=f&&function(e,t){return e.company_chat_bot_id&&e.name&&e.prefix&&e.locale&&!t.company_chat_bot_id&&!t.name&&!t.prefix&&!t.locale}(i,l);p&&d.push(he);var b=p&&k(i,l);t&&b&&(Object(ie.a)(i.service)?d.push(ge):d.push(ye));var v=b&&Object(ie.a)(i.service);t&&v&&d.push(ye);var g=function(e){return c("step",e)},y=function(e){return new Promise((function(t,n){var a,r={},l=ue(e);try{for(l.s();!(a=l.n()).done;){var o=a.value;r[o]=i[o]}}catch(e){l.e(e)}finally{l.f()}r=Ee(r),h.a.call("post","/methods/integrations/validate",{},r).then((function(){t()})).validation((function(e,t){s(t),n&&n()}))}))};return r.a.createElement(j.a,null,r.a.createElement(w.a,{xl:9},r.a.createElement(le.a,{className:"mb-5 card-navbar shadow"},r.a.createElement(oe.a,{className:"p-0"},r.a.createElement(m,{allowedScreens:d,step:i.step,onChange:g,showSetUpScreen:Object(ie.a)(i.service),errors:l,validate:y,values:i})),r.a.createElement(ce.a,{className:"px-4 rounded-bottom"},r.a.createElement(re,{handleChange:n,handleBlur:a,values:i,errors:l,isSubmitting:o,setFieldValue:c,validate:y,isEdit:t,allowedScreens:d,changeStep:g,handleSubmit:u})))))}})}Oe.propTypes={step:l.a.oneOf([be,ve,he,ge,ye]),isEdit:l.a.bool,defaultData:l.a.object.isRequired,onSubmit:l.a.func.isRequired}},zEWu:function(e,t,n){"use strict";function a(e){return(null==e?void 0:e.iso)||(null==e?void 0:e.city)||(null==e?void 0:e.country)}n.d(t,"a",(function(){return a}))},zl2q:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("ma3e");function c(e){var t=e.audioMessage,n=e.setAudioMessage;return r.a.createElement("div",{className:"d-flex my-1"},r.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:function(){n(null)}},r.a.createElement(o.fb,{className:"icon-size-20 color-gray mr-1"})),r.a.createElement("div",{style:{maxWidth:"400px"}},r.a.createElement("audio",{src:"string"==typeof t?t:URL.createObjectURL(t),controls:!0})))}c.propTypes={audioMessage:l.a.oneOfType([l.a.object,l.a.string]),setAudioMessage:l.a.func.isRequired}},zwA0:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("q1tI"),r=n.n(a),i=n("9Koi");function l(){var e=Object(i.a)().t;return r.a.createElement("div",null,e("common.site-error-message"))}}}]);