(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{YUeP:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),n=a.n(r),l=a("9Koi"),i=a("TtP3"),c=a("17x9"),o=a.n(c),s=a("/MKj"),u=a("7rGz"),m=a("MwQV"),d=a("EW+5"),f=Object(d.a)(u.a.BASIC),p=f.loading,b=f.itemsListLoaded,g=f.error,v=Object(d.a)(u.a.SESSIONS_BY_COUNTRY),y=v.loading,h=v.itemsListLoaded,E=v.error,j=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){e||t(p()),m.a.call("get","/methods/statistics/basic").then((function(e){t(b({response:e}))})).catch((function(e){return t(g(e))}))}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(r){var n={};t&&a?(n.from=t,n.to=a):e&&(n.days=e),r(y()),m.a.call("get","/methods/statistics/sessions-by-country",n).then((function(e){r(h({response:e,filters:n}))})).catch((function(e){return r(E(e))}))}},S=a("h4JF"),N=a("zwA0"),w=a("BLzl"),A=a("/kxI"),C=a("ok1R"),I=a("rhny"),x=a("ma3e");function _(e){var t=e.data,a=e.loading,l=e.error,i=e.load;Object(r.useEffect)((function(){i()}),[i]);var c=Object(r.useRef)();return Object(r.useEffect)((function(){return c.current=setInterval((function(){i(!0)}),3e4),function(){c.current&&clearInterval(c.current)}}),[i]),a?n.a.createElement(S.a,{className:"basic-statistics-spinner"}):l?n.a.createElement(N.a,null):t&&!l?n.a.createElement(w.a,{className:"mb-5 shadow basic-statistic"},n.a.createElement(A.a,null,n.a.createElement(C.a,null,n.a.createElement(I.a,{className:"text-center"},n.a.createElement("div",{className:"analytic-element d-flex my-2 clickable rounded"},n.a.createElement("div",{className:"icon-block turquoise-block"},n.a.createElement(x.a,null)),n.a.createElement("div",{className:"data-block"},n.a.createElement("p",{className:"analytic-element-name"},"Active chatbots"),n.a.createElement("p",{className:"analytic-element-value"},t.get("active_chat_bots"))))),n.a.createElement(I.a,{className:"text-center"},n.a.createElement("div",{className:"analytic-element d-flex my-2 clickable rounded"},n.a.createElement("div",{className:"icon-block blue-second-block"},n.a.createElement(x.r,null)),n.a.createElement("div",{className:"data-block"},n.a.createElement("p",{className:"analytic-element-name"},"Active livechats"),n.a.createElement("p",{className:"analytic-element-value"},t.get("active_live_chats"))))),n.a.createElement(I.a,{className:"text-center"},n.a.createElement("div",{className:"analytic-element d-flex my-2 clickable rounded"},n.a.createElement("div",{className:"icon-block green-icon-block"},n.a.createElement(x.gb,null)),n.a.createElement("div",{className:"data-block"},n.a.createElement("p",{className:"analytic-element-name"},"Operators online"),n.a.createElement("p",{className:"analytic-element-value"},t.get("active_operators_count"))))),n.a.createElement(I.a,{className:"text-center"},n.a.createElement("div",{className:"analytic-element d-flex my-2 clickable rounded"},n.a.createElement("div",{className:"icon-block green-light-block"},n.a.createElement(x.x,null)),n.a.createElement("div",{className:"data-block"},n.a.createElement("p",{className:"analytic-element-name"},"Active website visitors"),n.a.createElement("p",{className:"analytic-element-value"},t.get("active_web_site_visitors_count"))))),n.a.createElement(I.a,{className:"text-center"},n.a.createElement("div",{className:"analytic-element d-flex my-2 clickable rounded"},n.a.createElement("div",{className:"icon-block blue-icon-block"},n.a.createElement(x.m,null)),n.a.createElement("div",{className:"data-block"},n.a.createElement("p",{className:"analytic-element-name"},"Active campaigns"),n.a.createElement("p",{className:"analytic-element-value"},t.get("active_campaigns_count")))))))):void 0}_.propTypes={load:o.a.func.isRequired,data:o.a.object,loading:o.a.bool,error:o.a.object};var k=Object(s.c)((function(e){var t=e.statistics.get("basic");return{loading:t.get("loading"),data:t.get("data"),error:t.get("error")}}),(function(e){return{load:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(j(t))}}}))(_),T=a("Sfbj");function q(e){var t=e.dataMap,a=e.className;return n.a.createElement(T.ComposableMap,{className:a},n.a.createElement(T.Graticule,{stroke:"#EAEAEC"}),n.a.createElement(T.Geographies,{geography:"/map-110-not-p.json"},(function(e){return e.geographies.map((function(e){var a="#cecece",r=t.get(e.properties.ISO_A2);if(r){var l=r.percentFromMax/100*.5+.5;a="rgba(0, 40, 138, ".concat(l,")")}return n.a.createElement(T.Geography,{key:e.rsmKey,geography:e,fill:a,stroke:"#EAEAEC"})}))})))}q.propTypes={dataMap:o.a.object,className:o.a.string};var F=q,M=a("ymym"),R={indexAxis:"y",elements:{bar:{borderWidth:2}},responsive:!0,plugins:{legend:{display:!1},title:{display:!1}}},D={responsive:!0,plugins:{legend:{display:!0},title:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0}}};function U(e){var t=e.dataMap.toIndexedSeq().slice(0,5),a={labels:t.map((function(e){return e.country})).toJS(),datasets:[{label:"",data:t.map((function(e){return e.count})).toJS(),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]};return n.a.createElement(M.a,{options:R,data:a,type:"bar"})}U.propTypes={dataMap:o.a.object};var L=U,$=a("Mpt7");function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function z(){var e=V(Object(r.useState)(Object($.b)({period:7,prevPeriod:7,from:null,to:null,api:{period:7,from:null,to:null}})),2),t=e[0],a=e[1],n=t.get("api");return{filters:t,apiFilters:n,handleFilterChange:function(e){var r=e.toJS(),n=r.period,l=r.from,i=r.to,c=t.get("period"),o=t.set("period",n).set("from",l).set("to",i);-1!==c&&(o=o.set("prevPeriod",c)),o=-1===n?l&&i?o.set("api",{period:null,from:l,to:i}):o.set("api",{period:o.get("prevPeriod"),from:null,to:null}):o.set("api",{period:n,from:null,to:null}),a(o)}}}var B=a("y2Vs"),G=a("c0+T"),J=a("TSYQ"),Y=a.n(J),K={container:function(){return{padding:"8px 0"}}};function X(e){var t=e.filters,a=e.onChange,r=e.className,i=Object(l.a)().t,c=function(){var e=Object(l.a)().t;return[{label:e("statistics.periods.7-days"),value:7},{label:e("statistics.periods.30-days"),value:30},{label:e("statistics.periods.custom"),value:-1}]}(),o=c.findIndex((function(e){return e.value===t.get("period")}));return n.a.createElement("div",{className:Y()(r)},n.a.createElement(B.a,{className:"py-2",styles:K,value:c[o],options:c,onChange:function(e){a(t.set("period",e.value).set("from",null).set("to",null))}}),-1===t.get("period")?n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement(G.a,{formGroupClass:"py-2 w-100",onChange:function(e){a(t.set("from",e))},placeholder:i("statistics.custom-date-from-placeholder"),value:t.get("from"),wrapperClassName:"w-100 pr-2"}),n.a.createElement(G.a,{formGroupClass:"py-2 w-100",onChange:function(e){a(t.set("to",e))},placeholder:i("statistics.custom-date-to-placeholder"),value:t.get("to"),wrapperClassName:"w-100 pl-2"})):null)}X.propTypes={filters:o.a.object.isRequired,onChange:o.a.func.isRequired,className:o.a.string};var H=Object(r.memo)(X);function W(e){var t=e.loading,a=e.dataMap,i=e.error,c=e.load,o=Object(l.a)().t,s=z(),u=s.filters,m=s.apiFilters,d=s.handleFilterChange,f=m.period,p=m.from,b=m.to;return Object(r.useEffect)((function(){c(f,p,b)}),[c,f,p,b]),t?n.a.createElement(S.a,null):i?n.a.createElement(N.a,null):a&&!i?n.a.createElement("div",null,n.a.createElement("p",{className:"statistics-title"},o("statistics.chat-sessions-by-country.title")),n.a.createElement(w.a,{className:"mb-5 shadow"},n.a.createElement(A.a,{className:"pb-2"},n.a.createElement(C.a,null,n.a.createElement(I.a,{sm:12},n.a.createElement("p",null,o("statistics.chat-sessions-by-country.subtitle")),n.a.createElement(F,{className:"map",dataMap:a}),n.a.createElement(L,{dataMap:a}),n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:8},n.a.createElement(H,{filters:u,onChange:d})))))))):void 0}W.propTypes={load:o.a.func.isRequired,dataMap:o.a.object,filters:o.a.object,order:o.a.object,loading:o.a.bool,error:o.a.object};var Q=Object(s.c)((function(e){var t=e.statistics.get("sessionsByCountry");return{loading:t.get("loading"),dataMap:t.get("dataMap"),error:t.get("error")}}),(function(e){return{load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(O(t,a,r))}}}))(W);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={};return t&&a?(r.from=t,r.to=a):e&&(r.days=e),r}function ae(e,t,a,n,l){var i=Object(r.useCallback)((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=te(a,r,n);m.a.call("get",t,l).data((function(t){e((function(e){return e.set("data",t).set("loading",!1)}))})).catch((function(){e((function(e){return e.set("error",!0).set("loading",!1)}))}))}),[e,t]);Object(r.useEffect)((function(){i(a,n,l)}),[i,a,n,l])}function re(e){var t=z(),a=t.filters,n=t.apiFilters,l=t.handleFilterChange,i=n.period,c=n.from,o=n.to,s=Z(Object(r.useState)(Object($.b)({loading:!0,error:null,data:null})),2),u=s[0];return ae(s[1],e,i,c,o),{apiData:u,filters:a,handleFilterChange:l}}function ne(e,t){var a=e.period,n=e.from,l=e.to,i=Z(Object(r.useState)(Object($.b)({loading:!0,error:null,data:null})),2),c=i[0];return ae(i[1],t,a,n,l),c}var le,ie=a("XRgj");function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var oe=(ce(le={},ie.i,"#08329d"),ce(le,ie.b,"#d2f1ba"),ce(le,ie.c,"#f85b85"),ce(le,ie.d,"#7c3e4c"),ce(le,ie.e,"#359cce"),ce(le,ie.h,"#6d5ac1"),ce(le,ie.g,"#32ad00"),ce(le,ie.f,"#eec06b"),ce(le,ie.a,"#7e7a8c"),le),se=a("hBLe");function ue(e){var t=e.statisticsData,a=Object(l.a)().t,r=Object(se.a)(),i=[];for(var c in t.data){var o=t.data[c],s={};for(var u in o)s[r(u)]=o[u];i.push({label:a("integrations.service.".concat(c)),data:s,backgroundColor:oe[c]})}var m={labels:t.dates.map((function(e){return r(e)})),datasets:i};return n.a.createElement(M.a,{options:{responsive:!0,plugins:{legend:{display:!0},title:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0}}},data:m,type:"bar"})}function me(e){var t=e.service,a=re("/methods/statistics/chat-usages-by-service/".concat(t||"")),r=a.apiData,l=a.filters,i=a.handleFilterChange;return r.get("loading")?n.a.createElement(S.a,null):r.get("error")?n.a.createElement(N.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(ue,{statisticsData:r.get("data")}),n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:6},n.a.createElement(H,{filters:l,onChange:i}))))}ue.propTypes={statisticsData:o.a.shape({data:o.a.object,dates:o.a.array}).isRequired},me.propTypes={service:o.a.number};var de=me,fe=a("jrRI"),pe=a("3OM0");function be(e){var t=e.value,a=e.onChange,r=Object(l.a)().t,i=[{label:r("integrations.service.".concat(ie.i)),value:ie.i},{label:r("integrations.service.".concat(ie.b)),value:ie.b},{label:r("integrations.service.".concat(ie.c)),value:ie.c},{label:r("integrations.service.".concat(ie.d)),value:ie.d},{label:r("integrations.service.".concat(ie.e)),value:ie.e},{label:r("integrations.service.".concat(ie.h)),value:ie.h},{label:r("integrations.service.".concat(ie.g)),value:ie.g},{label:r("integrations.service.".concat(ie.f)),value:ie.f},{label:r("integrations.service.".concat(ie.a)),value:ie.a}],c=i.findIndex((function(e){return e.value===t}));return n.a.createElement(fe.a,{className:"d-flex flex-column-reverse p-0"},n.a.createElement(pe.a,{htmlFor:"service-select"}),n.a.createElement(B.a,{id:"service-select",placeholder:r("statistics.default-option-all"),value:-1!==c?i[c]:null,options:i,onChange:function(e){a(e?e.value:null)},isClearable:!0}))}be.propTypes={value:o.a.any,onChange:o.a.func.isRequired};var ge=be,ve=a("Buep"),ye=a("3zHg"),he=a("LdVD");function Ee(e){var t=e.value,a=e.onChange,r=e.className,i=Object(l.a)().t;return n.a.createElement(ve.a,{label:!1,name:"department_id",value:t,placeholder:i("statistics.default-option-all"),setFieldValue:function(e,t){return a(t)},loadOptions:he.a,loadValue:ye.a,errors:{},isClearable:!0,className:Y()(r)})}Ee.propTypes={onChange:o.a.func.isRequired,value:o.a.any,className:o.a.string};var je=Ee,Oe=a("XYr3"),Se=a.n(Oe);function Ne(e){var t=e.statisticsData,a=Object(se.a)(),r=[];for(var l in t.data){var i=t.data[l],c={};for(var o in i)c[a(o)]=i[o];var s=t.names[l]||"-";r.push({label:s,data:c,backgroundColor:Se()(s)})}var u={labels:t.dates.map((function(e){return a(e)})),datasets:r};return n.a.createElement(M.a,{options:D,data:u,type:"bar"})}function we(e){var t=e.department,a=re("/methods/statistics/chat-usages-by-department/".concat(t||"")),r=a.apiData,l=a.filters,i=a.handleFilterChange;return r.get("loading")?n.a.createElement(S.a,null):r.get("error")?n.a.createElement(N.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(Ne,{statisticsData:r.get("data")}),n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:6},n.a.createElement(H,{filters:l,onChange:i}))))}Ne.propTypes={statisticsData:o.a.shape({data:o.a.object,dates:o.a.array,departments:o.a.object,names:o.a.object}).isRequired},we.propTypes={department:o.a.number};var Ae=we;function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var xe=function(){var e,t=Object(l.a)().t,a=Ce(Object(r.useState)({label:t("statistics.chat-usages.types.".concat("channel")),value:"channel"}),2),i=a[0],c=a[1],o=Ce(Object(r.useState)(null),2),s=o[0],u=o[1];return e="channel"===i.value?n.a.createElement(de,{service:s}):n.a.createElement(Ae,{department:s}),n.a.createElement("div",null,n.a.createElement("p",{className:"statistics-title"},t("statistics.chat-usages.title")),n.a.createElement(w.a,{className:"mb-5 shadow"},n.a.createElement(A.a,{className:"pb-2"},n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:6},n.a.createElement(B.a,{value:i,options:[{label:t("statistics.chat-usages.types.".concat("channel")),value:"channel"},{label:t("statistics.chat-usages.types.".concat("department")),value:"department"}],onChange:function(e){c(e),u(null)}})),n.a.createElement(I.a,{sm:6},"channel"===i.value?n.a.createElement(ge,{key:i.value,value:s,onChange:u}):n.a.createElement(je,{className:"d-flex flex-column-reverse p-0",key:i.value,value:s,onChange:u}))),e)))},_e={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:""}}};function ke(e){var t=e.statisticsData,a=Object(se.a)(),r=[],l=t.dates.map((function(e){return a(e)}));for(var i in t.data){var c=t.data[i],o=[];for(var s in c)o.push(c[s]);var u=Se()(i);r.push({label:t.names[i],data:o,borderColor:u,backgroundColor:u})}var m={labels:l,datasets:r};return n.a.createElement(M.b,{options:_e,data:m,type:"line"})}function Te(){var e=Object(l.a)().t,t=re("/methods/statistics/chat-usages-by-integration"),a=t.apiData,r=t.filters,i=t.handleFilterChange;return a.get("loading")?n.a.createElement(S.a,null):a.get("error")?n.a.createElement(N.a,null):n.a.createElement("div",null,n.a.createElement("p",{className:"statistics-title"},e("statistics.integrations-usages.title")),n.a.createElement(w.a,{className:"mb-5 shadow"},n.a.createElement(A.a,{className:"pb-2"},n.a.createElement(ke,{statisticsData:a.get("data")}),n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:4},n.a.createElement(H,{filters:r,onChange:i}))))))}ke.propTypes={statisticsData:o.a.object.isRequired},Te.propTypes={};var qe=Te,Fe=a("m0r1"),Me=a("sOKU");function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var Ue=Object(r.forwardRef)((function(e,t){var a=e.data,r=e.style,l=void 0===r?{}:r,i={labels:a.map((function(e){return e.name})),datasets:[{label:"",data:a.map((function(e){return e.count})),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]};return n.a.createElement(M.a,{ref:t,style:l,options:R,data:i,type:"bar"})}));function Le(){var e=Object(l.a)().t,t=re("/methods/statistics/tag-usages"),a=t.apiData,i=t.filters,c=t.handleFilterChange,o=Re(Object(r.useState)(!1),2),s=o[0],u=o[1],m=Object(r.useRef)();return a.get("loading")?n.a.createElement(S.a,null):a.get("error")?n.a.createElement(N.a,null):n.a.createElement("div",null,n.a.createElement("p",{className:"statistics-title"},e("statistics.tags-usages.title")),n.a.createElement(w.a,{className:"mb-5 shadow"},n.a.createElement(A.a,{className:"pt-2"},n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:4},n.a.createElement(H,{filters:i,onChange:c}))),n.a.createElement(Me.a,{className:"load-more-btn",onClick:function(){u(!s),m.current&&setTimeout((function(){m.current._resize()}),10)}},e(s?"statistics.hide-btn":"statistics.show-btn")),n.a.createElement(Ue,{ref:m,data:a.get("data").slice(0,s?void 0:10),style:{maxHeight:s?500:350}}))))}Ue.propTypes={data:o.a.array.isRequired,style:o.a.object},Le.propTypes={};var $e=Le;function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function ze(e){var t=e.statisticsData,a=Object(l.a)().t,r=Object(se.a)(),i={labels:t.uniqueDates.map((function(e){return r(e)})),datasets:[{label:null,data:t.uniqueDates.map((function(e){return t.data[e]})),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]};return n.a.createElement(M.b,{options:{plugins:{title:{display:!0,text:a("statistics.campaigns.sessions-by-period.title")},legend:{display:!1}}},data:i,type:"line"})}function Be(e){var t=e.period,a=e.from,l=e.to,i=e.campaignId,c=Ve(Object(r.useState)(Object($.b)({loading:!0,error:null,data:null})),2),o=c[0],s=c[1];return Object(r.useEffect)((function(){var e=te(t,a,l);i&&(e.campaignId=i),m.a.call("get","/methods/statistics/campaigns/sessions-by-period",e).data((function(e){s((function(t){return t.set("data",e).set("loading",!1)}))})).catch((function(){s((function(e){return e.set("error",!0).set("loading",!1)}))}))}),[t,a,l,i]),o.get("loading")?n.a.createElement(S.a,null):o.get("error")?n.a.createElement(N.a,null):n.a.createElement(w.a,null,n.a.createElement(A.a,null,n.a.createElement(ze,{statisticsData:o.get("data")})))}ze.propTypes={statisticsData:o.a.shape({uniqueDates:o.a.array.isRequired,data:o.a.object.isRequired}).isRequired},Be.propTypes={period:o.a.number,from:o.a.number,to:o.a.number,campaignId:o.a.number};var Ge=Be;function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Ke(e){var t=e.statisticsData,a=Object(l.a)().t,r={labels:t.map((function(e){return e.name})),datasets:t.map((function(e){var a=Se()(e.name);return{label:e.name,data:t.map((function(t){return t.name===e.name?e.count:0})),borderColor:a,backgroundColor:a}}))},i=Object.assign({},D);return i.plugins.title={display:!0,text:a("statistics.campaigns.sessions-by-campaign.title")},n.a.createElement(M.a,{options:i,data:r,type:"bar"})}function Xe(e){var t=e.period,a=e.from,l=e.to,i=e.campaignId,c=Je(Object(r.useState)(Object($.b)({loading:!0,error:null,data:null})),2),o=c[0],s=c[1];return Object(r.useEffect)((function(){var e=te(t,a,l);i&&(e.campaignId=i),m.a.call("get","/methods/statistics/campaigns/sessions-by-campaign",e).data((function(e){s((function(t){return t.set("data",e).set("loading",!1)}))})).catch((function(){s((function(e){return e.set("error",!0).set("loading",!1)}))}))}),[t,a,l,i]),o.get("loading")?n.a.createElement(S.a,null):o.get("error")?n.a.createElement(N.a,null):n.a.createElement(w.a,null,n.a.createElement(A.a,null,n.a.createElement(Ke,{statisticsData:o.get("data")})))}Ke.propTypes={statisticsData:o.a.array.isRequired},Xe.propTypes={period:o.a.number,from:o.a.number,to:o.a.number,campaignId:o.a.number};var He=Xe;function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Ze(e){var t=e.value,a=e.title;return n.a.createElement(I.a,{sm:4,className:" p-3 campaign-general-item"},n.a.createElement(w.a,null,n.a.createElement(A.a,{className:"text-center px-2"},n.a.createElement("p",{className:"value mb-0"},t),n.a.createElement("p",{className:"title mb-0"},a))))}function et(e){var t=e.period,a=e.from,i=e.to,c=e.campaignId,o=Object(l.a)().t,s=We(Object(r.useState)(Object($.b)({loading:!0,error:null,data:null})),2),u=s[0],d=s[1];if(Object(r.useEffect)((function(){var e=te(t,a,i);c&&(e.campaignId=c),m.a.call("get","/methods/statistics/campaigns/general",e).data((function(e){d((function(t){return t.set("data",e).set("loading",!1)}))})).catch((function(){d((function(e){return e.set("error",!0).set("loading",!1)}))}))}),[t,a,i,c]),u.get("loading"))return n.a.createElement(S.a,null);if(u.get("error"))return n.a.createElement(N.a,null);var f=u.get("data").total_messages_count.toLocaleString(),p=u.get("data").new_subscribers_count.toLocaleString(),b=u.get("data").unsubscribers_count.toLocaleString();return n.a.createElement(C.a,null,n.a.createElement(Ze,{title:o("statistics.campaigns.general-statistics.messages-sent"),value:f}),n.a.createElement(Ze,{title:o("statistics.campaigns.general-statistics.new-subscribers"),value:p}),n.a.createElement(Ze,{title:o("statistics.campaigns.general-statistics.unsubscribers"),value:b}))}Ze.propTypes={value:o.a.any.isRequired,title:o.a.string.isRequired},et.propTypes={period:o.a.number,from:o.a.number,to:o.a.number,campaignId:o.a.number};var tt=et,at=a("R5y6"),rt=a("5f+b"),nt=a("Yfk4");function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return it(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function ct(e){var t=e.period,a=e.from,i=e.to,c=e.campaignId,o=Object(l.a)().t,s=lt(Object(r.useState)(Object($.b)({loading:!0,error:null,data:null})),2),u=s[0],d=s[1],f=lt(Object(r.useState)(!1),2),p=f[0],b=f[1];if(Object(r.useEffect)((function(){var e=te(t,a,i);c&&(e.campaignId=c),m.a.call("get","/methods/statistics/campaigns/info-table",e).data((function(e){d((function(t){return t.set("data",e).set("loading",!1)}))})).catch((function(){d((function(e){return e.set("error",!0).set("loading",!1)}))}))}),[t,a,i,c]),u.get("loading"))return n.a.createElement(S.a,null);if(u.get("error"))return n.a.createElement(N.a,null);var g=u.get("data"),v=p?g:g.slice(0,5);return n.a.createElement(w.a,null,n.a.createElement(A.a,null,n.a.createElement("p",{className:"campaigns-table-title"},o("statistics.campaigns.campaigns-info-table.rows-shown",{count:v.length,totalCount:g.length})),n.a.createElement(nt.a,{className:"campaigns-table",striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Campaign"),n.a.createElement("th",{className:"text-center"},"Sessions"),n.a.createElement("th",{className:"text-center"},"New sessions"),n.a.createElement("th",{className:"text-center"},"Unsubscribe rate"),n.a.createElement("th",{className:"text-center"},"Subscribers"))),n.a.createElement("tbody",null,v.map((function(e){return n.a.createElement("tr",{key:e.id},n.a.createElement("td",null,e.name),n.a.createElement("td",{className:"text-center"},e.sessions_count),n.a.createElement("td",{className:"text-center"},e.new_sessions_count),n.a.createElement("td",{className:"text-center"},e.unsubscribers),n.a.createElement("td",{className:"text-center"},e.subscribers))})))),g.length>5?n.a.createElement(Me.a,{type:"button",onClick:function(){return b(!p)}},o(p?"statistics.hide-btn":"statistics.show-btn")):null))}ct.propTypes={period:o.a.number,from:o.a.number,to:o.a.number,campaignId:o.a.number};var ot=ct;function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function mt(e){var t=e.value,a=e.onChange,r=Object(l.a)().t;return n.a.createElement(at.a,{name:"tags",label:r("statistics.campaigns.campaign-label"),value:t,setFieldValue:function(e,t){a(t)},errors:{},loadOptions:rt.a,isClearable:!0,className:"py-2",labelClass:"campaign-label"})}mt.propTypes={value:o.a.object,onChange:o.a.func.isRequired};var dt=function(){var e=Object(l.a)().t,t=z(),a=t.filters,i=t.apiFilters,c=t.handleFilterChange,o=i.period,s=i.from,u=i.to,m=st(Object(r.useState)(null),2),d=m[0],f=m[1],p=d?d.value:null;return n.a.createElement("div",null,n.a.createElement("p",{className:"statistics-title"},e("statistics.campaigns.title")),n.a.createElement(w.a,{className:"mb-5 shadow"},n.a.createElement(A.a,{className:"pt-2"},n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:4,className:"pb-2"},n.a.createElement(mt,{value:d,onChange:f})),n.a.createElement(I.a,{sm:4,className:"d-flex align-bottom pb-2 pt-4 mt-2"},n.a.createElement(H,{className:"w-100 align-self-end",filters:a,onChange:c})),n.a.createElement(I.a,{sm:6},n.a.createElement(Ge,{period:o,from:s,to:u,campaignId:p})),n.a.createElement(I.a,{sm:6},n.a.createElement(He,{period:o,from:s,to:u,campaignId:p})),n.a.createElement(I.a,{sm:6},n.a.createElement(tt,{period:o,from:s,to:u,campaignId:p})),n.a.createElement(I.a,{sm:12},n.a.createElement(ot,{period:o,from:s,to:u,campaignId:p}))))))};function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var bt=Object(r.forwardRef)((function(e,t){var a=e.data,r=e.style,l=void 0===r?{}:r,i={labels:a.map((function(e){return e.trigger_name})),datasets:[{label:"",data:a.map((function(e){return e.percent})),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]};return n.a.createElement(M.a,{ref:t,style:l,options:R,data:i,type:"bar"})}));function gt(e){var t=e.value,a=e.onChange,r=Object(l.a)().t;return n.a.createElement(at.a,{className:"py-2",labelClass:"key-metric-label",name:"tags",label:r("statistics.triggers.trigger-label"),value:t,setFieldValue:function(e,t){a(t)},errors:{},loadOptions:function(e){return new Promise((function(t){m.a.call("get","/methods/statistics/possible-triggers",{q:e}).data((function(e){t(e.map((function(e){return{label:e,value:e}})))}))}))},isClearable:!0})}function vt(){var e=Object(l.a)().t,t=z(),a=t.filters,i=t.apiFilters,c=t.handleFilterChange,o=i.period,s=i.from,u=i.to,d=ft(Object(r.useState)(!1),2),f=d[0],p=d[1],b=ft(Object(r.useState)(null),2),g=b[0],v=b[1],y=g?g.value:null,h=ft(Object(r.useState)(Object($.b)({loading:!0,error:null,data:null})),2),E=h[0],j=h[1];Object(r.useEffect)((function(){var e=te(o,s,u);y&&(e.trigger=y),m.a.call("get","/methods/statistics/trigger-usages",e).data((function(e){j((function(t){return t.set("data",e).set("loading",!1)}))})).catch((function(){j((function(e){return e.set("error",!0).set("loading",!1)}))}))}),[o,s,u,y]);var O=Object(r.useRef)();return E.get("loading")?n.a.createElement(S.a,null):E.get("error")?n.a.createElement(N.a,null):n.a.createElement("div",null,n.a.createElement("p",{className:"statistics-title"},y?e("statistics.triggers.title-one",{word:y}):e("statistics.triggers.title-all",{count:10})),n.a.createElement(w.a,{className:"mb-5 shadow"},n.a.createElement(A.a,{className:"pt-2"},n.a.createElement(C.a,{className:"px-3 py-2"},n.a.createElement(I.a,{sm:4,className:"pb-2"},n.a.createElement(gt,{value:g,onChange:v})),n.a.createElement(I.a,{sm:4,className:"d-flex align-bottom pb-2 pt-4 mt-2"},n.a.createElement(H,{className:"w-100 align-self-end",filters:a,onChange:c})),n.a.createElement(I.a,{sm:12},E.get("data").length>10?n.a.createElement(Me.a,{className:"load-more-btn",onClick:function(){p(!f),O.current&&setTimeout((function(){O.current._resize()}),10)}},e(f?"statistics.hide-btn":"statistics.show-btn")):null,n.a.createElement(bt,{ref:O,data:E.get("data").slice(0,f?void 0:10),style:{maxHeight:f?500:350}}))))))}bt.propTypes={data:o.a.array.isRequired,style:o.a.object},gt.propTypes={value:o.a.object,onChange:o.a.func.isRequired},vt.propTypes={};var yt=vt,ht=a("XAkp"),Et=a("rWSr"),jt=a("mNz5"),Ot=a.n(jt),St=a("ktSP");function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function At(e){var t=e.children,a=e.tooltip,l=Nt(Object(r.useState)(!1),2),i=l[0],c=l[1],o=Nt(Object(r.useState)(Ot()("tooltip")),1)[0];return n.a.createElement(n.a.Fragment,null,t,a?n.a.createElement(x.ab,{className:"mx-2 tooltip-icon",onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},id:o}):null,i&&a?n.a.createElement(Et.a,{placement:"right",isOpen:i,target:o,toggle:function(){return c((function(e){return!e}))}},a):null)}At.propTypes={children:o.a.any,tooltip:o.a.string};var Ct=function(e){var t=ne(e.apiFilters,"/methods/statistics/chatboard/general"),a=Object(l.a)().t;return t.get("loading")?n.a.createElement(S.a,null):t.get("error")?n.a.createElement(N.a,null):n.a.createElement(ht.a,{className:"common-stat-table"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,a("statistics.live-chat.general.total-number-of-chat-requests")),n.a.createElement("td",null,t.getIn(["data","total_number_of_chat_requests"]))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.total-number-of-successful-proactive-chat-invitations-tooltip")},a("statistics.live-chat.general.total-number-of-successful-proactive-chat-invitations"))),n.a.createElement("td",null,t.getIn(["data","total_number_of_proactive_chat_invitations"]))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.total-number-of-chats-accepted-by-operators-tooltip")},a("statistics.live-chat.general.total-number-of-chats-accepted-by-operators"))),n.a.createElement("td",null,t.getIn(["data","total_number_of_chats_accepted_by_operators"]))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.total-number-of-skipped-chats-tooltip")},a("statistics.live-chat.general.total-number-of-skipped-chats"))),n.a.createElement("td",null,t.getIn(["data","total_number_of_skipped_chats"]))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.average-waiting-time-until-chat-be-accepted-tooltip")},a("statistics.live-chat.general.average-waiting-time-until-chat-be-accepted"))),n.a.createElement("td",null,Object(St.a)(Math.ceil(t.getIn(["data","average_waiting_time_until_chat_be_accepted"]))))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.average-duration-of-chat-tooltip")},a("statistics.live-chat.general.average-duration-of-chat"))),n.a.createElement("td",null,Object(St.a)(Math.ceil(t.getIn(["data","average_duration_of_chat"]))))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.number-of-chats-closed-tooltip")},a("statistics.live-chat.general.number-of-chats-closed"))),n.a.createElement("td",null,t.getIn(["data","number_of_chats_closed"]))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.number-of-chats-returned-back-to-que-tooltip")},a("statistics.live-chat.general.number-of-chats-returned-back-to-que"))),n.a.createElement("td",null,t.getIn(["data","number_of_chats_returned_back_to_que"]))),n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(At,{tooltip:a("statistics.live-chat.general.number-of-abandoned-chats-tooltip")},a("statistics.live-chat.general.number-of-abandoned-chats"))),n.a.createElement("td",null,t.getIn(["data","number_of_abandoned_chats"])))))};Ct.propTypes={apiFilters:o.a.shape({period:o.a.number,from:o.a.number,to:o.a.number})};var It=Ct;function xt(e){var t=e.statisticsData,a=e.mapLabel,r=Object(se.a)(),l=[];for(var i in t.data){var c=t.data[i],o={};for(var s in c)o[r(s)]=c[s];l.push({label:a(i),data:o,backgroundColor:Se()(i)})}var u={labels:t.dates.map((function(e){return r(e)})),datasets:l};return n.a.createElement(M.a,{options:{responsive:!0,plugins:{legend:{display:!0},title:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0}}},data:u,type:"bar"})}xt.propTypes={statisticsData:o.a.shape({data:o.a.object,dates:o.a.array}).isRequired,mapLabel:o.a.func.isRequired};var _t=xt,kt=a("83d4");function Tt(e){return new Promise((function(t){m.a.call("get","/methods/user/".concat(e)).data((function(e){t({label:e.name,value:e.id,user:kt.d.instantiate(e)})}))}))}var qt=a("F6sc");function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Rt(e){var t=e.filters,a=Object(l.a)().t,i=Ft(Object(r.useState)(null),2),c=i[0],o=i[1],s=ne(t,"/methods/statistics/chatboard/chat-duration/by-operator/".concat(c||""));return s.get("loading")?n.a.createElement(S.a,null):s.get("error")?n.a.createElement(N.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(ve.a,{className:"limiter",label:!1,placeholder:a("statistics.live-chat.chat-duration-chart.all-operators"),name:"operator_id",value:c,setFieldValue:function(e,t){o(t)},loadOptions:qt.a,loadValue:Tt,errors:{},isClearable:!0}),n.a.createElement(_t,{statisticsData:s.get("data"),mapLabel:function(e){return s.get("data").names[e]}}))}Rt.propTypes={filters:o.a.object.isRequired};var Dt=Rt;var Ut=a("suXn");function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $t(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Vt(e){var t=e.filters,a=Object(l.a)().t,i=Lt(Object(r.useState)(null),2),c=i[0],o=i[1],s=ne(t,"/methods/statistics/chatboard/chat-duration/by-service/".concat(c||""));if(s.get("loading"))return n.a.createElement(S.a,null);if(s.get("error"))return n.a.createElement(N.a,null);var u=function(e){return function(t){var a=[ie.i,ie.b,ie.c,ie.d,ie.e,ie.h,ie.g,ie.f,ie.a].map((function(t){return{label:e("integrations.service.".concat(t)),value:t}})).filter((function(e){return-1!==e.label.toLowerCase().indexOf(t.toLowerCase())}));return new Promise((function(e){e(a)}))}}(a);return n.a.createElement(n.a.Fragment,null,n.a.createElement(ve.a,{className:"limiter",label:!1,placeholder:a("statistics.live-chat.chat-duration-chart.all-services"),name:"operator_id",value:c,setFieldValue:function(e,t){o(t)},loadOptions:u,loadValue:function(e){return new Promise((function(t){u("").then((function(a){t(Object(Ut.find)(a,(function(t){return t.value===e})))}))}))},errors:{},isClearable:!0}),n.a.createElement(_t,{statisticsData:s.get("data"),mapLabel:function(e){return a("integrations.service.".concat(e))}}))}Vt.propTypes={filters:o.a.object.isRequired};var Pt=Vt;function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Gt(e){var t=e.filters,a=Object(l.a)().t,i=zt(Object(r.useState)(null),2),c=i[0],o=i[1],s=ne(t,"/methods/statistics/chatboard/chat-duration/by-department/".concat(c||""));return s.get("loading")?n.a.createElement(S.a,null):s.get("error")?n.a.createElement(N.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(ve.a,{className:"limiter",label:!1,placeholder:a("statistics.live-chat.chat-duration-chart.all-services"),name:"operator_id",value:c,setFieldValue:function(e,t){o(t)},loadOptions:he.a,loadValue:ye.a,errors:{},isClearable:!0}),n.a.createElement(_t,{statisticsData:s.get("data"),mapLabel:function(e){return e?s.get("data").names[e]:"-"}}))}Gt.propTypes={filters:o.a.object.isRequired};var Jt=Gt;function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var Xt=function(){var e=Object(l.a)().t,t=Yt(Object(r.useState)(1),2),a=t[0],i=t[1],c=[1,2,3],o=z(),s=o.filters,u=o.apiFilters,m=o.handleFilterChange,d=null;switch(a){case 1:d=n.a.createElement(Pt,{filters:u});break;case 2:d=n.a.createElement(Jt,{filters:u});break;case 3:d=n.a.createElement(Dt,{filters:u})}return n.a.createElement("div",null,n.a.createElement("p",{className:"statistics-title"},e("statistics.live-chat.title")),n.a.createElement(w.a,{className:"mb-5 shadow"},n.a.createElement(A.a,{className:"pt-4"},n.a.createElement("div",{className:"navigation-bar-wrapper px-3"},n.a.createElement("div",{className:"navigation-bar d-flex"},c.map((function(t){return n.a.createElement("button",{key:t,onClick:function(){return i(t)},className:Y()("navigation-item rounded-top py-2 px-4",{active:a===t})},e("statistics.live-chat.types.".concat(t)))})))),n.a.createElement(w.a,{className:"mx-3 live-chat-graph"},n.a.createElement(A.a,null,d,n.a.createElement(C.a,{className:"px-3 pb-0 pt-3"},n.a.createElement(I.a,{sm:4},n.a.createElement(H,{filters:s,onChange:m}))))),n.a.createElement(C.a,{className:"px-3 pt-4 pb-2"},n.a.createElement(I.a,{sm:12,md:8},n.a.createElement(It,{apiFilters:u}))))))};Fe.e.register(Fe.d,Fe.j,Fe.b,Fe.p,Fe.q,Fe.g,Fe.l,Fe.i);t.default=function(){var e=Object(l.a)().t;return n.a.createElement(i.a,{className:"statistics-page",title:e("statistics.title")},n.a.createElement(C.a,null,n.a.createElement(I.a,{sm:12,className:"mb-2"},n.a.createElement(k,null))),n.a.createElement("h2",null,e("statistics.title-detail")),n.a.createElement(C.a,null,n.a.createElement(I.a,{sm:7},n.a.createElement(xe,null)),n.a.createElement(I.a,{sm:5,className:"mb-2 chat-sessions-by-country"},n.a.createElement(Q,null))),n.a.createElement(C.a,null,n.a.createElement(I.a,{sm:12},n.a.createElement(qe,null))),n.a.createElement(C.a,null,n.a.createElement(I.a,{sm:12},n.a.createElement($e,null))),n.a.createElement(dt,null),n.a.createElement(C.a,null,n.a.createElement(I.a,{sm:12},n.a.createElement(yt,null))),n.a.createElement(C.a,null,n.a.createElement(I.a,{sm:12},n.a.createElement(Xt,null))))}}}]);