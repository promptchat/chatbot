(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"1QrW":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("sPdi"),s=n("jrRI"),c=n("3OM0"),u=n("L3zb"),m=n("TSYQ"),p=n.n(m);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function f(e){var t,n,a=e.id,i=e.label,l=e.errors,m=e.name,f=e.onChange,v=e.className,h=b(e,["id","label","errors","name","onChange","className"]);return r.a.createElement(s.a,{className:p()(v)},r.a.createElement(c.a,{htmlFor:a},i),r.a.createElement(u.a,d({id:a,name:m,type:"text",onChange:function(e){var t=e.target.value;/^[0-9]*$/.test(t)&&f(e)}},h,{invalid:!!(null===(t=l[m])||void 0===t?void 0:t.length)})),(null===(n=l[m])||void 0===n?void 0:n.length)?r.a.createElement(o.a,{errors:l[m]}):null)}f.propTypes={onChange:l.a.func.isRequired,errors:l.a.object.isRequired,id:l.a.oneOfType([l.a.string,l.a.number]),label:l.a.any.isRequired,name:l.a.string.isRequired,className:l.a.string},t.a=r.a.memo(f)},3:function(e,t){},"42tS":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),i=n("9Koi"),l=n("dbgk"),o=n("TtP3"),s=n("MwQV"),c=n("h4JF"),u=n("rpa7"),m=n("gQBd"),p=n("17x9"),d=n.n(p),b=n("55Ip"),f=n("BLzl"),v=n("/kxI");function h(e){var t=e.result,n=Object(i.a)().t;return r.a.createElement(f.a,{className:"clients-import mb-4 shadow"},r.a.createElement(v.a,{className:"rounded px-4 clients-import-result"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"title pb-2",dangerouslySetInnerHTML:{__html:n("clients.import-csv.total-rows-count",{count:'<span class="value">'.concat(t.total_rows_count,"</span>")})}}),r.a.createElement("div",{className:"title pb-2",dangerouslySetInnerHTML:{__html:n("clients.import-csv.imported-clients-count",{count:'<span class="value">'.concat(t.imported_clients_count,"</span>")})}}),r.a.createElement("div",{className:"title pb-2",dangerouslySetInnerHTML:{__html:n("clients.import-csv.import-status",{importStatus:'<span class="value">'+n("clients.import-csv.statuses.".concat(t.status))+"</span>"})}}),r.a.createElement("div",{className:"my-4"},r.a.createElement(b.a,{to:"/clients/1",className:"btn btn-success"},n("clients.import-csv.back-to-clients-btn"))))))}h.propTypes={result:d.a.shape({total_rows_count:d.a.number.isRequired,imported_clients_count:d.a.number.isRequired,status:d.a.number.isRequired}).isRequired};var g=h,y=n("Mpt7"),O=n("Buep"),j=n("nh1N"),E=n("sPdi"),w=n("jrRI"),C=n("3OM0"),R=n("TSYQ"),N=n.n(R),S=n("ma3e"),q=n("yzbm");function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e){var t,n,a=e.id,l=e.label,o=e.errors,s=e.name,c=e.className,u=e.value,m=e.setFieldValue,p=e.types,d=N()({"is-invalid":Boolean(o&&(null===(t=o[s])||void 0===t?void 0:t.length))}),b=Object(i.a)().t;return r.a.createElement(w.a,{className:N()(c)},r.a.createElement(C.a,{htmlFor:a,className:N()(d)},"function"==typeof l?l():l),r.a.createElement(q.a,{onDrop:function(e){m(s,e[0])},accept:p.length?p:null},(function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement("section",{className:N()("dropzone-class")},r.a.createElement("div",_({},t(),{className:"load-img d-flex justify-content-center flex-column align-items-center p-3"}),r.a.createElement("input",_({},n(),{multiple:!1})),r.a.createElement(S.c,{className:"icon-size-40 color-gray"}),r.a.createElement("div",{className:"load-img-tip mt-3 text-center"},b("common.drag-and-drop"))))})),u?r.a.createElement("div",{className:N()("position-relative file-preview mr-4",d)},u.name,r.a.createElement("button",{type:"button",className:"btn btn-link no-shadow position-absolute file-preview-close-btn py-0 px-1",onClick:function(){m(s,null)}},r.a.createElement(S.R,{className:"color-red position-relative"}))):null,o&&(null===(n=o[s])||void 0===n?void 0:n.length)?r.a.createElement(E.a,{errors:o[s]}):null)}P.propTypes={errors:d.a.object,id:d.a.oneOfType([d.a.string,d.a.number]),label:d.a.any,name:d.a.string.isRequired,className:d.a.string,value:d.a.object,setFieldValue:d.a.func.isRequired,types:d.a.array};var x=r.a.memo(P),I=n("6Rhw"),V=n("1QrW");function k(e){var t=e.item,n=e.onItemChange,a=e.onRemove,l=e.errors,o=e.index,s=Object(i.a)().t;return r.a.createElement("div",{className:"d-flex flex-sm-nowrap flex-wrap align-items-end"},r.a.createElement(I.a,{className:"mr-sm-3 mr-2",id:"variables.".concat(o,".name"),name:"variables.".concat(o,".name"),label:s("clients.import-csv.variable-name-label"),placeholder:s("clients.import-csv.variable-name-placeholder"),value:t.get("name"),onChange:function(e){n(t.set("name",e.target.value))},errors:l}),r.a.createElement(V.a,{className:"mr-sm-3 mr-2",id:"variables.".concat(o,".position"),name:"variables.".concat(o,".position"),label:s("clients.import-csv.variable-position-label"),placeholder:s("clients.import-csv.variable-position-placeholder"),value:t.get("position"),onChange:function(e){n(t.set("position",e.target.value))},errors:l}),r.a.createElement("button",{className:"btn btn-link no-shadow p-sm-2 py-2 px-1 mb-3",type:"button",onClick:a},r.a.createElement(S.T,{className:"color-gray icon-size-20"})))}k.propTypes={item:d.a.shape({name:d.a.string,position:d.a.string,get:d.a.func.isRequired,set:d.a.func.isRequired}),onItemChange:d.a.func.isRequired,onRemove:d.a.func.isRequired,errors:d.a.object,index:d.a.number};var T=k,F=n("sOKU"),A=n("x37D"),M=n("6jMY"),D=n("XRgj"),Q=Object(M.b)(D.b);function B(e){var t=e.handleIntegrationChange,n=e.handleChangeCsv,a=e.handleClickAddVariable,l=e.handleVariableChange,o=e.handleClickRemoveVariable,s=e.handleChange,c=e.handleBlur,u=e.values,m=e.errors,p=e.isSubmitting,d=Object(i.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{className:"limiter",label:d("clients.import-csv.integration-label"),name:"integration_id",value:u.integration_id,setFieldValue:t,loadOptions:Q,loadValue:j.a,errors:m,isClearable:!0}),u.integration_id?r.a.createElement(x,{name:"csv",label:d("clients.import-csv.file-label"),value:u.csv,setFieldValue:n,errors:m,types:[".csv"]}):null,u.csv?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{className:"limiter",id:"phone_number_position",name:"phone_number_position",label:d("clients.import-csv.phone-position-label"),placeholder:d("clients.import-csv.phone-position-placeholder"),value:u.phone_number_position,onChange:s,onBlur:c,errors:m}),r.a.createElement("div",{className:"limiter"},u.variables.map((function(e,t){return r.a.createElement(T,{key:t,index:t,item:e,onItemChange:function(e){l(t,e)},onRemove:function(){return o(t)},errors:m})}))),r.a.createElement("div",null,r.a.createElement(F.a,{className:"mb-3",type:"button",onClick:a},d("clients.import-csv.add-variable-btn")))):null,r.a.createElement(A.a,{className:"pt-2 px-4 mt-3 mb-sm-4 mb-5",disabled:p},d("common.saveBtnText")))}B.propTypes={handleIntegrationChange:d.a.func.isRequired,handleChangeCsv:d.a.func.isRequired,handleClickAddVariable:d.a.func.isRequired,handleVariableChange:d.a.func.isRequired,handleClickRemoveVariable:d.a.func.isRequired,handleChange:d.a.func.isRequired,handleBlur:d.a.func.isRequired,values:d.a.object.isRequired,errors:d.a.object.isRequired,isSubmitting:d.a.bool};var z=B,L=n("nc57");function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function K(e){var t=e.handleSubmit;return r.a.createElement(f.a,{className:"clients-import mb-4 shadow"},r.a.createElement(v.a,{className:"rounded px-4"},r.a.createElement(L.a,{initialValues:{integration_id:null,csv:null,phone_number_position:"",variables:Object(y.a)([])},handleSubmit:t,renderForm:function(e){var t=e.values,n=e.setFieldValue,a=e.errors,i=e.setErrors,l=H(e,["values","setFieldValue","errors","setErrors"]);return r.a.createElement(z,Y({},l,{values:t,setErrors:i,errors:a,handleIntegrationChange:function(e,t){n(e,t),t||(n("csv",null),n("phone_number_position",""),n("variables",Object(y.a)([])))},handleChangeCsv:function(e,t){n(e,t),t||(n("phone_number_position",""),n("variables",Object(y.a)([])))},handleClickAddVariable:function(){n("variables",t.variables.push(Object(y.b)({name:"",position:""})))},handleVariableChange:function(e,a){n("variables",t.variables.set(e,a))},handleClickRemoveVariable:function(e){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a);r.variables&&delete r.variables,i(r),n("variables",t.variables.delete(e))}}))}})))}K.propTypes={handleSubmit:d.a.func.isRequired};var $=K;function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){var e=Object(i.a)().t,t=W(Object(a.useState)(null),2),n=t[0],p=t[1],d=W(Object(a.useState)(null),2),b=d[0],f=d[1],v=Object(u.a)().id;Object(a.useEffect)((function(){m.a.private("App.Models.User.".concat(v)).listen("ClientsImportedFromCsv",(function(e){f(e)}))}),[v]);var h=n&&b&&(null==n?void 0:n.id)===(null==b?void 0:b.id);return r.a.createElement(o.a,null,r.a.createElement(l.a,null,e("clients.import-csv.title")),n?null:r.a.createElement($,{handleSubmit:function(e,t){var n=t.setSubmitting,a=t.setErrors,r=e.variables.toJS(),i=new FormData;for(var l in i.set("integration_id",e.integration_id),i.set("csv",e.csv),i.set("phone_number_position",e.phone_number_position),r)i.set("variables[".concat(l,"][name]"),r[l].name),i.set("variables[".concat(l,"][position]"),r[l].position);s.a.call("post","/methods/clients/import-csv",{},i).data((function(e){p(e)})).validation((function(e,t){a(t),n(!1)})).catch((function(){n(!1)}))}}),n&&!h?r.a.createElement(c.a,null):null,h?r.a.createElement(g,{result:b}):null)}},"6jMY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n("MwQV");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return new Promise((function(n){var r={q:t};e&&(r.type=e),a.a.call("get","/methods/integrations/search",r).data((function(e){n(e.map((function(e){return{label:e.name,value:e.id,integration:e}})))}))}))}}var i=r();t.a=i},Buep:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n("q1tI"),r=n.n(a),i=n("QDav"),l=n("jrRI"),o=n("3OM0"),s=n("TSYQ"),c=n.n(s),u=n("sPdi"),m=n("17x9"),p=n.n(m),d=n("9Koi");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={control:function(e){return h(h({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function O(e){var t,n,s=e.id,m=e.label,p=e.errors,f=e.loadOptions,v=e.loadValue,h=e.name,g=e.setFieldValue,O=e.value,j=e.className,E=e.placeholder,w=e.isClearable,C=b(Object(a.useState)(null),2),R=C[0],N=C[1],S=Object(d.a)().t;return Object(a.useEffect)((function(){O&&!R&&v(O).then((function(e){N(e)}))}),[v,R,O]),r.a.createElement(l.a,{className:c()(j)},r.a.createElement(o.a,{htmlFor:s},m),r.a.createElement(i.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:f,onChange:function(e){g(h,e?e.value:null),N(e)},value:O?R:null,isClearable:w,className:c()({"is-invalid":!!(null===(t=p[h])||void 0===t?void 0:t.length)}),placeholder:E||S("common.default-select-placeholder"),styles:y}),(null===(n=p[h])||void 0===n?void 0:n.length)?r.a.createElement(u.a,{errors:p[h]}):null)}O.defaultProps={isClearable:!0},O.propTypes={errors:p.a.object.isRequired,id:p.a.oneOfType([p.a.string,p.a.number]),value:p.a.oneOfType([p.a.string,p.a.number]),label:p.a.any.isRequired,name:p.a.string.isRequired,setFieldValue:p.a.func.isRequired,loadOptions:p.a.func.isRequired,loadValue:p.a.func.isRequired,className:p.a.string,placeholder:p.a.string,isClearable:p.a.bool}},dbgk:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i);function o(e){var t=e.children;return r.a.createElement("h1",{className:"title-main mb-3"},t)}o.propTypes={children:l.a.any.isRequired}},gQBd:function(e,t,n){"use strict";var a=n("Vjiq");window.io=n("gFX4");var r=new a.a({broadcaster:"socket.io",host:window.location.origin});t.a=r},nh1N:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/integrations/".concat(e)).data((function(e){t({label:e.name,value:e.id,service:e.service})}))}))}}}]);