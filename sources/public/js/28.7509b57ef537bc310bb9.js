/*! For license information please see 28.7509b57ef537bc310bb9.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[28,17],{"19iC":function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n("rpa7"),r=n("J3gs"),i=n("YOdH"),o=n("gmZo"),l=n("q1tI");function s(){return function(e){return!e||e.is_am_pm?"hh:mm a":"HH:mm"}(Object(a.a)())}function c(){var e=Object(i.a)(),t=s();return Object(l.useCallback)((function(n){return Object(o.a)(1e3*n).tz(e).format(t)}),[t,e])}function u(){var e=Object(r.a)();return s()+" "+e}function d(){var e=Object(i.a)(),t=u();return Object(l.useCallback)((function(n){return Object(o.a)(1e3*n).tz(e).format(t)}),[t,e])}},"1QrW":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("sPdi"),s=n("jrRI"),c=n("3OM0"),u=n("L3zb"),d=n("TSYQ"),m=n.n(d);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h(e){var t,n,a=e.id,i=e.label,o=e.errors,d=e.name,h=e.onChange,v=e.className,b=e.phone,g=void 0!==b&&b,y=p(e,["id","label","errors","name","onChange","className","phone"]);return r.a.createElement(s.a,{className:m()(v)},r.a.createElement(c.a,{htmlFor:a},i),r.a.createElement(u.a,f({id:a,name:d,type:"text",onChange:function(e){g&&e.target.value&&"+"!==e.target.value[0]&&(e.target.value="+"+e.target.value);var t=e.target.value;(g?/^\+[0-9]*$/:/^[0-9]*$/).test(t)&&h(e)}},y,{invalid:!!(null===(t=o[d])||void 0===t?void 0:t.length)})),(null===(n=o[d])||void 0===n?void 0:n.length)?r.a.createElement(l.a,{errors:o[d]}):null)}h.propTypes={onChange:o.a.func.isRequired,errors:o.a.object.isRequired,id:o.a.oneOfType([o.a.string,o.a.number]),label:o.a.any.isRequired,name:o.a.string.isRequired,className:o.a.string,phone:o.a.bool},t.a=r.a.memo(h)},"2Te1":function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),i=n("q1tI"),o=n.n(i),l=n("17x9"),s=n.n(l),c=n("TSYQ"),u=n.n(c),d=n("33Jr"),m={color:s.a.string,pill:s.a.bool,tag:d.q,innerRef:s.a.oneOfType([s.a.object,s.a.func,s.a.string]),children:s.a.node,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,n=e.cssModule,i=e.color,l=e.innerRef,s=e.pill,c=e.tag,m=Object(r.a)(e,["className","cssModule","color","innerRef","pill","tag"]),f=Object(d.m)(u()(t,"badge","badge-"+i,!!s&&"badge-pill"),n);return m.href&&"span"===c&&(c="a"),o.a.createElement(c,Object(a.a)({},m,{className:f,ref:l}))};f.propTypes=m,f.defaultProps={color:"secondary",pill:!1,tag:"span"},t.a=f},3:function(e,t){},"6jMY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n("MwQV");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return new Promise((function(n){var r={q:t};if(e&&Array.isArray(e)&&e.length)for(var i in e)r["type[".concat(i,"]")]=e[i];else e&&(r.type=e);a.a.call("get","/methods/integrations/search",r).data((function(e){n(e.map((function(e){return{label:e.name,value:e.id,integration:e}})))}))}))}}var i=r();t.a=i},"6rqU":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("sOKU");function s(e){var t=e.fields,n=e.validate,a=e.nextStep,i=e.allowedSteps,o=e.changeStep,s=e.content;if(!i.includes(a))return null;return r.a.createElement(l.a,{className:"pt-2 px-4 my-4",type:"button",color:"primary",onClick:function(){n?n(t).then((function(){return o(a)})):o(a)}},s?s():"Next")}s.propTypes={validate:o.a.func,fields:o.a.array,allowedSteps:o.a.array.isRequired,changeStep:o.a.func.isRequired,nextStep:o.a.string.isRequired,content:o.a.func}},"6ukn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/tags/search-company-tags",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},"76xo":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(){var e=r(Object(a.useState)(!1),2),t=e[0],n=e[1];return[t,function(){var e,t;e=window.integrationScriptUse,(t=document.createElement("textarea")).value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),n(!0),setTimeout((function(){n(!1)}),1500)}]}},"7BfX":function(e,t,n){!function(e,t){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var a={delta:10,preventDefaultTouchmoveEvent:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0},r={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]};function i(e,t){if(0===t)return e;var n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}e.DOWN="Down",e.LEFT="Left",e.RIGHT="Right",e.UP="Up",e.useSwipeable=function(e){var o=e.trackMouse,l=t.useRef(n({},r)),s=t.useRef(n({},a));s.current=n({},a,e);var c=t.useMemo((function(){return function(e,t){var a=function(t){t&&"touches"in t&&t.touches.length>1||e((function(e,a){a.trackMouse&&(document.addEventListener("mousemove",o),document.addEventListener("mouseup",c));var l="touches"in t?t.touches[0]:t,s=i([l.clientX,l.clientY],a.rotationAngle);return n({},e,r,{initial:[].concat(s),xy:s,start:t.timeStamp||0})}))},o=function(t){e((function(e,a){if("touches"in t&&t.touches.length>1)return e;var r="touches"in t?t.touches[0]:t,o=i([r.clientX,r.clientY],a.rotationAngle),l=o[0],s=o[1],c=l-e.xy[0],u=s-e.xy[1],d=Math.abs(c),m=Math.abs(u),f=(t.timeStamp||0)-e.start,p=Math.sqrt(d*d+m*m)/(f||1),h=[c/(f||1),u/(f||1)];if(d<a.delta&&m<a.delta&&!e.swiping)return e;var v=function(e,t,n,a){return e>t?n>0?"Right":"Left":a>0?"Down":"Up"}(d,m,c,u),b={absX:d,absY:m,deltaX:c,deltaY:u,dir:v,event:t,first:e.first,initial:e.initial,velocity:p,vxvy:h};a.onSwiping&&a.onSwiping(b);var g=!1;return(a.onSwiping||a.onSwiped||"onSwiped"+v in a)&&(g=!0),g&&a.preventDefaultTouchmoveEvent&&a.trackTouch&&t.cancelable&&t.preventDefault(),n({},e,{first:!1,eventData:b,swiping:!0})}))},l=function(t){e((function(e,a){var i;if(e.swiping&&e.eventData){i=n({},e.eventData,{event:t}),a.onSwiped&&a.onSwiped(i);var o="onSwiped"+i.dir;o in a&&a[o](i)}else a.onTap&&a.onTap({event:t});return n({},e,r,{eventData:i})}))},s=function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c)},c=function(e){s(),l(e)},u=function(e,t){var n=function(){};if(e&&e.addEventListener){var r=[["touchstart",a],["touchmove",o],["touchend",l]];r.forEach((function(n){var a=n[0],r=n[1];return e.addEventListener(a,r,{passive:t})})),n=function(){return r.forEach((function(t){var n=t[0],a=t[1];return e.removeEventListener(n,a)}))}}return n},d={ref:function(t){null!==t&&e((function(e,a){if(e.el===t)return e;var r={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),r.cleanUpTouch=void 0),a.trackTouch&&t&&(r.cleanUpTouch=u(t,!a.preventDefaultTouchmoveEvent)),n({},e,{el:t},r)}))}};return t.trackMouse&&(d.onMouseDown=a),[d,u]}((function(e){return l.current=e(l.current,s.current)}),{trackMouse:o})}),[o]),u=c[0],d=c[1];return l.current=function(e,t,a){var r={};return!t.trackTouch&&e.cleanUpTouch?(e.cleanUpTouch(),r.cleanUpTouch=void 0):t.trackTouch&&!e.cleanUpTouch&&e.el&&(r.cleanUpTouch=a(e.el,!t.preventDefaultTouchmoveEvent)),n({},e,r)}(l.current,s.current,d),u}}(t,n("q1tI"))},"8WGv":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("sPdi"),s=n("jrRI"),c=n("3OM0"),u=n("Cs6D"),d=n("TSYQ"),m=n.n(d),f=n("9Koi");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={control:function(e){return h(h({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function g(e){var t,n,a=e.id,i=e.label,o=e.errors,d=e.name,p=e.setFieldValue,h=e.options,v=e.value,g=e.className,y=e.placeholder,_=e.isClearable,E=e.isDisabled,w=Object(f.a)().t,O=h.findIndex((function(e){return e.value===v})),S=-1===O?null:h[O];return r.a.createElement(s.a,{className:m()(g)},r.a.createElement(c.a,{htmlFor:a},i),r.a.createElement(u.a,{id:a,name:d,isDisabled:E,onChange:function(e){return p(d,e?e.value:null)},options:h,value:S,isClearable:_,className:m()("select-field",{"is-invalid":!!(null===(t=o[d])||void 0===t?void 0:t.length)}),placeholder:y||w("common.default-select-placeholder"),styles:b}),(null===(n=o[d])||void 0===n?void 0:n.length)?r.a.createElement(l.a,{errors:o[d]}):null)}g.defaultProps={isClearable:!0},g.propTypes={errors:o.a.object.isRequired,id:o.a.oneOfType([o.a.string,o.a.number]),value:o.a.oneOfType([o.a.string,o.a.number]),label:o.a.any.isRequired,name:o.a.string.isRequired,setFieldValue:o.a.func.isRequired,options:o.a.array.isRequired,className:o.a.string,placeholder:o.a.string,isClearable:o.a.bool,isDisabled:o.a.bool},t.a=r.a.memo(g)},"A+wq":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ta}));var a,r=n("q1tI"),i=n.n(r),o=n("Ty5D"),l=n("TtP3"),s=n("17x9"),c=n.n(s),u=n("rpa7"),d=n("/MKj"),m=n("7yic"),f=n("MwQV"),p=n("jNYE"),h=n("tH7n"),v=n("YOqN"),b=n("sKTO");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(g(a={},b.a,"allClients"),g(a,b.d,"onlineClients"),g(a,b.e,"skipped"),g(a,b.b,"liveClients"),g(a,b.c,"myChats"),a),_=function(e){return{type:m.a.CLIENTS_LOADING,payload:{list:e}}},E=function(e,t){return{type:m.a.CLIENTS_LOADING_ERROR,payload:{list:e,errors:t}}},w=function(e,t,n){return function(a,r){var i,o=r().auth.getIn(["user","departments"]).map((function(e){return e.id}));t.department_id&&!o.includes(t.department_id)?(a((i=e,{type:m.a.DELETE_CLIENT,payload:{id:i}})),h.b.push(v.a.homeRoute.getLink(b.a))):r().liveChat.getIn(["clientsMap",e.toString()])||(a(j()),S(y[n],!0)(a,r)),a(A(e,t))}},O=function(e,t){return{type:m.a.CLIENTS_LOADED,payload:{list:e,data:t}}},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){n(_(e));var r=t?0:a().liveChat.getIn([e,"ids"]).size;return f.a.call("get","/methods/live-chat/clients-list",{offset:r,list:e}).data((function(t){n(O(e,t))})).catch((function(t,a){n(E(e,a))}))}},j=function(){return function(e){return f.a.call("get","/methods/live-chat/meta").data((function(t){e({type:m.a.META,payload:{data:t}})}))}},C=function(e){return function(t,n){e?n().liveChat.getIn(["clientsMap",e.toString()])?t({type:m.a.SET_ACTIVE_CLIENT,payload:e}):f.a.call("get","/methods/live-chat/get-client/".concat(e)).data((function(e){t({type:m.a.SET_LOADED_ACTIVE_CLIENT,payload:e})})):t({type:m.a.SET_ACTIVE_CLIENT,payload:e})}},A=function(e,t){return{type:m.a.UPDATE_CLIENT_DATA,payload:{clientId:e,data:t}}},T=function(e){return function(t,n){var a=n().liveChat,r=a.getIn(["oldClientMessages",0,"id"]);if(a.get("oldMessagesHasMore")){t({type:m.a.CLIENT_MESSAGES_LOADING,payload:null});var i={};return r&&(i.lastId=r),f.a.call("get","/methods/live-chat/get-messages/".concat(e),i).data((function(e){var n;t((n=e,{type:m.a.CLIENT_MESSAGES_LOADED,payload:n}))}))}}},k=n("05OR"),x=n("HlzF");function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function R(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.useState)(null),a=N(n,2),i=a[0],o=a[1];function l(){var n=new x.Howl({src:[e]});t&&n.loop();var a=n.play();o((function(){return function(){return n.stop(a)}}))}var s=function(){return setTimeout(l,1e3)};return[s,i]}var q=n("gQBd");function M(){return Object(d.e)((function(e){return e.liveChat.getIn(["clientsMap",e.liveChat.get("activeClientId")])}))}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function D(e){var t=e.setActiveClientChannel,n=e.openedChatId,a=e.children,l=e.updateClientsLastMessageDate,s=e.addClientAskingLivechat,c=e.handleVisitorGotOperator,m=e.openChatWithClient,f=e.updateClient,p=e.handleDepartmentChanged,h=e.loadClients,g=e.needPreloadClients,y=e.addNewMessage,_=e.handleConversationStopped,E=e.handleClientDidNotGetOperator,w=e.clientSessionOpened,O=e.clientSessionClosed,S=e.tab,j=Object(u.a)();Object(r.useEffect)((function(){n?g?h().then((function(){m(n)})):m(n):m(null)}),[n]),function(e){var t=Object(d.e)((function(e){return!!e.liveChat.getIn(["meta","liveClients"])})),n=P(R("/audio/bring.mp3",!0),2),a=n[0],i=n[1],o=e.user_notifications_setting.site_long_notifications&&t;Object(r.useEffect)((function(){o?a():i&&i()}),[o]),Object(r.useEffect)((function(){return function(){i&&i()}}),[i])}(j);var C=P(R("/audio/notification.mp3"),1)[0],A=M(),T=null==A?void 0:A.id.toString(),x=function(){var e=[];return j.departments.forEach((function(t){e.push(q.a.private("Department.".concat(t.id)))})),e.push(q.a.private("Company.".concat(j.company_id,".Department"))),e},N=Object(o.h)(),I=function(e){T&&+T==+e.id&&(e.assign_operator_id===j.id||e.operator_id===j.id?N.push(v.a.chatRoute.getLink(b.c,e.id)):N.push(v.a.homeRoute.getLink(S)))},L=j.id.toString();Object(r.useEffect)((function(){var e=x();return e.forEach((function(e){e.listen("VisitorAskingForLivechat",(function(e){var t=e.client;s(t),I(t)})).listen("VisitorGotLivechatOperator",(function(e){var t=e.client;c(t,L),I(t)})).listen("ClientDataChanged",(function(e){var t=e.clientId,n=e.data;f(t,n)})).listen("ClientDepartmentChanged",(function(e){var t=e.clientId,n=e.data;p(t,n,S)})).listen("VisitorDidNotGetOperator",(function(e){var t=e.client;E(t)})).listen("ClientSessionOpened",(function(e){var t=e.client;w(t)})).listen("ClientSessionClosed",(function(e){var t=e.client,n=e.hasOtherSessions;O(t,n)}))})),function(){e.forEach((function(e){e.stopListening("VisitorAskingForLivechat").stopListening("VisitorGotLivechatOperator").stopListening("ClientDataChanged").stopListening("ClientDepartmentChanged").stopListening("StopConversationWithClient").stopListening("VisitorDidNotGetOperator").stopListening("ClientSessionOpened").stopListening("ClientSessionClosed")}))}}),[L]);var D=j.user_notifications_setting.site_long_notifications,F=j.user_notifications_setting.site_short_notifications;return Object(r.useEffect)((function(){var e=x();return e.forEach((function(e){e.listen("ClientNewMessage",(function(e){var t,n=e.message,a=e.client;n.client=a,l(n),f(a.id,{unread_messages_count:a.unread_messages_count});var r=Boolean(n.user&&(null===(t=n.user)||void 0===t?void 0:t.id.toString())!==L.toString()),i=n.type===k.f;F&&(i||r)&&C()})).listen("StopConversationWithClient",(function(e){var t=e.clientId;_(t),T&&+T==+t&&setTimeout((function(){N.push(v.a.homeRoute.getLink(S))}),0)}))})),function(){e.forEach((function(e){e.stopListening("ClientNewMessage")}))}}),[L,T,D,F]),Object(r.useEffect)((function(){if(T){var e=q.a.private("ClientInternal.".concat(T));return e.listen("ClientNewMessage",(function(e){var t=e.message,n=e.client;t.client=n,y(t)})),t(e),function(){e.stopListening("ClientNewMessage"),t(null)}}}),[T,D,F]),i.a.createElement(i.a.Fragment,null,a)}D.propTypes={tab:c.a.string,openedChatId:c.a.string,needPreloadClients:c.a.bool.isRequired,updateClientsLastMessageDate:c.a.func.isRequired,addClientAskingLivechat:c.a.func.isRequired,handleVisitorGotOperator:c.a.func.isRequired,openChatWithClient:c.a.func.isRequired,updateClient:c.a.func.isRequired,handleDepartmentChanged:c.a.func.isRequired,loadClients:c.a.func.isRequired,addNewMessage:c.a.func.isRequired,handleConversationStopped:c.a.func.isRequired,handleClientDidNotGetOperator:c.a.func.isRequired,clientSessionOpened:c.a.func.isRequired,clientSessionClosed:c.a.func.isRequired,setActiveClientChannel:c.a.func.isRequired,children:c.a.any.isRequired};var F=Object(d.c)((function(e){var t;return{needPreloadClients:!(null===(t=e.liveChat.get("allClients","ids"))||void 0===t?void 0:t.size)}}),(function(e){return{openChatWithClient:function(t){return e(C(t))},updateClientsLastMessageDate:function(t){e(function(e){return{type:m.a.CLIENTS_UPDATE_LAST_MESSAGE,payload:e}}(t))},addClientAskingLivechat:function(t){e(function(e){return function(t,n){t(j());var a=n().auth.getIn(["user","id"]);return e.assign_operator_id||e.operator_id?t({type:m.a.CLIENTS_GOT_OPERATOR,payload:{client:e,operatorId:a,isCurrentOperator:e.assign_operator_id.toString()===a.toString()||e.operator_id.toString()===a.toString()}}):t({type:m.a.CLIENTS_ADD_ASKING_LIVECHAT,payload:e})}}(t))},handleVisitorGotOperator:function(t,n){e(function(e){var t=e.client,n=e.operatorId;return function(e){return e(j()),e({type:m.a.CLIENTS_GOT_OPERATOR,payload:{client:t,operatorId:n,isCurrentOperator:t.operator_id.toString()===n.toString()}})}}({client:t,operatorId:n}))},handleClientDidNotGetOperator:function(t){e(function(e){return function(t){return t(j()),t({type:m.a.CLIENTS_DID_NOT_GET_OPERATOR,payload:e})}}(t))},handleConversationStopped:function(t){e(function(e){return function(t){return t(j()),t({type:m.a.CONVERSATION_STOPPED,payload:e})}}(t))},updateClient:function(t,n,a){e(A(t,n,a))},handleDepartmentChanged:function(t,n,a){e(w(t,n,a))},loadClients:function(t){return e(S(t))},addNewMessage:function(t){e(function(e){return{type:m.a.CLIENT_NEW_MESSAGE,payload:e}}(t))},clientSessionOpened:function(t){var n;e((n=t,function(e){return e(j()),e({type:m.a.ONLINE_VISITOR_NEW_SESSION_OPENED,payload:n})}))},clientSessionClosed:function(t,n){e(function(e,t){return function(n){return n(j()),n({type:m.a.ONLINE_VISITOR_SESSION_CLOSED,payload:{client:e,hasMoreSessions:t}})}}(t,n))}}}))(D),B=n("9Koi"),V=function(){var e=Object(B.a)().t;return i.a.createElement("div",{className:"w-100 text-large text-center align-self-center"},e("liveChat.chat-window.select-chat-placeholder"))},H=n("6Rhw"),z=n("sOKU"),U=n("TSYQ"),G=n.n(U);function W(e){var t=e.children,n=e.className;return i.a.createElement("div",{className:G()("sidebar-block",n)},t)}W.propTypes={children:c.a.any.isRequired,className:c.a.string};var Q=W,$=n("ma3e");function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function K(e){var t=e.renderForm,n=e.renderView,a=Y(Object(r.useState)(!1),2),o=a[0],l=a[1],s=function(){return l((function(e){return!e}))};return i.a.createElement(Q,null,o?t(s):i.a.createElement("div",{className:"d-flex align-items-baseline justify-content-between"},n(),i.a.createElement(z.a,{onClick:s,color:"link",className:"no-shadow text-dec-none py-0 px-0"},i.a.createElement($.x,{className:"icon-size-20 color-gray position-relative mb-1"}))))}K.propTypes={renderForm:c.a.func.isRequired,renderView:c.a.func.isRequired};var J=n("nc57"),Z=n("x37D");function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){var t=e.clientId,n=e.fieldName,a=e.fieldValue,r=e.renderField,o=e.renderView,l=e.values,s=void 0===l?{}:l,c=Object(B.a)().t;return i.a.createElement(K,{key:t,renderView:o,renderForm:function(e){return i.a.createElement(J.a,{initialValues:te(ne({},n,a),s),handleSubmit:function(a,r){(function(e,a){var r=a.setSubmitting,i=a.setErrors;return f.a.call("post","/methods/clients/".concat(t),{},te(ne({},n,e[n]),e)).validation((function(e,t){i(t),r(!1)})).catch((function(){r(!1)}))})(a,r).then(e)},renderForm:function(t){var n=t.handleChange,a=t.handleBlur,o=t.values,l=t.errors,s=t.isSubmitting,u=t.setFieldValue;return i.a.createElement("div",null,r({handleChange:n,handleBlur:a,values:o,errors:l,setFieldValue:u}),i.a.createElement(Z.a,{className:"mr-3 mb-2",disabled:s},c("common.saveBtnText")),i.a.createElement(z.a,{className:"mb-2",onClick:e},c("common.cancelBtnText")))}})}})}ae.propTypes={clientId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,fieldName:c.a.string.isRequired,fieldValue:c.a.any,renderField:c.a.func.isRequired,renderView:c.a.func.isRequired,values:c.a.object};var re=ae,ie=n("1QrW"),oe=n("2Te1"),le=n("8WGv");function se(e){var t=e.client,n=Object(B.a)().t,a=t.name,o=t.is_blocked,l=t.variables;l.is_blocked=o;var s=Object(u.a)().isCompanyAdministrator,c=Object(r.useCallback)((function(){return i.a.createElement("div",null,i.a.createElement("span",null,a)," ",o?i.a.createElement(oe.a,{color:"danger",className:"d-inline-flex align-items-center align-top"},i.a.createElement("span",{className:"blocked-text"},n("clients.is_blocked.".concat(o)))):null,i.a.createElement("br",null),l.first_name," ",l.last_name," ",l.phone_number)}),[a,l,o]),d=Object(r.useCallback)((function(e){var t=e.handleChange,a=e.setFieldValue,r=e.handleBlur,o=e.values,l=e.errors;return i.a.createElement(i.a.Fragment,null,i.a.createElement(H.a,{className:"pt-0",id:"first_name",name:"first_name",label:n("liveChat.chat-window.details.first_name-label"),placeholder:n("liveChat.chat-window.details.first_name-placeholder"),type:"text",onChange:t,onBlur:r,value:o.first_name||"",errors:l}),i.a.createElement(H.a,{className:"pt-0",id:"last_name",name:"last_name",label:n("liveChat.chat-window.details.last_name-label"),placeholder:n("liveChat.chat-window.details.last_name-placeholder"),type:"text",onChange:t,onBlur:r,value:o.last_name||"",errors:l}),i.a.createElement(ie.a,{phone:!0,className:"pt-0",id:"phone_number",name:"phone_number",label:n("liveChat.chat-window.details.phone_number-label"),placeholder:n("liveChat.chat-window.details.phone_number-placeholder"),type:"text",onChange:t,onBlur:r,value:o.phone_number||"",errors:l}),s?i.a.createElement(le.a,{id:"is_blocked",name:"is_blocked",label:n("liveChat.chat-window.details.is_blocked-label"),placeholder:n("liveChat.chat-window.details.is_blocked-placeholder"),value:o.is_blocked,setFieldValue:a,options:[{label:n("clients.is_blocked.0"),value:0},{label:n("clients.is_blocked.1"),value:1}],errors:l}):null)}),[n]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(re,{clientId:t.id,fieldName:"name",fieldValue:a||"",renderView:c,renderField:d,values:l}))}se.propTypes={client:c.a.instanceOf(p.a).isRequired};var ce=n("T7vI");function ue(e){var t=e.variables,n=void 0===t?{}:t,a=Object(B.a)().t;return Object.values(n).fill(Boolean).length?i.a.createElement(Q,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.cb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.variables-title")),i.a.createElement(ce.a,{varClassName:"var-table",data:n})):null}ue.propTypes={variables:c.a.object.isRequired};var de=i.a.memo(ue),me=n("xilt"),fe=n("6ukn");function pe(e){var t=e.clientId,n=e.tags;n=n.map((function(e){return{label:e.name,value:e.id}}));var a=Object(B.a)().t,o=Object(r.useCallback)((function(e){var n=(e||[]).map((function(e){return{id:e.__isNew__?null:e.value,name:e.label}}));f.a.call("post","/methods/tags/add-client-tags/".concat(t),{},{tags:n})}),[t]);return i.a.createElement(Q,null,i.a.createElement("p",{className:"mb-2"},i.a.createElement($.sb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.tags-title")),i.a.createElement(me.a,{value:n,isMulti:!0,defaultOptions:!0,loadOptions:fe.a,onChange:o}))}pe.defaultValue={tags:c.a.array},pe.propTypes={clientId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,tags:c.a.array};var he=i.a.memo(pe),ve=n("3OM0");function be(e){var t=e.client,n=Object(B.a)().t,a=t.note,o=Object(r.useCallback)((function(e){var t=e.handleChange,a=e.handleBlur,r=e.values,o=e.errors;return i.a.createElement(H.a,{className:"pt-0",id:"note",name:"note",label:n("liveChat.chat-window.details.note-label"),placeholder:n("liveChat.chat-window.details.note-placeholder"),type:"textarea",onChange:t,onBlur:a,value:r.note||"",errors:o})}),[n]),l=Object(r.useCallback)((function(){return i.a.createElement("div",null,i.a.createElement(ve.a,{className:"client-info-title color-black pr-1",htmlFor:"note"},i.a.createElement($.eb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),n("liveChat.chat-window.details.note-title")),i.a.createElement("i",{className:"d-block"},a||n("liveChat.chat-window.details.note-empty-text")))}),[a,n]);return i.a.createElement(re,{clientId:t.id,fieldName:"note",fieldValue:a||"",renderView:l,renderField:o})}be.propTypes={client:c.a.instanceOf(p.a).isRequired};var ge=i.a.memo(be),ye=n("FN/A"),_e=n("83d4"),Ee=n("LEWT"),we=n("BAJy");function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function je(e){var t=e.clientId,n=e.departmentId,a=e.responsibleOperator,o=Object(u.a)(),l=Object(d.d)(),s=Object(B.a)().t,c=Oe(Object(r.useState)(1),2),m=c[0],p=c[1],h=Oe(Object(r.useState)(!!n),2),v=h[0],b=h[1];Object(r.useEffect)((function(){b(!!n)}),[n]);return a&&a.id===o.id?i.a.createElement("div",{className:"d-flex w-100 justify-content-between mb-2"},i.a.createElement("div",null,i.a.createElement("div",{className:"d-flex"},i.a.createElement(we.a,{id:"stop-live-chat",className:"d-inline-block",type:"checkbox",checked:!!m,onChange:function(e){p(+e.target.checked)}}),i.a.createElement("label",{htmlFor:"stop-live-chat",className:"stop-live-chat-label"},s("liveChat.chat-window.details.leave-chat-checkbox"))),i.a.createElement("div",{className:"d-flex"},i.a.createElement(we.a,{id:"remove-department",className:"d-inline-block",type:"checkbox",checked:!!v,onChange:function(e){b(+e.target.checked)}}),i.a.createElement("label",{htmlFor:"remove-department",className:"stop-live-chat-label"},s("liveChat.chat-window.details.remove-department-checkbox")))),i.a.createElement(z.a,{className:"leave-chat-btn",color:"outline-danger",onClick:function(){l(Object(Ee.c)("Do you really want leave conversation?")).then((function(){f.a.call("post","/methods/live-chat/stop-conversation/".concat(t),{},{stopLiveChat:m,removeDepartment:v}).then((function(){}))}))}},s("liveChat.chat-window.details.leave-chat-btn"))):null}je.propTypes={clientId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,departmentId:c.a.oneOfType([c.a.string,c.a.number]),responsibleOperator:c.a.instanceOf(_e.d)};var Ce=je,Ae=n("FCdT"),Te=n("F6sc"),ke=n("QDav"),xe=n("Lnxd");function Ne(e){return Object(xe.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"}}]})(e)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function qe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Pe=function(e){var t=e.innerProps,n=e.isDisabled,a=e.data;return n?null:i.a.createElement("div",Me({className:"d-flex align-items-center p-2"},t),i.a.createElement(ye.a,{showIsOnline:!0,user:a.user}),i.a.createElement("span",{className:"ml-2"},a.label))},Le=function(e){var t=e.getValue,n=qe(e,["getValue"]),a=Ie(t(),1)[0];return a?i.a.createElement("div",{className:"d-flex align-items-center p-2"},i.a.createElement(ye.a,{showIsOnline:!0,user:a.user}),i.a.createElement("span",{className:"ml-2"},a.label)):i.a.createElement(Ae.z.SingleValue,Me({},n,{getValue:t}))};function De(e){var t=e.operator,n=e.clientId,a=Object(B.a)().t;return i.a.createElement("div",null,i.a.createElement(Ne,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),i.a.createElement("label",null,a("liveChat.chat-window.assign")),i.a.createElement(ke.a,{components:{Option:function(e){return i.a.createElement(Pe,Me({},e,{isDisabled:e.value===(null==t?void 0:t.id)}))},SingleValue:Le},value:t?{value:t.id,label:t.name,user:t}:null,defaultOptions:!0,loadOptions:Te.a,onChange:function(e){var t=e.value;f.a.call("post","/methods/live-chat/set-assign-operator/".concat(n),{},{id:t})}}))}De.defaultValue={},De.propTypes={operator:c.a.instanceOf(_e.d),clientId:c.a.number.isRequired};var Fe=De;function Be(e){var t=e.operator,n=e.clientId,a=e.departmentId,r=e.assignOperator,o=Object(B.a)().t;return i.a.createElement(Q,{className:"responsible-operator"},i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.Fb,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),o("liveChat.chat-window.details.responsible-operator-title")),t?i.a.createElement("div",{className:"d-flex flex-wrap justify-content-between"},i.a.createElement("div",{className:"d-flex align-items-center mr-2 mb-2 w-100"},i.a.createElement(ye.a,{showIsOnline:!0,user:t}),i.a.createElement("span",{className:"ml-2"},t.name)),i.a.createElement(Ce,{clientId:n,responsibleOperator:t,departmentId:a})):i.a.createElement("div",{className:"text-center"},o("liveChat.chat-window.details.no-responsible-operator")),i.a.createElement(Fe,{operator:r,clientId:n}))}Be.propTypes={operator:c.a.instanceOf(_e.d),assignOperator:c.a.instanceOf(_e.d),clientId:c.a.number.isRequired,departmentId:c.a.number};var Ve=i.a.memo(Be);function He(e){var t=e.attachment,n=e.fullWidth;switch(t.type){case k.c:return i.a.createElement("div",{className:"py-2",style:{maxWidth:n?200:100}},i.a.createElement("img",{src:t.data.url,alt:"",className:"img-fluid"}));case k.d:return i.a.createElement("div",{className:"py-2",style:{maxWidth:n?300:150}},i.a.createElement("video",{controls:"controls",className:"chat-message-video"},i.a.createElement("source",{src:t.data.url})));case k.a:return i.a.createElement("div",{className:"py-2 chat-message-audio",style:{maxWidth:n?300:150}},i.a.createElement("audio",{controls:!0,src:t.data.url}));case k.b:return i.a.createElement("div",{className:"chat-message-file my-1"},i.a.createElement("a",{href:t.data.url},i.a.createElement($.C,{className:"icon-size-20 color-gray"})))}return null}He.propTypes={attachment:c.a.object,fullWidth:c.a.bool};var ze=He;function Ue(e){switch(e.type){case k.g:return null;case k.e:return"/img/default_chatbot_img.svg";case k.f:return"/img/default_user_image.svg"}}var Ge=n("BLzl"),We=n("/kxI");function Qe(e){var t=e.link,n=e.image_link,a=e.title,r=e.internal_product_id,o=e.catalog_id,l=e.description,s=e.quantity_to_sell_on_facebook,c=e.price,u=Object(B.a)().t;return i.a.createElement(Ge.a,{className:"m-1 mb-2 order-preview"},i.a.createElement(We.a,null,i.a.createElement("div",{className:"mb-3"},i.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},i.a.createElement("div",{className:"mr-4"},i.a.createElement("a",{href:t,target:"_blank",className:"product-img-link"},i.a.createElement("img",{src:n,alt:a,className:"img-responsive product-img"}))),i.a.createElement("div",{className:"product-info"},i.a.createElement("div",{title:r,"data-productid":r,"data-catalogid":o},i.a.createElement("b",null,a)),i.a.createElement("div",null,l),i.a.createElement("div",null,i.a.createElement("div",{className:"mr-2"},i.a.createElement("b",{className:"mr-2"},u("shop.product-context.quantity")),i.a.createElement("span",null,s)),i.a.createElement("span",null,i.a.createElement("b",{className:"mr-1"},u("shop.product-context.price")),i.a.createElement("span",null,c)))))),i.a.createElement("h5",{className:"d-flex justify-content-between"},i.a.createElement("span",null,u("shop.order.preview.price")),i.a.createElement("span",null,c))))}Qe.propTypes={link:c.a.string.isRequired,image_link:c.a.string.isRequired,title:c.a.string.isRequired,internal_product_id:c.a.string.isRequired,catalog_id:c.a.number.isRequired,description:c.a.string,quantity_to_sell_on_facebook:c.a.number,price:c.a.string};var $e=Qe,Ye=n("Q59H");function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ke(e){var t,n=e.chatMessage,a=e.isPreview,r=e.formatMsgTime,o=function(e){return e.isFromClient?e.client:e.isFromOperator?e.user:{name:"Bot"}}(n),l=Ue(n),s=Object(B.a)().t;return t=n.isSystem?s(n.message.message,n.message.params):"singleProductMessage"===n.productInfoType?n.singleProductMessageText:n.formatted_message,i.a.createElement("div",{title:n.id,className:G()("message-container clearfix",{"from-client":n.isFromClient,"from-operator":n.isFromOperator,"from-bot":n.isFromBot,"from-system":n.isOldSystem||n.isSystem,preview:a})},i.a.createElement("div",{className:"message-wrapper"},i.a.createElement("div",{className:"message py-1"},l?i.a.createElement("img",{className:"message-img-autor mx-sm-4 mx-2",src:l,alt:"author img"}):null,i.a.createElement("div",{className:"message-content text-block"},i.a.createElement("div",{className:"chat-message color-black",dangerouslySetInnerHTML:{__html:t}}),i.a.createElement("div",null,n.attachments.map((function(e){return i.a.createElement(ze,{key:e.id,attachment:e,fullWidth:!n.message})}))),n.order?i.a.createElement(Ye.a,{order:n.order}):null,n.productInfo?i.a.createElement($e,n.productInfo):null,n.productsInfo?i.a.createElement("div",null,n.productsInfo.map((function(e){return i.a.createElement($e,Xe({key:e.internal_product_id},e))}))):null,n.templateButtons?i.a.createElement("div",null,n.templateButtons.map((function(e,t){return i.a.createElement("a",{className:"btn btn-outline-secondary",key:t,href:e.url,target:"_blank"},e.body)}))):null,n.buttons?i.a.createElement("div",{className:"mt-2"},n.buttons.map((function(e,t){return i.a.createElement("a",{className:"btn btn-info",key:t},e.text)}))):null,n.isOldSystem||n.isSystem?null:i.a.createElement("div",{className:"message-info-mark mt-2"},i.a.createElement("span",{className:"color-black mr-2"},null==o?void 0:o.name),n.created_at?i.a.createElement("span",{className:"color-dark-gray"},r(n.created_at)):null)))))}Ke.defaultProps={isPreview:!1},Ke.propTypes={chatMessage:c.a.instanceOf(k.h).isRequired,isPreview:c.a.bool,formatMsgTime:c.a.func.isRequired};var Je=i.a.memo(Ke),Ze=n("RotF"),et=n.n(Ze),tt=n("wDsf");function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var rt=n("YOdH"),it=n("19iC"),ot=n("gmZo");function lt(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(rt.a)(),n=Object(it.c)(),a=Object(it.d)(),i=Object(B.a)(),o=i.t;return Object(r.useCallback)((function(r){var i=Object(ot.a)(1e3*r).tz(t);if(((new Date).getTime()-i.toDate().getTime())/1e3<3600&&e)return i.fromNow();if(i.isSame(new Date,"day"))return o("common.date.today")+", "+i.format(a);var l=new Date;return i.isSame(l.setTime(l.getTime()-864e5),"day")?o("common.date.yesterday")+", "+i.format(a):i.format(n)}),[n,t,a,o,e])}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ut(e){var t,n,a,o=e.client,l=e.activeClientChannel,s=e.newMessages,c=e.oldMessages,u=e.loading,d=e.hasMore,m=e.loadMessages,f=null===(t=o.name)||void 0===t?void 0:t.toString(),p=o.id.toString(),h=lt(),v=st(Object(r.useState)(null),2),b=v[0],g=v[1],y=st(function(e,t,n){var a=e.id.toString(),i=Object(tt.a)(a),o=Object(r.useRef)(),l=nt(Object(r.useState)(!1),2),s=l[0],c=l[1],u=nt(Object(r.useState)(!1),2),d=u[0],m=u[1],f=Object(r.useCallback)((function(){var e=o.current;return e.clientHeight+e.scrollTop>=e.scrollHeight-50}),[o]),p=Object(r.useCallback)((function(){var e=o.current;e.scrollTop=e.scrollHeight}),[o]);Object(r.useEffect)((function(){!t&&a&&(c(!1),m(!1))}),[a,t]),Object(r.useEffect)((function(){!s&&t&&a&&(p(),c(!0),m(!0))}),[p,t,s,a]),Object(r.useEffect)((function(){a===i&&s&&d&&p()}),[n,s,a,i]);var h=Object(r.useCallback)((function(){var e=f();e!==d&&m(e)}),[d,m,f]);return[o,h,s,f]}(o,c,s),4),_=y[0],E=y[1],w=y[2],O=y[3];Object(r.useEffect)((function(){m(p)}),[p,m]);var S=Object(r.useCallback)((function(e,t){return e&&!t?k.h.instantiate({id:"preview",message:e,created_at:null,client:o,type:k.f}):null}),[f]);Object(r.useEffect)((function(){if(l)return l.listenForWhisper("typing",(function(e){var t=e.message,n=e.fromOperator;g(S(t,n)),setTimeout((function(){g(null)}),2e3)})),function(){l.stopListeningForWhisper("typing")}}),[l,S]);var j,C=null===(n=_.current)||void 0===n?void 0:n.scrollHeight,A=null===(a=_.current)||void 0===a?void 0:a.scrollTop;return Object(r.useEffect)((function(){var e=_.current;if(e&&C&&!O()){var t=e.scrollHeight-C;e.scrollTop=A+t}}),[c,b]),j=c?i.a.createElement("div",{className:"pr-4"},i.a.createElement(et.a,{threshold:30,isReverse:!0,loadMore:function(){d&&!u&&w&&m(p)},hasMore:d&&!u&&w,loader:null,useWindow:!1,getScrollParent:function(){return _.current}},c.map((function(e,t){return i.a.createElement(Je,{key:"".concat(t,"-").concat(e.id),chatMessage:e,formatMsgTime:h})}))),s.map((function(e){return i.a.createElement(Je,{key:e.id,chatMessage:e,formatMsgTime:h})})),b?i.a.createElement(Je,{chatMessage:b,formatMsgTime:h}):null):null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"small-scrollbar messages-list messages-list-scrollbar w-100 pr-2",ref:_,onScroll:E},j))}ut.propTypes={client:c.a.instanceOf(p.a).isRequired,activeClientChannel:c.a.object,newMessages:c.a.object.isRequired,oldMessages:c.a.object,loading:c.a.bool,hasMore:c.a.bool,loadMessages:c.a.func.isRequired};var dt=Object(d.c)((function(e){var t=e.liveChat;return{newMessages:t.get("newClientMessages"),oldMessages:t.get("oldClientMessages"),hasMore:t.get("oldMessagesHasMore"),loading:t.get("clientMessagesLoading")}}),(function(e){return{loadMessages:function(t){return e(T(t))}}}))(ut),mt=n("7BfX"),ft=n("55Ip"),pt=n("XRgj"),ht=n("mDHu"),vt=n("zEWu");function bt(e){var t,n=e.variables,a=e.integrationType,r=[];switch(n.first_name&&r.push(n.first_name),n.last_name&&r.push(n.last_name),n.phone_number&&r.push(n.phone_number),+a){case pt.i:t=i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"mr-2"},r.join(" ")),i.a.createElement("div",{className:"d-flex"},i.a.createElement("span",{className:"mr-2"},n.ip),Object(vt.a)(n.geo)?i.a.createElement(ht.a,{geo:n.geo}):null));break;default:t=i.a.createElement("div",null,r.join(" "))}return t?i.a.createElement("div",{className:"mb-2 d-flex flex-wrap"},t):null}bt.propTypes={variables:c.a.object.isRequired,integrationType:c.a.number.isRequired};var gt=bt,yt=n("HayB");function _t(e){var t=e.onClick,n=e.href,a=i.a.createElement($.e,{className:"icon-size-20 color-blue mb-2"});return t?i.a.createElement("button",{className:"btn btn-link no-shadow text-dec-none d-flex align-items-center px-2",onClick:t},a):n?i.a.createElement(ft.a,{className:"btn btn-link no-shadow text-dec-none d-flex align-items-center px-2",to:n},a):null}function Et(e){var t=e.onClick,n=e.href,a=e.client,r=e.toggleShowDetails,o=a.integration.service,l=a.variables;return i.a.createElement("div",{className:"mobile-chat-header-container pt-3 pb-2 pl-1"},i.a.createElement(_t,{onClick:t,href:n}),i.a.createElement("button",{type:"button",onClick:r,className:"current-interlocutor btn-link no-shadow border-0 w-100 px-1 d-flex align-items-center text-left"},i.a.createElement("div",{className:"d-flex flex-wrap align-items-center img-block mr-3 mb-2"},yt.b[o]()),i.a.createElement("div",{className:"d-flex flex-wrap align-items-center"},i.a.createElement("div",{className:"w-100 mb-2"},a.name),l&&i.a.createElement(gt,{variables:l,integrationType:o}))))}_t.propTypes={onClick:c.a.func,href:c.a.string},Et.propTypes={onClick:c.a.func,href:c.a.string,client:c.a.instanceOf(p.a).isRequired,toggleShowDetails:c.a.func.isRequired};var wt=Et,Ot=c.a.oneOf([b.a,b.b,b.d,b.e,b.c]),St=n("bTjV");function jt(e){return Object(xe.a)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 224H768v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H548v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H328v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H96c-17.7 0-32 14.3-32 32v576c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32zM424 688c0 4.4-3.6 8-8 8H232c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h184c4.4 0 8 3.6 8 8v48zm0-136c0 4.4-3.6 8-8 8H232c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h184c4.4 0 8 3.6 8 8v48zm374.5-91.3l-165 228.7a15.9 15.9 0 0 1-25.8 0L493.5 531.2c-3.8-5.3 0-12.7 6.5-12.7h54.9c5.1 0 9.9 2.5 12.9 6.6l52.8 73.1 103.7-143.7c3-4.2 7.8-6.6 12.9-6.6H792c6.5.1 10.3 7.5 6.5 12.8z"}}]})(e)}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Tt(e){var t=e.message,n=e.formatDateTime;return i.a.createElement("div",{style:{border:"1px solid #cecece",marginBottom:5,padding:5,borderRadius:3}},i.a.createElement("div",{style:{fontSize:13,color:"#6d6d6d",marginBottom:3}},n(t.send_at)),t.text?i.a.createElement("div",{style:{paddingLeft:15},dangerouslySetInnerHTML:{__html:t.text}}):i.a.createElement("div",null,t.trigger))}function kt(e){var t=e.clientId,n=Object(B.a)().t,a=Ct(Object(r.useState)(null),2),o=a[0],l=a[1],s=Ct(Object(r.useState)(!1),2),c=s[0],u=s[1],d=Object(it.a)();Object(r.useEffect)((function(){l(null),u(!1)}),[t]);var m,p=function(){l(null),u(!1)};return m=null!==o||c?c?i.a.createElement("div",{className:"text-center"},i.a.createElement(St.a,null)):c||!o||o.length?o?i.a.createElement("div",null,i.a.createElement("div",null,o.map((function(e){return i.a.createElement(Tt,{key:e.id,message:e,formatDateTime:d})}))),i.a.createElement("div",{className:"text-center"},i.a.createElement(z.a,{onClick:p,block:!0},n("liveChat.chat-window.scheduled-messages.hide-btn")))):null:i.a.createElement("div",{className:"text-center"},i.a.createElement("p",null,n("liveChat.chat-window.scheduled-messages.no-scheduled-messages")),i.a.createElement(z.a,{onClick:p,block:!0},n("liveChat.chat-window.scheduled-messages.hide-btn"))):i.a.createElement("div",null,i.a.createElement(z.a,{onClick:function(){u(!0),f.a.call("get","/methods/clients/".concat(t,"/scheduled-messages")).data((function(e){l(e),u(!1)}))},block:!0},n("liveChat.chat-window.scheduled-messages.show-btn"))),i.a.createElement(Q,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement(jt,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),n("liveChat.chat-window.scheduled-messages.scheduled-title")),m))}Tt.propTypes={message:c.a.object.isRequired,formatDateTime:c.a.func.isRequired},kt.propTypes={clientId:c.a.number.isRequired};var xt=i.a.memo(kt);function Nt(e){var t=e.client,n=yt.b[t.integration.service];return i.a.createElement(ft.a,{to:v.a.chatRoute.getLink("conversations",t.id),className:"d-flex w-100 client-variation"},i.a.createElement("div",{className:"service-icon-block service-icon-block_small"},n()),i.a.createElement("span",{className:"ml-1"},t.name))}Nt.propTypes={client:c.a.instanceOf(p.a).isRequired};var It=Nt,Rt=n("6jMY");function qt(e){return Object(xe.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12,2C6.486,2,2,5.589,2,10c0,2.908,1.898,5.515,5,6.934V22l5.34-4.005C17.697,17.852,22,14.32,22,10 C22,5.589,17.514,2,12,2z M12,16h-0.333L9,18v-2.417l-0.641-0.247C5.67,14.301,4,12.256,4,10c0-3.309,3.589-6,8-6s8,2.691,8,6 S16.411,16,12,16z"}},{tag:"path",attr:{d:"M13 6L11 6 11 9 8 9 8 11 11 11 11 14 13 14 13 11 16 11 16 9 13 9z"}}]})(e)}function Mt(e){return Object(xe.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 11L13 11 13 5 11 5 11 11 5 11 5 13 11 13 11 19 13 19 13 13 19 13z"}}]})(e)}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vt=Object(Rt.b)([pt.c,pt.d]),Ht={control:function(e){return Ft(Ft({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function zt(e){var t=e.phoneNumber,n=e.hideForm,a=Object(d.d)(),l=Object(B.a)().t,s=Pt(Object(r.useState)(null),2),c=s[0],u=s[1],h=Pt(Object(r.useState)(null),2),b=h[0],g=h[1],y=Object(r.useCallback)((function(e,t){a(function(e,t){return function(n,a){var r=a().liveChat,i=r.getIn(["allClients","ids"]).concat(r.getIn(["onlineClients","ids"])).concat(r.getIn(["liveClients","ids"])).concat(r.getIn(["skipped","ids"])),o=null;i.toSet().map((function(a){(o=r.getIn(["clientsMap",a])).phone===t&&o.id.toString()!==e.toString()&&f.a.call("get","/methods/live-chat/get-client/".concat(o.id)).data((function(e){n({type:m.a.UPDATE_WHOLE_CLIENT,payload:p.a.instantiate(e)})}))}))}}(e,t))}),[a]);if(c)return i.a.createElement(o.a,{to:v.a.chatRoute.getLink("conversations",c)});return i.a.createElement("div",null,i.a.createElement(ke.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:Vt,onChange:function(e){var t=e.value;g(t)},styles:Ht,className:"mb-2"}),i.a.createElement("div",{className:"d-flex justify-content-between"},i.a.createElement(z.a,{type:"button",color:"danger",outline:!0,onClick:n,className:"new-client-form-btn"},l("common.cancelBtnText")),i.a.createElement(z.a,{type:"button",color:"success",outline:!0,onClick:function(){if(b){var e={integration_id:b,phone_number:t,variables:[{name:"phone_number",value:t}],tags:[]};f.a.call("post","/methods/clients",{},e).data((function(e){g(null),u(e.id),y(e.id,e.phone)})).catch((function(){g(null),n()}))}},disabled:!b,className:"new-client-form-btn"},l("common.addBtnText"))))}function Ut(e){var t=e.phoneNumber,n=Pt(Object(r.useState)(!1),2),a=n[0],o=n[1],l=Object(r.useCallback)((function(){return o(!1)}),[]);return i.a.createElement("div",null,a?i.a.createElement(zt,{hideForm:l,phoneNumber:t}):i.a.createElement("div",{className:"text-center"},i.a.createElement(z.a,{type:"button",outline:!0,color:"primary",onClick:function(){return o(!0)}},i.a.createElement(Mt,null))))}zt.propTypes={phoneNumber:c.a.string.isRequired,hideForm:c.a.func.isRequired},Ut.propTypes={phoneNumber:c.a.string.isRequired};var Gt=Ut;function Wt(e){var t=e.clients,n=e.clientPhone,a=Object(B.a)().t;return i.a.createElement(Q,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.o,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.other-chats-with-lead-title")),i.a.createElement("div",{className:"other-clients-list mb-3"},t.length?t.map((function(e){return i.a.createElement(It,{key:e.id,client:e})})):i.a.createElement("div",{className:"text-secondary text-sm-left no-other-chats"},a("liveChat.chat-window.details.no-other-chats-with-lead"))),i.a.createElement(Gt,{phoneNumber:n}))}Wt.propTypes={clients:c.a.arrayOf(c.a.instanceOf(p.a)).isRequired,clientPhone:c.a.string.isRequired};var Qt=Wt,$t=n("jHW1"),Yt=n("hBLe");function Xt(e){var t,n=e.event,a=Object(B.a)().t,r=Object(Yt.a)(),o=Object(it.a)(),l=Object(it.b)(),s=(n.end_time-n.start_time)/3600>24,c=[];return n.email&&c.push(n.email),n.user_phone&&c.push(n.user_phone),t=s?i.a.createElement("div",{className:"date-block color-dark-gray text-right"},o(n.start_time)," -"," ",o(n.end_time)," "):i.a.createElement("div",{className:"date-block color-dark-gray text-right"},l(n.start_time)," - ",l(n.end_time)," ",r(n.start_time)),i.a.createElement("div",{className:"user-event-item message"},i.a.createElement("div",{className:"main-data"},n.calendar.name,": ",n.username),i.a.createElement("div",{className:"main-data"},a("liveChat.chat-window.details.contacts-subtitle")," ",c.join(", ")),n.comment?i.a.createElement("div",{className:"comment-block"},n.comment):null,t)}function Kt(e){var t=e.events,n=Object(B.a)().t;return i.a.createElement(Q,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.Y,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),n("liveChat.chat-window.details.calendar-events-title")),i.a.createElement("div",{className:"other-clients-list mb-3"},t.length?t.map((function(e){return i.a.createElement(Xt,{key:e.id,event:e})})):i.a.createElement("div",{className:"text-secondary text-sm-left no-other-chats"},n("liveChat.chat-window.details.no-calendar-events"))))}Xt.propTypes={event:c.a.instanceOf($t.a).isRequired},Kt.propTypes={events:c.a.arrayOf(c.a.instanceOf($t.a)).isRequired};var Jt=Kt,Zt=n("LdVD"),en=function(e){var t=e.clientId,n=e.department,a=Object(B.a)().t;return i.a.createElement(Q,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.j,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.department-title")),i.a.createElement(ke.a,{placeholder:a("departments.lobby-department"),value:n?{value:n.id,label:n.name}:null,defaultOptions:!0,loadOptions:Zt.a,onChange:function(e){f.a.call("post","/methods/departments/add-to-client/".concat(t),{},{department_id:e?e.value:null})},isClearable:!0}))};en.propTypes={clientId:c.a.number.isRequired,department:c.a.shape({id:c.a.number.isRequired,name:c.a.string.isRequired})};var tn=en;function nn(e){var t=e.file,n=e.setFile,a=e.disabled,o=Object(r.useCallback)((function(){a||n(null)}),[a,n]);return i.a.createElement("div",{className:"d-flex align-items-center px-2"},i.a.createElement($.C,{className:"icon-size-14 color-gray mr-1"}),i.a.createElement("span",null,t.name),i.a.createElement("button",{onClick:o,className:"btn btn-link text-dec-none no-shadow p-1"},i.a.createElement($.vb,{className:"icon-size-12 color-red"})))}nn.propTypes={file:c.a.shape({name:c.a.string.isRequired}),setFile:c.a.func.isRequired,disabled:c.a.bool};var an=nn;function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return on(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ln(e){var t=e.children,n=e.clientId,a=e.color,o=e.text,l=e.afterSend,s=e.title,c=e.className,d=rn(Object(r.useState)(!1),2),m=d[0],p=d[1],h=Object(u.a)();return i.a.createElement(z.a,{className:G()(c),disabled:m,color:a,onClick:function(){p(!0),function(e){return f.a.call("post","/methods/live-chat/pick-client/".concat(e))}(n,o||h.default_conversation_message).then((function(){l&&l()})).catch((function(){p(!1)}))},type:"button",title:s},t)}ln.defaultProps={color:"warning"},ln.propTypes={clientId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,children:c.a.any.isRequired,color:c.a.string,text:c.a.string,title:c.a.string,afterSend:c.a.func,className:c.a.string};var sn=i.a.memo(ln);function cn(e){var t=e.client,n=e.message,a=e.setMessage,o=Object(B.a)().t,l=Object(u.a)(),s=t.assign_operator_id,c=t.id.toString(),d=s===l.id,m=Object(r.useCallback)((function(){f.a.call("post","/methods/live-chat/decline-assign-operator/".concat(c))}),[c]);return i.a.createElement("div",{className:"assignment-block"},i.a.createElement("p",{className:"mb-1"},d?o("liveChat.chat-window.assigned-you"):o("liveChat.chat-window.assigned-someone",{user:t.assignOperator.name})),i.a.createElement("div",{className:"text-center"},i.a.createElement(sn,{className:"btn btn-success no-shadow border-0 mr-1",color:"success",clientId:t.id,text:n,afterSend:function(){a("")}},o("liveChat.chat-window.pick-up")),d&&i.a.createElement(z.a,{onClick:m,color:"warning"},o("liveChat.chat-window.decline-assignment"))))}cn.propTypes={client:c.a.instanceOf(p.a).isRequired,message:c.a.string,setMessage:c.a.func.isRequired};var un=i.a.forwardRef((function(e,t){var n=e.disabled,a=e.setFile,o=Object(r.useCallback)((function(e){n||a(e.target.files[0])}),[n,a]);return i.a.createElement("label",{className:"mb-0"},i.a.createElement("input",{ref:t,type:"file",onChange:o,className:"d-none",disabled:n}),i.a.createElement($.R,{className:"icon-size-20 color-gray position-relative ml-sm-4 ml-2 my-2"}))}));un.propTypes={setFile:c.a.func.isRequired,disabled:c.a.bool};var dn=un,mn=n("AEIT"),fn=n("+z1p");function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function vn(e){var t=e.operatorId,n=e.message,a=e.setMessage,o=e.disabled,l=e.activeClientChannel,s=e.onSubmit,c=Object(r.useRef)(),u=Object(B.a)().t,d=pn(Object(r.useState)(!1),2),m=d[0],f=d[1];Object(r.useEffect)((function(){setTimeout((function(){m&&(c.current.focus(),c.current.model.change((function(e){e.setSelection(e.createPositionAt(c.current.model.document.getRoot(),"end"))})))}))}),[m]);var p=Object(r.useCallback)((function(e,n){l&&l.whisper("typing",{message:"operator typing message...",fromOperator:t}),a(n.getData())}),[l,o,t,a]),h=Object(r.useRef)(s);Object(r.useEffect)((function(){h.current=s}),[s]);var v=Object(r.useCallback)((function(e,t){t.isSoft||(t.preventDefault(),e.stop(),h.current())}),[]);return i.a.createElement("div",{className:G()("w-100 message-text-field ml-2",{disabled:o})},i.a.createElement(mn.CKEditor,{editor:fn.BalloonEditor,data:n,onChange:p,onReady:function(e){e.editing.view.document.on("enter",v),setTimeout((function(){c.current=e,f(!0)}))},placeholder:u("liveChat.chat-window.text-editor-placeholder"),config:{toolbar:["bold","italic","underline","link"],link:{decorators:{showAsButton:{mode:"manual",label:u("chatbot.edit.link_as_button"),defaultValue:!1,attributes:{button:"button"}}}}}}))}vn.propTypes={operatorId:c.a.number,message:c.a.string,disabled:c.a.bool,setMessage:c.a.func.isRequired,onSubmit:c.a.func.isRequired,activeClientChannel:c.a.object};var bn=vn,gn=n("t8fN");function yn(e){var t=e.activeClientChannel,n=e.client,a=e.isSubmitting,r=e.message,o=e.setMessage,l=e.file,s=e.setFile,c=e.onSubmit,u=e.fileRef,d=e.audioMessage,m=e.setAudioMessage,f=Boolean(a||!l&&!r&&!d);return i.a.createElement(i.a.Fragment,null,i.a.createElement(dn,{ref:u,setFile:s,disabled:Boolean(a||d)}),i.a.createElement(gn.a,{className:"mx-2",setAudioMessage:m,disabled:Boolean(a||l)}),i.a.createElement(bn,{operatorId:n.operator_id,message:r,setMessage:o,disabled:a,activeClientChannel:t,onSubmit:c}),i.a.createElement(Z.a,{title:"Send",className:G()("send-btn btn-link no-shadow border-0",{disabled:f}),disabled:f,onClick:function(){return c()}},i.a.createElement("img",{className:"send-icon",src:"/img/send.svg",alt:"send"})))}yn.propTypes={client:c.a.instanceOf(p.a).isRequired,activeClientChannel:c.a.object,isSubmitting:c.a.bool,needPickClientToSendMessage:c.a.bool,message:c.a.string,setMessage:c.a.func.isRequired,audioMessage:c.a.oneOfType([c.a.object,c.a.string]),setAudioMessage:c.a.func.isRequired,onSubmit:c.a.func.isRequired,file:c.a.object,fileRef:c.a.object,setFile:c.a.func.isRequired};var _n=n("zl2q"),En=n("Z04g"),wn=n("Gv9V");function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function jn(e){var t=e.message,n=e.onQuickReplySelect,a=On(Object(r.useState)([]),2),o=a[0],l=a[1];Object(r.useEffect)((function(){f.a.call("get","/methods/quick-replies/search",{q:t}).data((function(e){l(e)}))}),[t]);var s=o.map((function(e){return{renderButton:function(){return i.a.createElement("div",null,e.subject_name)},renderContent:function(){return i.a.createElement("div",null,e.replies.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement(z.a,{type:"button",color:"white",className:"btn-quick-answers",onClick:function(){n(e)}},i.a.createElement("span",{className:"name"},e.name)," ",i.a.createElement("span",{className:"message",dangerouslySetInnerHTML:{__html:e.message}}),i.a.createElement("span",{className:"message message-hovered",dangerouslySetInnerHTML:{__html:e.message}}),e.attachment?i.a.createElement("span",{className:"attachment"},i.a.createElement("a",{href:e.attachment.url},i.a.createElement($.C,null))):null,e.audio_message?i.a.createElement("span",{className:"attachment audio"},i.a.createElement(wn.a,{url:e.audio_message.url})):null))})))}}}));return i.a.createElement("div",{className:"quick-answers-block"},i.a.createElement(En.a,{className:"quick-answers",items:s}))}function Cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function xn(e){var t=e.client,n=e.activeClientChannel,a=Object(u.a)(),o=!t.operator_id||t.operator_id!==a.id,l=o?a.default_conversation_message:"",s=Tn(Object(r.useState)(!1),2),c=s[0],m=s[1],p=Tn(Object(r.useState)(t.draft||l||""),2),h=p[0],v=p[1],b=Tn(Object(r.useState)(null),2),g=b[0],y=b[1],_=Tn(Object(r.useState)(null),2),E=_[0],w=_[1],O=t.id.toString();!function(e,t,n){var a=Object(r.useRef)(n),i=Object(d.d)(),o=Object(r.useRef)(),l=Object(r.useRef)();Object(r.useEffect)((function(){"<p>/"!==t.substring(0,4)&&a.current!==t&&(a.current=t,o.current&&clearTimeout(o.current),l.current&&clearTimeout(l.current),i(A(e,{draft:t})),t?o.current=setTimeout((function(){f.a.call("POST","/methods/live-chat/draft/".concat(e),{},{message:t})}),1e3):l.current=setTimeout((function(){f.a.call("DELETE","/methods/live-chat/draft/".concat(e))}),200))}),[e,i,t])}(O,h,t.draft);var S=function(e){var t=e.message,n=e.setIsSubmitting,a=e.setMessage,i=e.setAudioMessage,o=e.setFile,l=Cn(Object(r.useState)(!1),2),s=l[0],c=l[1],u=Cn(Object(r.useState)(null),2),d=u[0],m=u[1];Object(r.useEffect)((function(){c(t&&"<p>/"===t.substring(0,4))}),[t]);var f=Object(r.useCallback)((function(e){n(!0),c(!1),m(e.id),a(e.message?e.message:e.trigger),e.audio_message&&i(e.audio_message.url),e.attachment&&o(e.attachment),setTimeout((function(){n(!1)}),0)}),[i,o,n,a]);return{showQuickRepliesBlock:s,setQuickReplyId:m,quickReplyId:d,onQuickReplySelect:f}}({message:h,setIsSubmitting:m,setMessage:v,setAudioMessage:w,setFile:y}),j=S.showQuickRepliesBlock,C=S.quickReplyId,T=S.setQuickReplyId,k=S.onQuickReplySelect,x=Object(r.useRef)(),N=Object(r.useCallback)((function(){v(""),y(null),w(null),T(null),x.current&&(x.current.files=null,x.current.value=null)}),[x,v]),I=Object(r.useRef)(0);Object(r.useEffect)((function(){I.current++}));var R,q=Object(r.useCallback)((function(){if(N(),!c&&(h||g||C||E)){m(!0);var e=new FormData;e.append("text",h),!C&&g&&e.append("attachment",g),!C&&E&&e.append("audioMessage",E),C&&e.append("quickReplyId",C),f.a.call("post","/methods/live-chat/send-message/".concat(O),{},e).finally((function(){m(!1)}))}}),[c,h,g,N,O,E,C]);return R=t.assign_operator_id?i.a.createElement(cn,{client:t,message:h,setMessage:v}):i.a.createElement(yn,{activeClientChannel:n,client:t,isSubmitting:c,message:h,setMessage:v,file:g,setFile:y,onSubmit:q,audioMessage:E,setAudioMessage:w}),i.a.createElement("div",{className:G()("mt-3",{"is-audio-message":E,"is-file":g})},i.a.createElement("div",{className:"position-relative"},j&&h?i.a.createElement(jn,{message:h.substring(4,h.length-4),onQuickReplySelect:k}):null),g?i.a.createElement(an,{file:g,setFile:y,disabled:c,isAudio:!1}):null,E?i.a.createElement(_n.a,{audioMessage:E,setAudioMessage:w}):null,i.a.createElement("div",{className:G()("d-flex align-items-center message-send-block",{"need-pick-user":o})},R))}jn.propTypes={message:c.a.string,onQuickReplySelect:c.a.func.isRequired},xn.propTypes={client:c.a.instanceOf(p.a).isRequired,activeClientChannel:c.a.object};var Nn=n("gvs2");function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function qn(e){var t=e.orderId,n=In(Object(r.useState)(!1),2),a=n[0],o=n[1],l=Object(r.useCallback)((function(){o(!0),f.a.call("post","/methods/live-chat/send-checkout-link/".concat(t)).then((function(){o(!1)}))}),[t]);return i.a.createElement(z.a,{disabled:a,onClick:l},"Send payment link")}function Mn(e){var t=e.clientId,n=In(Object(r.useState)(!0),2),a=n[0],o=n[1],l=In(Object(r.useState)([]),2),s=l[0],c=l[1];return Object(r.useEffect)((function(){f.a.call("get","/methods/clients/".concat(t,"/active-orders")).data((function(e){c(e.map(Nn.a.instantiate)),o(!1)})).catch((function(){c([]),o(!1)}))}),[t]),a?i.a.createElement("div",{className:"text-center"},i.a.createElement(St.a,null)):i.a.createElement("ul",{className:"list-unstyled"},s.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(ft.a,{to:"/orders/".concat(e.id,"/view")},i.a.createElement("span",null,e.extended_details.accepted.products.map((function(e){return e.product.title})).join(", "))," ",i.a.createElement("span",null,e.extended_details.accepted.sum," ",e.extended_details.currency)),i.a.createElement(qn,{orderId:e.id}))})))}var Pn=function(e){var t=e.clientId,n=e.count,a=Object(B.a)().t,o=In(Object(r.useState)(!1),2),l=o[0],s=o[1];return i.a.createElement(Q,null,i.a.createElement("p",{className:"client-info-title color-black"},i.a.createElement($.j,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.orders-title")," ",i.a.createElement("span",null,n)),l?i.a.createElement(Mn,{clientId:t}):i.a.createElement("div",{className:"text-center"},i.a.createElement(z.a,{color:"primary",onClick:function(){return s(!0)}},"Load orders")))};Pn.propTypes={clientId:c.a.number.isRequired,count:c.a.number};var Ln=Pn;function Dn(){return(Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Vn(e){var t=e.activeClientChannel,n=e.tab,a=Object(B.a)().t,l=Object(d.d)(),s=Fn(Object(r.useState)(!1),2),c=s[0],u=s[1],m=Fn(Object(r.useState)(!1),2),f=m[0],p=m[1],h=M();Object(r.useEffect)((function(){h||p(!1)}),[h]);var b,g=function(){u(!1)},y=Object(r.useCallback)((function(){u((function(e){return!e}))}),[]),_=Object(mt.useSwipeable)({onSwipedLeft:function(){u(!0)},onSwipedRight:function(){c?g():(p(!0),l(C(null)))}});return f?i.a.createElement(o.a,{to:v.a.homeRoute.getLink(n)}):(b=h?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"messages-area"},i.a.createElement(wt,{client:h,href:v.a.homeRoute.getLink(n),toggleShowDetails:y}),i.a.createElement("div",{className:"messages-area-content pt-xl-4 pt-0"},i.a.createElement(xn,{key:h.id,client:h,activeClientChannel:t}),i.a.createElement(dt,{client:h,activeClientChannel:t}))),i.a.createElement("div",{className:"client-info-area-wrapper"},i.a.createElement(wt,{client:h,onClick:g,toggleShowDetails:y}),i.a.createElement("div",{className:"client-info-area small-scrollbar"},i.a.createElement("div",{className:"info-area top-area pt-xl-4 pt-2 pb-4 px-3 mb-3"},i.a.createElement("div",{className:"client-info color-black mb-3"},i.a.createElement($.J,{className:"icon-size-16 color-blue mr-1 mb-1 table-button-icon"}),a("liveChat.chat-window.details.title")),i.a.createElement(se,{client:h}),i.a.createElement(Ve,{assignOperator:h.assignOperator,operator:h.responsibleOperator,clientId:h.id,responsibleOperator:h.responsibleOperator,departmentId:h.department?h.department.id:null}),i.a.createElement(tn,{clientId:h.id,department:h.department}),h.active_product_orders_count?i.a.createElement(Ln,{clientId:h.id,count:h.active_product_orders_count}):null),i.a.createElement("div",{className:"info-area bottom-area py-4 px-3 mb-3"},i.a.createElement(de,{variables:h.variables}),h.phone?i.a.createElement(Qt,{clientPhone:h.phone,clients:h.clients_with_same_lead}):null,h.calendar_events.length?i.a.createElement(Jt,{events:h.calendar_events}):null,i.a.createElement(he,{clientId:h.id,tags:h.tags}),i.a.createElement(ge,{client:h}),i.a.createElement(xt,{clientId:h.id}))))):i.a.createElement(V,null),i.a.createElement("div",Dn({className:G()("chat-window",{active:!!h,"show-info":c})},_),b))}Vn.propTypes={activeClientChannel:c.a.object,tab:Ot};var Hn=Vn,zn=n("hAFs"),Un=n("CXWj");function Gn(e){var t=e.name,n=e.label,a=Object(u.a)(),o=Object(d.d)(),l=a.user_notifications_setting[t];Object(r.useEffect)((function(){q.a.private("User.self.".concat(a.id)).listen("UserNotificationSettingsChanged",(function(e){var t=e.data;o(Object(zn.a)(a.set("user_notifications_setting",t).toJS()))}))}),[zn.a,a]);return i.a.createElement(Un.a,{formGroupClass:"pt-2 pb-0",id:t,label:n,name:t,value:l,setFieldValue:function(e,t){f.a.call("patch","/methods/user/notifications-settings/".concat(a.user_notifications_setting.id),{},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))},errors:{}})}Gn.propTypes={name:c.a.string.isRequired,label:c.a.string.isRequired};var Wn=Gn,Qn=n("h4JF"),$n=n("zwA0");function Yn(e){var t=e.lastMessage,n=Ue(t),a=Object(B.a)().t;return i.a.createElement("div",{className:"d-flex last-message mb-2"},n?i.a.createElement("img",{className:"last-message-author mr-2",src:n,alt:"author img"}):null,t.message?i.a.createElement("div",{className:"message-body color-dark-gray mr-2",dangerouslySetInnerHTML:{__html:t.isSystem?a(t.message.message,t.message.params):t.formatted_message},style:{maxHeight:50,overflow:"hidden"}}):i.a.createElement($.C,{className:"icon-size-20 color-gray"}))}function Xn(e){var t=e.tags;return i.a.createElement(i.a.Fragment,null,t.map((function(e){return i.a.createElement("div",{key:e.id,className:"tag-item mr-1 my-1"},e.name)})))}Yn.propTypes={lastMessage:c.a.instanceOf(k.h).isRequired,clientName:c.a.string},Xn.propTypes={tags:c.a.array.isRequired};var Kn=Xn;function Jn(e){var t=e.department;return i.a.createElement("div",{className:"d-inline-block tag-item department mr-1 my-1"},t.name)}Jn.propTypes={department:c.a.object.isRequired};var Zn=Jn,ea=n("oI+J"),ta=n("Z7gm"),na=n("X68C"),aa=n("kvuc");function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ia(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function oa(e){var t=e.session;return i.a.createElement("p",{className:"mb-2 text-middle"},t.url)}function la(e){var t=e.sessions,n=ra(Object(r.useState)(!1),2),a=n[0],o=n[1],l=t[0],s=t.slice(1);return i.a.createElement("div",null,i.a.createElement(oa,{key:"session-".concat(l.id),session:l}),s.length?i.a.createElement(ea.a,{className:"session-dropdown",isOpen:a,toggle:function(){return o((function(e){return!e}))}},i.a.createElement(ta.a,{className:"session-btn text-middle py-1 px-2",color:"outline-secondary",caret:!0},"+",s.length),i.a.createElement(na.a,null,s.map((function(e){return i.a.createElement(aa.a,{className:"session-dropdown-item",key:"session-".concat(e.id),toggle:!1},i.a.createElement(oa,{session:e}))})))):null)}oa.propTypes={session:c.a.shape({id:c.a.number.isRequired,url:c.a.string.isRequired}).isRequired},la.propTypes={sessions:c.a.array.isRequired};var sa=la;var ca=function(){var e=Object(B.a)().t;return i.a.createElement("div",{className:"d-inline-block tag-item skipped mr-1 my-1"},e("skipped"))};function ua(e){var t=e.client,n=e.tab,a=e.showSessions,r=e.formatMsgTime,o=e.authUserId,l=t.integration.service,s=t.lastMessage,c=t.name,u=t.id,d=t.tags,m=t.department,f=t.has_skipped_live_chat_request,p=t.variables,h=t.active_sessions,b=Object(B.a)().t,g=t.assign_operator_id;return i.a.createElement(ft.a,{to:v.a.chatRoute.getLink(n,u),className:"d-flex chat-list-item-content pb-1"},i.a.createElement("div",{className:"service-icon-block"},i.a.createElement("span",null,yt.b[l]())),i.a.createElement("div",{className:"chat-list-info"},i.a.createElement("div",{className:"d-flex justify-content-between align-items-center w-100 mb-2"},i.a.createElement("div",null,i.a.createElement("span",null,c),g&&o.toString()===g.toString()?i.a.createElement("span",{className:"text-danger ml-2"},b("liveChat.chats-panel.accept-chat")):null),s?i.a.createElement("span",{className:"date color-dark-gray"},r(s.created_at)):null),p&&i.a.createElement(gt,{variables:p,integrationType:l}),i.a.createElement("div",{className:"d-flex messages-container"},s?i.a.createElement(Yn,{lastMessage:s,clientName:c}):null,t.unread_messages_count>0?i.a.createElement("span",{className:"unread-messages-count-wrapper"},i.a.createElement("div",{className:"unread-messages-count"},t.unread_messages_count)):null),i.a.createElement("div",{className:"d-flex flex-wrap"},f?i.a.createElement(ca,null):null,i.a.createElement(Zn,{department:m||{name:b("departments.lobby-department")}}),i.a.createElement(Kn,{tags:d})),a&&h.length?i.a.createElement(sa,{sessions:h}):null))}ua.propTypes={client:c.a.instanceOf(p.a).isRequired,tab:Ot,showSessions:c.a.bool,formatMsgTime:c.a.func.isRequired,authUserId:c.a.oneOfType([c.a.string,c.a.number]).isRequired};var da=i.a.memo(ua);function ma(e){var t=e.client,n=e.waitingLiveChat,a=e.isActive,r=e.tab,o=e.showSessions,l=e.formatMsgTime,s=e.authUserId;return i.a.createElement("li",{id:t.id,className:G()("chat-list-item pt-3 pb-2 px-3",{active:a,"waiting-for-live-chat":n})},i.a.createElement(da,{client:t,tab:r,showSessions:o,formatMsgTime:l,authUserId:s}))}ma.propTypes={client:c.a.instanceOf(p.a).isRequired,waitingLiveChat:c.a.bool,isActive:c.a.bool,tab:Ot,showSessions:c.a.bool,formatMsgTime:c.a.func.isRequired,authUserId:c.a.oneOfType([c.a.string,c.a.number]).isRequired};var fa=Object(d.c)((function(e,t){var n;return{isActive:(null===(n=e.liveChat.get("activeClientId"))||void 0===n?void 0:n.toString())===t.client.id.toString()}}))(ma);function pa(e){var t=e.formatMsgTime,n=e.chatType,a=e.tabRoute,o=Object(r.useRef)(),l=Object(B.a)().t,s=Object(u.a)(),c=Object(d.e)((function(e){return e.liveChat.get("clientsMap")})),m=Object(d.e)((function(e){return e.liveChat.get(n)})),f=m.get("listLoading"),p=m.get("hasMore"),h=m.get("listLoadingError"),v=m.get("ids"),b=Object(d.d)(),g=Object(r.useCallback)((function(){return b(S(n))}),[b,n]);return!v.size&&f?i.a.createElement(Qn.a,null):h?i.a.createElement($n.a,null):i.a.createElement("div",{ref:o,className:"chat-list view small-scrollbar"},i.a.createElement(et.a,{pageStart:0,loadMore:function(){!f&&p&&g()},hasMore:p,loader:null,useWindow:!1,getScrollParent:function(){return o.current}},v.size?i.a.createElement("ul",{className:"list-unstyled mb-0"},v.map((function(e){var n=c.get(e);return i.a.createElement(fa,{key:n.id,client:n,tab:a,showSessions:!0,formatMsgTime:t,authUserId:s.id})}))):i.a.createElement("div",{className:"mt-4 text-center text-middle"},l("liveChat.chats-panel.no-conversations"))))}pa.propTypes={formatMsgTime:c.a.func.isRequired,chatType:c.a.string.isRequired,tabRoute:c.a.string.isRequired};var ha=pa;function va(e){var t,n=e.tab,a=M(),r=lt(!1);switch(n){case b.a:t=i.a.createElement(ha,{chatType:"allClients",tabRoute:b.a,formatMsgTime:r});break;case b.d:t=i.a.createElement(ha,{chatType:"onlineClients",tabRoute:b.d,formatMsgTime:r});break;case b.b:t=i.a.createElement(ha,{chatType:"liveClients",tabRoute:b.b,formatMsgTime:r});break;case b.e:t=i.a.createElement(ha,{chatType:"skipped",tabRoute:b.e,formatMsgTime:r});break;case b.c:t=i.a.createElement(ha,{chatType:"myChats",tabRoute:b.c,formatMsgTime:r});break;default:t=null}return i.a.createElement("div",{className:G()("chat-list-container",{"d-md-block d-none":!!a})},t)}va.propTypes={tab:Ot};var ba=i.a.memo(va),ga=n("dbgk"),ya=n("rhny"),_a=n("ok1R");function Ea(e){var t=e.tab,n=Object(B.a)().t,a=Object(d.e)((function(e){return e.liveChat.get("meta")})),o=Object(d.d)();return Object(r.useEffect)((function(){o(j())}),[o]),i.a.createElement("div",{className:"nav-panel-wrapper chat-list-switcher"},i.a.createElement("div",{className:"nav-panel nav-tabs px-3 d-flex"},i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(ft.a,{to:v.a.homeRoute.getLink(b.a),className:G()("nav-link w-100  px-2 small",{active:t===b.a})},n("liveChat.chats-panel.tab-conversations"))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(ft.a,{to:v.a.homeRoute.getLink(b.e),className:G()("nav-link w-100  px-2 small",{active:t===b.e})},n("liveChat.chats-panel.tab-social-queue"),"",!!a.get("skipped")&&i.a.createElement(oe.a,{pill:!0},a.get("skipped")))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(ft.a,{to:v.a.homeRoute.getLink(b.d),className:G()("nav-link px-2 small",{active:t===b.d})},n("liveChat.chats-panel.tab-online-visitors"),"",!!a.get("onlineClients")&&i.a.createElement(oe.a,{pill:!0,color:"warning"},a.get("onlineClients")))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(ft.a,{to:v.a.homeRoute.getLink(b.b),className:G()("nav-link w-100 px-2 small",{active:t===b.b})},n("liveChat.chats-panel.tab-live-queue"),"",!!a.get("liveClients")&&i.a.createElement(oe.a,{pill:!0,color:"danger"},a.get("liveClients")))),i.a.createElement("div",{className:"nav-panel-item nav-item"},i.a.createElement(ft.a,{to:v.a.homeRoute.getLink(b.c),className:G()("nav-link px-2 small",{active:t===b.c})},n("liveChat.chats-panel.tab-my-chats"),"",!!a.get("myChats")&&i.a.createElement(oe.a,{pill:!0,color:"warning"},a.get("myChats")),!!a.get("myChats")&&i.a.createElement(oe.a,{pill:!0,color:"danger ml-2"},a.get("myChatsAssigned"))))))}Ea.propTypes={tab:Ot};var wa=i.a.memo(Ea);function Oa(e){var t=e.afterLeaveChats,n=Object(B.a)().t,a=Object(d.d)();return i.a.createElement(z.a,{color:"danger",onClick:function(){a(Object(Ee.c)(n("liveChat.leave-all-conversations-question"))).then((function(){f.a.call("post","/methods/live-chat/leave-all-conversations").then((function(){t&&t()}))}))},className:"leave-all-chats-btn"},n("liveChat.chat-window.leave-all-chats"))}Oa.propTypes={afterLeaveChats:c.a.func};var Sa=Oa,ja=n("KDeF");function Ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ta(){var e=Object(o.j)(),t=e.chatId,n=e.type||b.a,a=Object(B.a)().t,s=Ca(Object(r.useState)(null),2),c=s[0],u=s[1],d=Object(o.h)(),m=Object(r.useCallback)((function(){d.push(v.a.homeRoute.getLink(n))}),[d,n]);return i.a.createElement(l.a,{mainContainerStyle:{background:"var(--chatboard-background)"}},i.a.createElement("div",{className:"livechat-container"},i.a.createElement(F,{tab:n,openedChatId:t,setActiveClientChannel:u},i.a.createElement(i.a.Fragment,null,i.a.createElement(ga.a,null,i.a.createElement(_a.a,null,i.a.createElement(ya.a,{xl:10,lg:9,md:8,className:"title-liveChat"},i.a.createElement("span",null,a("liveChat.title")),i.a.createElement("div",{className:"pb-1"},i.a.createElement(ft.b,{to:"/clients/create",className:"d-inline-block"},i.a.createElement($.Eb,{id:"create-client",className:"icon-size-40 color-blue mr-4 table-button-icon"}),i.a.createElement(ja.a,{target:"create-client",placement:"right"},a("liveChat.create-client-link"))),i.a.createElement(ft.b,{to:"/clients/1",className:"d-inline-block"},i.a.createElement(qt,{id:"clients-link",className:"icon-size-40 color-blue mr-4 table-button-icon"}),i.a.createElement(ja.a,{placement:"right",target:"clients-link"},a("liveChat.clients-list-link"))),i.a.createElement(Sa,{afterLeaveChats:m}))),i.a.createElement(ya.a,{xl:2,lg:3,md:4,className:"d-none d-md-block"},i.a.createElement(Wn,{name:"site_long_notifications",label:a("user.notifications.site-long-notifications-label")}),i.a.createElement(Wn,{name:"site_short_notifications",label:a("user.notifications.site-short-notifications-label")}))),i.a.createElement(_a.a,null,i.a.createElement(ya.a,null,i.a.createElement(wa,{tab:n})))),i.a.createElement("div",{className:"live-chat-content-container"},i.a.createElement(ba,{tab:n}),i.a.createElement(Hn,{tab:n,activeClientChannel:c}))))))}},Buep:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n("q1tI"),r=n.n(a),i=n("QDav"),o=n("jrRI"),l=n("3OM0"),s=n("TSYQ"),c=n.n(s),u=n("sPdi"),d=n("17x9"),m=n.n(d),f=n("9Koi");function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _={control:function(e){return g(g({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function E(e){var t,n,s=e.id,d=e.label,m=e.errors,v=e.loadOptions,b=e.loadValue,g=e.name,y=e.setFieldValue,E=e.setFieldLabel,w=e.value,O=e.className,S=e.placeholder,j=e.isClearable,C=e.selectOptions,A=h(Object(a.useState)(null),2),T=A[0],k=A[1],x=Object(f.a)().t;return Object(a.useEffect)((function(){w&&!T&&b(w).then((function(e){k(e)}))}),[b,T,w]),r.a.createElement(o.a,{className:c()(O)},!1===d?null:r.a.createElement(l.a,{htmlFor:s},d),r.a.createElement(i.a,p({},C,{cacheOptions:!0,defaultOptions:!0,loadOptions:v,onChange:function(e){y(g,e?e.value:null),E&&E(e?e.label:null),k(e)},value:w?T:null,isClearable:j,className:c()({"is-invalid":!!(null===(t=m[g])||void 0===t?void 0:t.length)}),placeholder:S||x("common.default-select-placeholder"),styles:_})),(null===(n=m[g])||void 0===n?void 0:n.length)?r.a.createElement(u.a,{errors:m[g]}):null)}E.defaultProps={isClearable:!0},E.propTypes={errors:m.a.object.isRequired,id:m.a.oneOfType([m.a.string,m.a.number]),value:m.a.oneOfType([m.a.string,m.a.number]),label:m.a.any.isRequired,name:m.a.string.isRequired,setFieldValue:m.a.func.isRequired,setFieldLabel:m.a.func,loadOptions:m.a.func.isRequired,loadValue:m.a.func.isRequired,className:m.a.string,placeholder:m.a.string,isClearable:m.a.bool,selectOptions:m.a.object}},Cs6D:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("Wwog"),o=n("qKvR"),l=(n("i8i4"),n("17x9"),n("njTy")),s=(n("iYmT"),n("FUBA"),n("1m/E")),c=n("TqVZ");a.Component;var u=Object(s.a)(l.a);t.a=u},F6sc:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("MwQV"),r=n("83d4");function i(e){return new Promise((function(t){var n={q:e};a.a.call("get","/methods/user/search",n).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id,user:r.d.instantiate(e)}})))}))}))}},Gv9V:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("ma3e");function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e){var t=e.url,n=Object(a.useRef)(),i=s(Object(a.useState)(!1),2),o=i[0],c=i[1];Object(a.useEffect)((function(){var e=n.current;c(!e.paused),e.onended=function(){c(!1)}}),[]);return r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){var e=n.current;e.paused?e.play():(e.pause(),e.currentTime=0),c(!e.paused)},className:"btn btn-outline-dark"},o?r.a.createElement(l.ob,null):r.a.createElement(l.U,null)),r.a.createElement("audio",{ref:n,src:t,controls:!0,className:"d-none"}))}u.propTypes={url:o.a.string.isRequired}},HayB:function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return O}));var a,r=n("q1tI"),i=n.n(r),o=n("17x9"),l=n.n(o),s=n("XRgj"),c=n("ok1R"),u=n("rhny"),d=n("xbK4"),m=n("TSYQ"),f=n.n(m),p=n("6rqU"),h=n("9Koi"),v=n("BAJy"),b=n("3OM0"),g=n("ma3e");function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(E(a={},s.i,(function(){return i.a.createElement(g.E,{className:"service-icon color-blue3 icon-size-40"})})),E(a,s.b,(function(){return i.a.createElement(g.B,{className:"service-icon facebook-icon icon-size-40 color-facebook"})})),E(a,s.c,(function(){return i.a.createElement("img",{className:"service-img sms-chat",src:"/img/services/sms-chat.png",alt:"sms-chat"})})),E(a,s.d,(function(){return i.a.createElement(g.Hb,{className:"service-icon whatsapp-icon icon-size-40 color-whatsapp"})})),E(a,s.e,(function(){return i.a.createElement(g.tb,{className:"service-icon telegram-icon icon-size-40 color-telegram"})})),E(a,s.h,(function(){return i.a.createElement(g.Gb,{className:"service-icon viber-icon icon-size-40 color-viber"})})),E(a,s.g,(function(){return i.a.createElement("span",{className:"d-flex justify-content-center position-relative service-img-wrapper"},i.a.createElement("img",{className:"service-img twilio",src:"/img/services/twilio-red.svg",alt:"twilio-whatsapp"}),i.a.createElement("div",{className:"position-absolute twilio-whatsapp rounded-circle d-flex justify-content-center align-items-center"},i.a.createElement(g.Hb,{className:"icon-size-20 color-whatsapp sm-whatsapp"})))})),E(a,s.f,(function(){return i.a.createElement("img",{className:"service-img twilio",src:"/img/services/twilio-red.svg",alt:"sms-twilio"})})),E(a,s.a,(function(){return i.a.createElement("img",{className:"service-img twilio",src:"/img/services/dotgo.svg",alt:"sms-twilio"})})),E(a,s.j,(function(){return i.a.createElement(g.Hb,{className:"service-icon whatsapp-icon icon-size-40 color-whatsapp"})})),a);function O(e){var t=e.validate,n=e.isEdit,a=e.handleChange,o=e.values,l=e.allowedSteps,m=e.changeStep,_=Object(h.a)().t,E=y(Object(r.useState)([{label:_("integrations.service.".concat(s.i)),value:s.i,icon:w[s.i],iconBtn:function(){return i.a.createElement(g.E,{className:"icon-size-25"})}},{label:_("integrations.service.".concat(s.b)),value:s.b,icon:w[s.b],iconBtn:function(){return i.a.createElement(g.B,{className:"icon-size-25"})}},{label:_("integrations.service.".concat(s.c)),value:s.c,icon:w[s.c],iconBtn:function(){return i.a.createElement("img",{className:"service-img sms-chat-btn",src:"/img/services/sms-chat.png",alt:"sms-chat"})}},{label:_("integrations.service.".concat(s.d)),value:s.d,icon:w[s.d],iconBtn:function(){return i.a.createElement(g.Hb,{className:"icon-size-25"})}},{label:_("integrations.service.".concat(s.e)),value:s.e,icon:w[s.e],iconBtn:function(){return i.a.createElement(g.tb,{className:"icon-size-25"})}},{label:_("integrations.service.".concat(s.h)),value:s.h,icon:w[s.h],iconBtn:function(){return i.a.createElement(g.Gb,{className:"icon-size-25"})}},{label:_("integrations.service.".concat(s.g)),value:s.g,icon:w[s.g],iconBtn:function(){return i.a.createElement("span",{className:"position-relative service-img-wrapper"},i.a.createElement("img",{className:"service-img twilio-btn",src:"/img/services/twilio-white.svg",alt:"twilio-whatsapp"}),i.a.createElement(g.Hb,{className:"pl-2 icon-size-20 color-white"}))}},{label:_("integrations.service.".concat(s.f)),value:s.f,icon:w[s.f],iconBtn:function(){return i.a.createElement("img",{className:"service-img twilio-btn",src:"/img/services/twilio-white.svg",alt:"sms-twilio"})}},{label:_("integrations.service.".concat(s.a)),value:s.a,icon:w[s.a],iconBtn:function(){return i.a.createElement("img",{className:"service-img twilio-btn",src:"/img/services/dotgo.svg",alt:"sms-twilio"})}},{label:_("integrations.service.".concat(s.j)),value:s.j,icon:w[s.j],iconBtn:function(){return i.a.createElement(g.Hb,{className:"icon-size-25"})}}]),1)[0],O=E.findIndex((function(e){return+e.value==+o.service})),S=-1===O?null:E[O];return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{className:"my-4"},E.map((function(e){var t=+e.value==+o.service;return i.a.createElement(u.a,{xl:4,md:4,sm:6,key:e.value,className:f()("my-3 px-sm-3 px-0",{active:t})},i.a.createElement("div",{className:"rounded d-flex align-items-center p-sm-3 py-3 px-2"},i.a.createElement("div",{className:"position-relative service-img-wrapper d-flex justify-content-center mr-1"},e.icon()),i.a.createElement(v.a,{className:"ml-2 ",value:e.value,onChange:n?null:a,checked:t,type:"radio",id:"service-".concat(e.value),name:"service",disabled:n}),i.a.createElement(b.a,{className:"mb-0",htmlFor:"service-".concat(e.value)},e.label)))}))),i.a.createElement(p.a,{validate:t,fields:["service"],allowedSteps:l,nextStep:d.a,changeStep:m,content:function(){return i.a.createElement(i.a.Fragment,null,_("integrations.form.next-btn.step-service",{serviceName:S.label}),i.a.createElement("span",{className:"ml-2 pl-1"},null==S?void 0:S.iconBtn()))}}))}O.propTypes={isEdit:l.a.bool,validate:l.a.func.isRequired,handleChange:l.a.func.isRequired,changeStep:l.a.func.isRequired,values:l.a.object.isRequired,allowedSteps:l.a.array.isRequired}},HlzF:function(e,t,n){(function(n){var a;!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||i;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||i;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var a=t._howls[n]._getSoundIds(),r=0;r<a.length;r++){var o=t._howls[n]._soundById(a[r]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||i;t.ctx||f(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var a=t._howls[n]._getSoundIds(),r=0;r<a.length;r++){var o=t._howls[n]._soundById(a[r]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||i,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||i,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||i)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||i,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),a=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=a&&parseInt(a[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||i;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var a=new Audio;a._unlocked=!0,e._releaseHtml5Audio(a)}catch(n){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),o=0;o<i.length;o++){var l=e._howls[r]._soundById(i[o]);l&&l._node&&!l._node._unlocked&&(l._node._unlocked=!0,l._node.load())}e._autoResume();var s=e.ctx.createBufferSource();s.buffer=e._scratchBuffer,s.connect(e.ctx.destination),void 0===s.start?s.noteOn(0):s.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),s.onended=function(){s.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||i;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&i.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&i.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var i=new r,o=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};o.prototype={init:function(e){var t=this;return i.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=i.usingWebAudio&&!t._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=null;if(i.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,a;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(a=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(a))||(n=/\.([^.]+)$/.exec(a.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&i.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new l(this),this._webAudio&&c(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,a=null;if("number"==typeof e)a=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var r=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(r++,a=n._sounds[o]._id);1===r?e=null:a=null}}var l=a?n._soundById(a):n._inactiveSound();if(!l)return null;if(a&&!e&&(e=l._sprite||"__default"),"loaded"!==n._state){l._sprite=e,l._ended=!1;var s=l._id;return n._queue.push({event:"play",action:function(){n.play(s)}}),s}if(a&&!l._paused)return t||n._loadQueue("play"),l._id;n._webAudio&&i._autoResume();var c=Math.max(0,l._seek>0?l._seek:n._sprite[e][0]/1e3),u=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-c),d=1e3*u/Math.abs(l._rate),m=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;l._sprite=e,l._ended=!1;var p=function(){l._paused=!1,l._seek=c,l._start=m,l._stop=f,l._loop=!(!l._loop&&!n._sprite[e][2])};if(!(c>=f)){var h=l._node;if(n._webAudio){var v=function(){n._playLock=!1,p(),n._refreshBuffer(l);var e=l._muted||n._muted?0:l._volume;h.gain.setValueAtTime(e,i.ctx.currentTime),l._playStart=i.ctx.currentTime,void 0===h.bufferSource.start?l._loop?h.bufferSource.noteGrainOn(0,c,86400):h.bufferSource.noteGrainOn(0,c,u):l._loop?h.bufferSource.start(0,c,86400):h.bufferSource.start(0,c,u),d!==1/0&&(n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),d)),t||setTimeout((function(){n._emit("play",l._id),n._loadQueue()}),0)};"running"===i.state&&"interrupted"!==i.ctx.state?v():(n._playLock=!0,n.once("resume",v),n._clearTimer(l._id))}else{var b=function(){h.currentTime=c,h.muted=l._muted||n._muted||i._muted||h.muted,h.volume=l._volume*i.volume(),h.playbackRate=l._rate;try{var a=h.play();if(a&&"undefined"!=typeof Promise&&(a instanceof Promise||"function"==typeof a.then)?(n._playLock=!0,p(),a.then((function(){n._playLock=!1,h._unlocked=!0,t||(n._emit("play",l._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0}))):t||(n._playLock=!1,p(),n._emit("play",l._id),n._loadQueue()),h.playbackRate=l._rate,h.paused)return void n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||l._loop?n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),d):(n._endTimers[l._id]=function(){n._ended(l),h.removeEventListener("ended",n._endTimers[l._id],!1)},h.addEventListener("ended",n._endTimers[l._id],!1))}catch(e){n._emit("playerror",l._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=n._src,h.load());var g=window&&window.ejecta||!h.readyState&&i._navigator.isCocoonJS;if(h.readyState>=3||g)b();else{n._playLock=!0;var y=function(){b(),h.removeEventListener(i._canPlayEvent,y,!1)};h.addEventListener(i._canPlayEvent,y,!1),n._clearTimer(l._id)}}return l._id}n._ended(l)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),a=0;a<n.length;a++){t._clearTimer(n[a]);var r=t._soundById(n[a]);if(r&&!r._paused&&(r._seek=t.seek(n[a]),r._rateSeek=0,r._paused=!0,t._stopFade(n[a]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var a=n._getSoundIds(e),r=0;r<a.length;r++){n._clearTimer(a[r]);var i=n._soundById(a[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(a[r]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var a=n._getSoundIds(t),r=0;r<a.length;r++){var o=n._soundById(a[r]);o&&(o._muted=e,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,i.ctx.currentTime):o._node&&(o._node.muted=!!i._muted||e),n._emit("mute",o._id))}return n},volume:function(){var e,t,n,a=this,r=arguments;if(0===r.length)return a._volume;if(1===r.length||2===r.length&&void 0===r[1]){var o=a._getSoundIds(),l=o.indexOf(r[0]);l>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?a._soundById(t):a._sounds[0])?n._volume:0;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,r)}}),a;void 0===t&&(a._volume=e),t=a._getSoundIds(t);for(var s=0;s<t.length;s++)(n=a._soundById(t[s]))&&(n._volume=e,r[2]||a._stopFade(t[s]),a._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,i.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*i.volume()),a._emit("volume",n._id));return a},fade:function(e,t,n,a){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,a)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),r.volume(e,a);for(var o=r._getSoundIds(a),l=0;l<o.length;l++){var s=r._soundById(o[l]);if(s){if(a||r._stopFade(o[l]),r._webAudio&&!s._muted){var c=i.ctx.currentTime,u=c+n/1e3;s._volume=e,s._node.gain.setValueAtTime(e,c),s._node.gain.linearRampToValueAtTime(t,u)}r._startFadeInterval(s,e,t,n,o[l],void 0===a)}}return r},_startFadeInterval:function(e,t,n,a,r,i){var o=this,l=t,s=n-t,c=Math.abs(s/.01),u=Math.max(4,c>0?a/c:a),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var r=(Date.now()-d)/a;d=Date.now(),l+=s*r,l=Math.round(100*l)/100,l=s<0?Math.max(n,l):Math.min(n,l),o._webAudio?e._volume=l:o.volume(l,e._id,!0),i&&(o._volume=l),(n<t&&l<=n||n>t&&l>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,o.volume(n,e._id),o._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,a=this,r=arguments;if(0===r.length)return a._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=a._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],a._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=a._getSoundIds(t),o=0;o<i.length;o++)(n=a._soundById(i[o]))&&(n._loop=e,a._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return a},rate:function(){var e,t,n,a=this,r=arguments;if(0===r.length)t=a._sounds[0]._id;else if(1===r.length){var o=a._getSoundIds(),l=o.indexOf(r[0]);l>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!=typeof e)return(n=a._soundById(t))?n._rate:a._rate;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,r)}}),a;void 0===t&&(a._rate=e),t=a._getSoundIds(t);for(var s=0;s<t.length;s++)if(n=a._soundById(t[s])){a.playing(t[s])&&(n._rateSeek=a.seek(t[s]),n._playStart=a._webAudio?i.ctx.currentTime:n._playStart),n._rate=e,a._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,i.ctx.currentTime):n._node&&(n._node.playbackRate=e);var c=a.seek(t[s]),u=(a._sprite[n._sprite][0]+a._sprite[n._sprite][1])/1e3-c,d=1e3*u/Math.abs(n._rate);!a._endTimers[t[s]]&&n._paused||(a._clearTimer(t[s]),a._endTimers[t[s]]=setTimeout(a._ended.bind(a,n),d)),a._emit("rate",n._id)}return a},seek:function(){var e,t,n=this,a=arguments;if(0===a.length)t=n._sounds[0]._id;else if(1===a.length){var r=n._getSoundIds(),o=r.indexOf(a[0]);o>=0?t=parseInt(a[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(a[0]))}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if(void 0===t)return n;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,a)}}),n;var l=n._soundById(t);if(l){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var s=n.playing(t)?i.ctx.currentTime-l._playStart:0,c=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(c+s*Math.abs(l._rate))}return l._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),l._seek=e,l._ended=!1,n._clearTimer(t),n._webAudio||!l._node||isNaN(l._node.duration)||(l._node.currentTime=e);var d=function(){n._emit("seek",t),u&&n.play(t,!0)};if(u&&!n._webAudio){var m=function(){n._playLock?setTimeout(m,0):d()};setTimeout(m,0)}else d()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(i._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),i._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var a=i._howls.indexOf(e);a>=0&&i._howls.splice(a,1);var r=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===e._src||e._src.indexOf(i._howls[n]._src)>=0){r=!1;break}return s&&r&&delete s[e._src],i.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,a){var r=this["_on"+e];return"function"==typeof t&&r.push(a?{id:n,fn:t,once:a}:{id:n,fn:t}),this},off:function(e,t,n){var a=this["_on"+e],r=0;if("number"==typeof t&&(n=t,t=null),t||n)for(r=0;r<a.length;r++){var i=n===a[r].id;if(t===a[r].fn&&i||!t&&i){a.splice(r,1);break}}else if(e)this["_on"+e]=[];else{var o=Object.keys(this);for(r=0;r<o.length;r++)0===o[r].indexOf("_on")&&Array.isArray(this[o[r]])&&(this[o[r]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var a=this["_on"+e],r=a.length-1;r>=0;r--)a[r].id&&a[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,a[r].fn),0),a[r].once&&this.off(e,a[r].fn,a[r].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=i.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),a)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),i._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new l(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=i.ctx.createBufferSource(),e._node.bufferSource.buffer=s[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,i.ctx.currentTime),this},_cleanBuffer:function(e){var t=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=i._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var l=function(e){this._parent=e,this.init()};l.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=i._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),this._node.gain.setValueAtTime(t,i.ctx.currentTime),this._node.paused=!0,this._node.connect(i.masterGain)):i.noAudio||(this._node=i._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(i._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*i.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(i._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var s={},c=function(e){var t=e._src;if(s[t])return e._duration=s[t].duration,void m(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),a=new Uint8Array(n.length),r=0;r<n.length;++r)a[r]=n.charCodeAt(r);d(a.buffer,e)}else{var i=new XMLHttpRequest;i.open(e._xhr.method,t,!0),i.withCredentials=e._xhr.withCredentials,i.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){i.setRequestHeader(t,e._xhr.headers[t])})),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?d(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[t],e.load())},u(i)}},u=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&t._sounds.length>0?(s[t._src]=e,m(t,e)):n()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(e).then(a).catch(n):i.ctx.decodeAudioData(e,a,n)},m=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(e){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),t=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var a=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!a&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};void 0===(a=function(){return{Howler:i,Howl:o}}.apply(t,[]))||(e.exports=a),t.Howler=i,t.Howl=o,void 0!==n?(n.HowlerGlobal=r,n.Howler=i,n.Howl=o,n.Sound=l):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=i,window.Howl=o,window.Sound=l)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,a,r,i){if(!this.ctx||!this.ctx.listener)return this;var o=this._orientation;return t="number"!=typeof t?o[1]:t,n="number"!=typeof n?o[2]:n,a="number"!=typeof a?o[3]:a,r="number"!=typeof r?o[4]:r,i="number"!=typeof i?o[5]:i,"number"!=typeof e?o:(this._orientation=[e,t,n,a,r,i],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,a,r,i),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"stereo",action:function(){a.stereo(e,n)}}),a;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0]}for(var i=a._getSoundIds(n),o=0;o<i.length;o++){var l=a._soundById(i[o]);if(l){if("number"!=typeof e)return l._stereo;l._stereo=e,l._pos=[e,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",l._panner&&l._panner.pan||t(l,r),"spatial"===r?void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(e,0,0):l._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),a._emit("stereo",l._id)}}return a},Howl.prototype.pos=function(e,n,a,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,a,r)}}),i;if(n="number"!=typeof n?0:n,a="number"!=typeof a?-.5:a,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,n,a]}for(var o=i._getSoundIds(r),l=0;l<o.length;l++){var s=i._soundById(o[l]);if(s){if("number"!=typeof e)return s._pos;s._pos=[e,n,a],s._node&&(s._panner&&!s._panner.pan||t(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):s._panner.setPosition(e,n,a)),i._emit("pos",s._id)}}return i},Howl.prototype.orientation=function(e,n,a,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,a,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,a="number"!=typeof a?i._orientation[2]:a,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,a]}for(var o=i._getSoundIds(r),l=0;l<o.length;l++){var s=i._soundById(o[l]);if(s){if("number"!=typeof e)return s._orientation;s._orientation=[e,n,a],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),t(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):s._panner.setOrientation(e,n,a)),i._emit("orientation",s._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,a,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(a=r._soundById(parseInt(i[0],10)))?a._pannerAttr:r._pannerAttr;e=i[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var o=r._getSoundIds(n),l=0;l<o.length;l++)if(a=r._soundById(o[l])){var s=a._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel};var c=a._panner;c?(c.coneInnerAngle=s.coneInnerAngle,c.coneOuterAngle=s.coneOuterAngle,c.coneOuterGain=s.coneOuterGain,c.distanceModel=s.distanceModel,c.maxDistance=s.maxDistance,c.refDistance=s.refDistance,c.rolloffFactor=s.rolloffFactor,c.panningModel=s.panningModel):(a._pos||(a._pos=r._pos||[0,0,-.5]),t(a,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n("yLpj"))},"K+m7":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/chat-bots/search",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},KDeF:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("rePB"),r=n("wx14"),i=n("JX7q"),o=n("dI71"),l=n("q1tI"),s=n.n(l),c=n("17x9"),u=n.n(c),d=n("rWSr"),m=n("33Jr");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var p=["defaultOpen"],h=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={isOpen:t.defaultOpen||!1},n.toggle=n.toggle.bind(Object(i.a)(n)),n}Object(o.a)(t,e);var n=t.prototype;return n.toggle=function(){this.setState({isOpen:!this.state.isOpen})},n.render=function(){return s.a.createElement(d.a,Object(r.a)({isOpen:this.state.isOpen,toggle:this.toggle},Object(m.n)(this.props,p)))},t}(l.Component);h.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({defaultOpen:u.a.bool},d.a.propTypes)},LEWT:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return y}));var a=n("fOp/"),r=n("Llg8"),i=n("q1tI"),o=n.n(i),l=n("17x9"),s=n.n(l),c=n("DCcX"),u=n("CaDr"),d=n("OBzv"),m=n("sOKU");function f(e){var t=e.text,n=e.onConfirm,a=e.onReject;return o.a.createElement(c.a,{isOpen:!0,toggle:a,className:"confirm-modal"},o.a.createElement(u.a,null,t),o.a.createElement(d.a,null,o.a.createElement(m.a,{color:"primary",onClick:n},"Confirm")," ",o.a.createElement(m.a,{color:"secondary",onClick:a},"Cancel")))}f.propTypes={text:s.a.string.isRequired,onConfirm:s.a.func.isRequired,onReject:s.a.func.isRequired};var p=f,h=n("mNz5"),v=n.n(h),b=function(e){return{type:a.a.ADD,payload:e}},g=function(e){return{type:a.a.REMOVE,payload:e}},y=function(e){return function(t){return new Promise((function(n,a){var i=v()(),l=new r.a({id:i,data:{text:e,onConfirm:n,onReject:a},render:function(){return o.a.createElement(p,{text:e,onConfirm:function(){n(),t(g(i))},onReject:function(){a(),t(g(i))}})}});t(b(l))}))}}},LSTS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n("q1tI"),i=l(r),o=l(n("17x9"));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),a=void 0;if(this.props.useWindow){var r=document.documentElement||document.body.parentNode||document.body,i=void 0!==t.pageYOffset?t.pageYOffset:r.scrollTop;a=this.props.isReverse?i:this.calculateOffset(e,i)}else a=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;a<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,a=t.element,r=t.hasMore,o=(t.initialLoad,t.isReverse),l=t.loader,s=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,s&&s(t)};var u=[n];return r&&(l?o?u.unshift(l):u.push(l):this.defaultLoader&&(o?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),i.default.createElement(a,c,u)}}]),t}(r.Component);s.propTypes={children:o.default.node.isRequired,element:o.default.node,hasMore:o.default.bool,initialLoad:o.default.bool,isReverse:o.default.bool,loader:o.default.node,loadMore:o.default.func.isRequired,pageStart:o.default.number,ref:o.default.func,getScrollParent:o.default.func,threshold:o.default.number,useCapture:o.default.bool,useWindow:o.default.bool},s.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=s,e.exports=t.default},LdVD:function(e,t,n){"use strict";var a=n("MwQV");t.a=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return new Promise((function(n){a.a.call("get","/methods/departments/search",{q:t}).data((function(t){var a=t.map((function(e){return{label:e.name,value:e.id}}));n(e.concat(a))}))}))}}()(e)}},Llg8:function(e,t,n){"use strict";var a=n("Mpt7");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,n,a,r=s(c);function c(){return i(this,c),r.apply(this,arguments)}return t=c,a=[{key:"instantiate",value:function(e){return new c(e)}}],(n=null)&&o(t.prototype,n),a&&o(t,a),c}(Object(a.d)({id:null,render:function(){return null}}));t.a=d},OBzv:function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),i=n("q1tI"),o=n.n(i),l=n("17x9"),s=n.n(l),c=n("TSYQ"),u=n.n(c),d=n("33Jr"),m={tag:d.q,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,n=e.cssModule,i=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),s=Object(d.m)(u()(t,"modal-footer"),n);return o.a.createElement(i,Object(a.a)({},l,{className:s}))};f.propTypes=m,f.defaultProps={tag:"div"},t.a=f},PLmP:function(e,t,n){"use strict";let a=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function r(e="",t="ms"){var n=null;return(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(a,(function(e,t,a){(a=i(a))&&(n=(n||0)+parseFloat(t,10)*a)})),n&&n/(i(t)||1)}function i(e){return r[e]||r[e.toLowerCase().replace(/s$/,"")]}r.nanosecond=r.ns=1e-6,r["s"]=r["s"]=r.us=r.microsecond=.001,r.millisecond=r.ms=r[""]=1,r.second=r.sec=r.s=1e3*r.ms,r.minute=r.min=r.m=60*r.s,r.hour=r.hr=r.h=60*r.m,r.day=r.d=24*r.h,r.week=r.wk=r.w=7*r.d,r.month=r.b=30.4375*r.d,r.year=r.yr=r.y=365.25*r.d,t.a=r},Q59H:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("9Koi"),s=n("BLzl"),c=n("/kxI"),u=o.a.shape({products_catalog_id:o.a.number,internal_product_id:o.a.string,image_link:o.a.string,link:o.a.string,title:o.a.string,description:o.a.string,price:o.a.string}),d=o.a.shape({quantity:o.a.number.isRequired,item_price:o.a.number.isRequired,catalog_id:o.a.number,internal_product_id:o.a.string.isRequired,product:u.isRequired});function m(e){var t=e.itemPrice,n=e.quantity,a=e.currency,i=Object(l.a)().t;return r.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},r.a.createElement("div",{className:"mr-4"},r.a.createElement("div",{className:"quantity"},r.a.createElement("b",{className:"quantity-label"},i("shop.order-item.quantity")," "),r.a.createElement("b",null,n))),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",null,r.a.createElement("b",null,"Unknown product")),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",{className:"mr-1"},i("shop.order-item.item-price")),r.a.createElement("span",null,t,a)))))}function f(e){var t=e.itemPrice,n=e.quantity,a=e.product,i=e.currency,o=Object(l.a)().t;return r.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},r.a.createElement("div",{className:"mr-4"},r.a.createElement("a",{href:a.link,target:"_blank",className:"product-img-link"},r.a.createElement("img",{src:a.image_link,alt:a.title,className:"img-responsive product-img"})),r.a.createElement("div",{className:"quantity"},r.a.createElement("b",{className:"quantity-label"},o("shop.order-item.quantity")," "),r.a.createElement("b",null,n))),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",null,r.a.createElement("b",null,a.title)),r.a.createElement("div",null,a.description),r.a.createElement("div",null,r.a.createElement("div",{className:"mr-2"},r.a.createElement("b",{className:"mr-2"},o("shop.order-item.price")),r.a.createElement("span",null,a.price)),r.a.createElement("div",null,r.a.createElement("b",{className:"mr-1"},o("shop.order-item.item-price")),r.a.createElement("span",null,t,i)))))}function p(e){var t=e.itemPrice,n=e.quantity,a=e.product,i=e.currency;return a?r.a.createElement(f,{quantity:n,itemPrice:t,currency:i,product:a}):r.a.createElement(m,{itemPrice:t,currency:i,quantity:n})}function h(e){var t=e.order,n=Object(l.a)().t;return r.a.createElement(s.a,{className:"m-1 mb-2 order-preview"},r.a.createElement(c.a,null,r.a.createElement("div",{className:"mb-3"},r.a.createElement("h5",null,n("shop.order.preview.ordered-title")),r.a.createElement("div",null,t.accepted.products.map((function(e){return r.a.createElement(p,{key:"".concat(e.quantity,"-").concat(e.internal_product_id),quantity:e.quantity,itemPrice:e.item_price,product:e.product,currency:t.currency})})))),t.productsNotEnough&&t.productsNotEnough.length?r.a.createElement("div",{className:"text-danger mb-3"},r.a.createElement("h2",null,n("shop.order.preview.failed-to-order-title")),r.a.createElement("div",null,t.productsNotEnough.map((function(e){return r.a.createElement(p,{key:"".concat(e.quantity,"-").concat(e.internal_product_id),quantity:e.quantity,itemPrice:e.item_price,product:e.product,currency:t.currency})})))):null,r.a.createElement("h5",{className:"d-flex justify-content-between"},r.a.createElement("span",null,n("shop.order.preview.total")),r.a.createElement("span",null,t.price," ",t.currency))))}m.propTypes={quantity:o.a.number.isRequired,itemPrice:o.a.number.isRequired,currency:o.a.string.isRequired},f.propTypes={product:u.isRequired,quantity:o.a.number.isRequired,itemPrice:o.a.number.isRequired,currency:o.a.string.isRequired},p.propTypes={product:u,quantity:o.a.number.isRequired,itemPrice:o.a.number.isRequired,currency:o.a.string.isRequired},h.propTypes={order:o.a.shape({currency:o.a.string.isRequired,price:o.a.string.isRequired,accepted:o.a.shape({sum:o.a.number.isRequired,products:o.a.arrayOf(d)}),productsNotEnough:o.a.arrayOf(d)})},t.a=h},RotF:function(e,t,n){e.exports=n("LSTS")},T7vI:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("9Koi"),s=n("zEWu"),c=n("mDHu"),u=n("TSYQ"),d=n.n(u);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h=["ip","geo","first_name","last_name","phone_number","email"];function v(e){var t=e.title,n=e.children;return r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"table-title"},t)),r.a.createElement("td",null,n))}function b(e){var t=e.data,n=e.varClassName,i=Object(l.a)().t,o=f(Object(a.useState)(!1),2),u=o[0],p=o[1],b=[],g=[];for(var y in t)if(t.hasOwnProperty(y)&&null!==t[y]){var _={name:y,value:t[y]};h.includes(y)?b.push(_):g.push(_)}var E=function(e){return e.map((function(e){var t,n=(t=e.value,Object(s.a)(t)?r.a.createElement(c.a,{geo:t}):Array.isArray(t)?t.join(", "):"object"===m(t)?JSON.stringify(t):t);return n?r.a.createElement(v,{key:e.name,title:e.name},n):null}))},w=g.length;return r.a.createElement("table",{className:d()(n)},r.a.createElement("tbody",null,E(b),w&&!u?r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("button",{type:"button",className:"btn btn-link no-shadow p-0 color-blue text-middle text-dec-none",onClick:function(){return p(!0)}},i("tables.json-show-more",{count:w})))):null,w&&u?E(g):null))}v.propTypes={title:o.a.string.isRequired,children:o.a.any},b.propTypes={data:o.a.object.isRequired,varClassName:o.a.string},t.a=b},Z04g:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("sOKU"),s=n("nsn4"),c=n("BLzl"),u=n("/kxI"),d=n("TSYQ"),m=n.n(d);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e){var t=e.items,n=e.className,i=f(Object(a.useState)(0),2),o=i[0],d=i[1];return r.a.createElement("div",{className:m()("accordion",n)},t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(l.a,{className:"btn-notification",color:"",onClick:function(){return d(o===t?null:t)}},e.renderButton()),r.a.createElement(s.a,{isOpen:o===t},r.a.createElement(c.a,{className:"accordion-card"},r.a.createElement(u.a,{className:"border-0"},e.renderContent()))))})))}h.propTypes={items:o.a.arrayOf(o.a.shape({renderButton:o.a.func.isRequired,renderContent:o.a.func.isRequired})).isRequired,className:o.a.string}},afej:function(e,t,n){"use strict";var a=n("wx14"),r=n("zLVn"),i=n("q1tI"),o=n.n(i),l=n("17x9"),s=n.n(l),c=n("TSYQ"),u=n.n(c),d=n("33Jr"),m={tag:d.q,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,n=e.cssModule,i=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),s=Object(d.m)(u()(t,"card-header"),n);return o.a.createElement(i,Object(a.a)({},l,{className:s}))};f.propTypes=m,f.defaultProps={tag:"div"},t.a=f},clgt:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("XRgj");function r(e){return[a.i,a.b,a.g,a.f,a.a,a.j].includes(+e)}},dbgk:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i);function l(e){var t=e.children;return r.a.createElement("h1",{className:"title-main mb-3"},t)}l.propTypes={children:o.a.any.isRequired}},gQBd:function(e,t,n){"use strict";var a=n("Vjiq");window.io=n("gFX4");var r=new a.a({broadcaster:"socket.io",host:window.location.origin});t.a=r},gmZo:function(e,t,n){"use strict";n("iYuL");var a=n("f0Wu");a.locale(window.locale),t.a=a},mDHu:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i);function l(e){var t=e.geo,n=[];return t.city&&n.push(t.city),t.country&&n.push(t.country),r.a.createElement("div",{className:"d-flex align-items-center"},t.iso?r.a.createElement("img",{className:"flag mr-2",src:"/img/flags/".concat(t.iso.toLowerCase(),".gif"),alt:t.iso}):null,r.a.createElement("div",{className:"location"},n.join(", ")))}l.propTypes={geo:o.a.object.isRequired}},t8fN:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("R6dn"),s=n.n(l);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var d={audio:!0,video:!1};var m=n("TSYQ"),f=n.n(m),p=n("ma3e");function h(e){var t=e.setAudioMessage,n=e.disabled,i=e.className,o=function(e){var t=c(Object(a.useState)(!1),2),n=t[0],r=t[1],i=c(Object(a.useState)(null),2),o=i[0],l=i[1],u=c(Object(a.useState)(!1),2),m=u[0],f=u[1],p=c(Object(a.useState)(!1),2),h=p[0],v=p[1],b=Object(a.useCallback)((function(){navigator.getUserMedia(d,(function(t){r(t);var n=new s.a(t);n.mimeType="audio/wav",l(n),n.ondataavailable=function(t){e(t)},n.start(36e5),f(!0),v(!1)}),(function(e){console.error(e),alert("You have to grant privileges to access your microphone to send audio messages.")}))}),[e]),g=Object(a.useCallback)((function(){h?o.resume():o.pause(),v(!h)}),[h,o]),y=Object(a.useCallback)((function(){o.resume(),o.stop(),f(!1),v(!1),l(null),n.getAudioTracks().forEach((function(e){e.stop()})),r(null)}),[o,n]);return{active:!0,isRecording:m,isPaused:h,togglePause:g,startRecording:b,stopRecording:y}}(t),l=o.isRecording,u=o.isPaused,m=o.startRecording,h=o.stopRecording,v=o.togglePause,b=null;return n||(b=l?h:m),r.a.createElement("div",{className:f()("d-flex",{"is-recording":l,"is-paused":u},i)},r.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:b,disabled:n},l?r.a.createElement(p.pb,{className:"icon-size-20 recording-stop-icon mr-1"}):r.a.createElement(p.O,{className:"icon-size-20 color-gray mr-1"})),l?r.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:n?null:v,disabled:n},u?r.a.createElement(p.V,{className:"icon-size-20 recording-play-icon color-gray mr-1"}):r.a.createElement(p.S,{className:"icon-size-20 recording-pause-icon color-gray mr-1"})):null)}h.propTypes={setAudioMessage:o.a.func.isRequired,disabled:o.a.bool,className:o.a.string}},wDsf:function(e,t,n){"use strict";var a=n("q1tI");t.a=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}},xbK4:function(e,t,n){"use strict";n.d(t,"c",(function(){return je})),n.d(t,"a",(function(){return Ce})),n.d(t,"b",(function(){return Ae})),n.d(t,"d",(function(){return Te})),n.d(t,"e",(function(){return ke})),n.d(t,"f",(function(){return Ne}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("nc57"),s=n("TSYQ"),c=n.n(s),u=n("9Koi");function d(e){var t=e.values,n=e.validate,a=e.allowedScreens,i=e.step,o=e.showSetUpScreen,l=e.onChange,s=e.errors,d=Object(u.a)().t,m=[{label:d("integrations.form.step.".concat(je)),value:je,fields:["service"],dependsOn:[]},{label:d("integrations.form.step.".concat(Ce)),value:Ce,fields:["name","prefix","company_chat_bot_id","locale"],dependsOn:["service"]},{label:d("integrations.form.step.".concat(Ae)),value:Ae,nFields:["service","name","prefix","company_chat_bot_id","locale"],dependsOn:["service","name","prefix","company_chat_bot_id","locale"]},{label:d("integrations.form.step.".concat(Te)),value:Te,dependsOn:"all"},{label:d("integrations.form.step.".concat(ke)),value:ke,dependsOn:"all"}];return r.a.createElement("div",{className:"navigation-bar-wrapper"},r.a.createElement("div",{className:"navigation-bar w-100 d-flex"},m.map((function(e){if(e.value===Te&&!o)return null;var u,d=a.includes(e.value),m=Object.entries(s);u=e.fields?m.filter((function(t){return e.fields.includes(t[0])&&t[1].length})).length:!!e.nFields&&m.filter((function(t){return!e.nFields.includes(t[0])&&t[1].length})).length;return r.a.createElement("button",{key:e.value,type:"button",onClick:function(){n("all"===e.dependsOn?Object.keys(t):e.dependsOn).then((function(){l(e.value)}))},className:c()("navigation-item rounded-top w-100 py-2 px-3",{active:e.value===i,error:u}),disabled:!d},e.label)}))))}d.propTypes={values:o.a.object.isRequired,validate:o.a.func.isRequired,errors:o.a.object,allowedScreens:o.a.array.isRequired,step:o.a.string,onChange:o.a.func.isRequired,showSetUpScreen:o.a.bool};var m=n("HayB"),f=n("6rqU"),p=n("6Rhw"),h=n("Buep"),v=n("K+m7"),b=n("MwQV");function g(e){return new Promise((function(t){b.a.call("get","/methods/chat-bots/".concat(e)).data((function(e){t({label:e.name,value:e.id})}))}))}var y=n("9MIN");function _(){return new Promise((function(e){b.a.call("get","/methods/language").data((function(t){e(Object(y.a)(t))}))}))}function E(e){return new Promise((function(t){b.a.call("get","/methods/language/".concat(e)).data((function(e){t(Object(y.a)([e])[0])}))}))}var w=n("ok1R"),O=n("rhny"),S=n("CXWj");function j(e){var t=e.setFieldValue,n=e.handleChange,a=e.handleBlur,i=e.values,o=e.errors,l=e.allowedSteps,s=e.changeStep,c=e.validate,d=Object(u.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement(O.a,{lg:6},r.a.createElement(p.a,{className:"limiter",name:"name",label:d("integrations.form.chatbot-screen.name-label"),placeholder:d("integrations.form.chatbot-screen.name-placeholder"),onChange:n,onBlur:a,value:i.name||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"prefix",label:d("integrations.form.chatbot-screen.prefix-label"),placeholder:d("integrations.form.chatbot-screen.prefix-placeholder"),onChange:n,onBlur:a,value:i.prefix||"",errors:o}),r.a.createElement(p.a,{className:"limiter",name:"max_live_chat_inactivity_duration",label:d("integrations.form.chatbot-screen.max-inactivity-label"),placeholder:d("integrations.form.chatbot-screen.max-inactivity-placeholder"),value:i.max_live_chat_inactivity_duration,onChange:n,errors:o})),r.a.createElement(O.a,{lg:6},r.a.createElement(h.a,{className:"limiter",name:"company_chat_bot_id",label:d("integrations.form.chatbot-screen.chat-label"),value:i.company_chat_bot_id,setFieldValue:t,errors:o,loadOptions:v.a,loadValue:g}),r.a.createElement(h.a,{className:"limiter",name:"locale",label:d("integrations.form.chatbot-screen.language-label"),loadOptions:_,loadValue:E,value:i.locale,setFieldValue:t,errors:o}),r.a.createElement(S.a,{id:"show_messages_only_in_live_chat_mode",className:"limiter",name:"show_messages_only_in_live_chat_mode",label:d("integrations.form.chatbot-screen.show-messages-only-in-live-chat-mode-label"),value:i.show_messages_only_in_live_chat_mode,setFieldValue:t}),r.a.createElement(S.a,{id:"autostart_on_chat_page",className:"limiter",name:"autostart_on_chat_page",label:d("integrations.form.chatbot-screen.autostart-on-chat-page-label"),value:i.autostart_on_chat_page,setFieldValue:t}))),r.a.createElement(f.a,{validate:c,fields:["service","name","prefix","company_chat_bot_id","locale","max_live_chat_inactivity_duration"],changeStep:s,allowedSteps:l,nextStep:Ae,content:function(){return d("integrations.form.next-btn.step-chatbot")}}))}j.propTypes={allowedSteps:o.a.array.isRequired,changeStep:o.a.func.isRequired,validate:o.a.func.isRequired,errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,setFieldValue:o.a.func.isRequired,values:o.a.object.isRequired};var C=n("XRgj");function A(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function T(e,t){var n=e.service,a=A(e,["service"]);switch(+n){case C.i:return a.config_id&&!t.config_id;case C.j:return a.token&&a.app_secret&&a.phone_number_id&&!t.token&&!t.app_secret&&!t.phone_number_id;case C.b:return a.token&&a.app_secret&&!t.token&&!t.app_secret;case C.e:case C.c:case C.d:case C.h:return a.token&&!t.token;case C.g:case C.f:return a.token&&a.sid&&!t.token&&!t.sid;case C.a:return a.client_id&&a.client_secret&&!t.client_id&&!t.client_secret;default:return!1}}var k=n("sOKU"),x=n("wx14"),N=n("zLVn"),I=n("rePB"),R=n("33Jr"),q=n("gwnE");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={children:o.a.node,className:o.a.string,closeClassName:o.a.string,closeAriaLabel:o.a.string,cssModule:o.a.object,color:o.a.string,fade:o.a.bool,isOpen:o.a.bool,toggle:o.a.func,tag:R.q,transition:o.a.shape(q.a.propTypes),innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},D={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:P(P({},q.a.defaultProps),{},{unmountOnExit:!0})};function F(e){var t=e.className,n=e.closeClassName,a=e.closeAriaLabel,i=e.cssModule,o=e.tag,l=e.color,s=e.isOpen,u=e.toggle,d=e.children,m=e.transition,f=e.fade,p=e.innerRef,h=Object(N.a)(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"]),v=Object(R.m)(c()(t,"alert","alert-"+l,{"alert-dismissible":u}),i),b=Object(R.m)(c()("close",n),i),g=P(P(P({},q.a.defaultProps),m),{},{baseClass:f?m.baseClass:"",timeout:f?m.timeout:0});return r.a.createElement(q.a,Object(x.a)({},h,g,{tag:o,className:v,in:s,role:"alert",innerRef:p}),u?r.a.createElement("button",{type:"button",className:b,"aria-label":a,onClick:u},r.a.createElement("span",{"aria-hidden":"true"},"")):null,d)}F.propTypes=L,F.defaultProps=D;var B=F;function V(e){var t=e.handleSubmit,n=e.video,a=e.values,i=e.errors,o=e.children,l=Object(u.a)().t;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{color:"dark",fade:!1},l("integrations.form.msg-instead-of-video"))):null,o,T(a,i)?r.a.createElement(k.a,{className:"pt-2 px-4 my-4",type:"submit",color:"primary",onClick:t},l("integrations.form.next-btn.step-configure")):null)}function H(){return new Promise((function(e){b.a.call("get","/methods/chat-box-configs/search").data((function(t){e(t.map((function(e){return{label:e.name,value:e.id}})))}))}))}function z(e){return new Promise((function(t){b.a.call("get","/methods/chat-box-configs/".concat(e)).data((function(e){t({label:e.name,value:e.id})}))}))}function U(e){var t=e.video,n=e.handleSubmitClick,a=e.setFieldValue,i=e.values,o=e.errors,l=Object(u.a)().t;return r.a.createElement(V,{video:t,handleSubmit:n(["config_id"]),values:i,errors:o},r.a.createElement(h.a,{className:"limiter",name:"config_id",label:l("integrations.form.configure-screen.config-label"),loadOptions:H,loadValue:z,value:i.config_id||"",setFieldValue:a,errors:o}))}function G(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,o=e.values,l=e.errors,s=Object(u.a)().t;return r.a.createElement(V,{handleSubmit:n(["token","app_secret"]),errors:l,values:o,video:t},r.a.createElement(p.a,{className:"limiter",name:"token",label:s("integrations.form.configure-screen.token-label"),placeholder:s("integrations.form.configure-screen.token-placeholder"),onChange:a,onBlur:i,value:o.token||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"app_secret",label:s("integrations.form.configure-screen.app-secret-label"),placeholder:s("integrations.form.configure-screen.app-secret-placeholder"),onChange:a,onBlur:i,value:o.app_secret||"",errors:l}))}function W(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,o=e.values,l=e.errors,s=n(["config_id"]),c=Object(u.a)().t;return r.a.createElement(V,{video:t,values:o,errors:l,handleSubmit:s},r.a.createElement(p.a,{className:"limiter",name:"token",label:c("integrations.form.configure-screen.token-label"),placeholder:c("integrations.form.configure-screen.token-placeholder"),value:o.token||"",onChange:a,onBlur:i,errors:l}))}function Q(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,o=e.values,l=e.errors,s=n(["sid","token"]),c=Object(u.a)().t;return r.a.createElement(V,{handleSubmit:s,errors:l,values:o,video:t},r.a.createElement(p.a,{className:"limiter",name:"sid",label:c("integrations.form.configure-screen.sid-label"),placeholder:c("integrations.form.configure-screen.sid-placeholder"),onChange:a,onBlur:i,value:o.sid||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"token",label:c("integrations.form.configure-screen.token-label"),placeholder:c("integrations.form.configure-screen.token-placeholder"),onChange:a,onBlur:i,value:o.token||"",errors:l}))}function $(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,o=e.values,l=e.errors,s=n(["bot_id","client_id","client_secret"]),c=Object(u.a)().t;return r.a.createElement(V,{handleSubmit:s,errors:l,values:o,video:t},r.a.createElement(p.a,{className:"limiter",name:"client_id",label:c("integrations.form.configure-screen.client_id-label"),placeholder:c("integrations.form.configure-screen.client_id-placeholder"),onChange:a,onBlur:i,value:o.client_id||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"client_secret",label:c("integrations.form.configure-screen.client_secret-label"),placeholder:c("integrations.form.configure-screen.client_secret-placeholder"),onChange:a,onBlur:i,value:o.client_secret||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"bot_id",label:c("integrations.form.configure-screen.bot_id-label"),placeholder:c("integrations.form.configure-screen.bot_id-placeholder"),onChange:a,onBlur:i,value:o.bot_id||"",errors:l}))}function Y(e){var t=e.video,n=e.handleSubmitClick,a=e.handleChange,i=e.handleBlur,o=e.values,l=e.errors,s=Object(u.a)().t;return r.a.createElement(V,{handleSubmit:n(["token","app_secret","phone_number_id"]),errors:l,values:o,video:t},r.a.createElement(p.a,{className:"limiter",name:"token",label:s("integrations.form.configure-screen.token-label"),placeholder:s("integrations.form.configure-screen.token-placeholder"),onChange:a,onBlur:i,value:o.token||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"app_secret",label:s("integrations.form.configure-screen.app-secret-label"),placeholder:s("integrations.form.configure-screen.app-secret-placeholder"),onChange:a,onBlur:i,value:o.app_secret||"",errors:l}),r.a.createElement(p.a,{className:"limiter",name:"phone_number_id",label:s("integrations.form.configure-screen.phone-number-id-label"),placeholder:s("integrations.form.configure-screen.phone-number-id-placeholder"),onChange:a,onBlur:i,value:o.phone_number_id||"",errors:l}))}function X(e){var t=e.setFieldValue,n=e.handleChange,a=e.handleBlur,i=e.values,o=e.errors,l=e.validate,s=e.handleSubmit,c=function(e){return function(t){if(t.preventDefault(),l){var n=e.concat(["service","name","prefix","company_chat_bot_id","locale","config_id"]);l(n).then((function(){s()}))}else s()}};switch(+i.service){case C.i:return r.a.createElement(U,{video:"bx79vJP4zWI",setFieldValue:t,values:i,errors:o,handleSubmitClick:c});case C.b:return r.a.createElement(G,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c});case C.e:return r.a.createElement(W,{video:"b9-cHk-7N8k",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c});case C.c:return r.a.createElement(W,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c});case C.d:return r.a.createElement(W,{video:"b9-cHk-7N8k",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c});case C.h:return r.a.createElement(W,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c});case C.g:case C.f:return r.a.createElement(Q,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c});case C.a:return r.a.createElement($,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c});case C.j:return r.a.createElement(Y,{video:"bx79vJP4zWI",handleChange:n,handleBlur:a,values:i,errors:o,handleSubmitClick:c})}}V.propTypes={children:o.a.any.isRequired,errors:o.a.object.isRequired,handleSubmit:o.a.func.isRequired,values:o.a.object.isRequired,video:o.a.string},U.propTypes={video:o.a.string,errors:o.a.object.isRequired,handleSubmitClick:o.a.func.isRequired,setFieldValue:o.a.func.isRequired,values:o.a.object.isRequired},G.propTypes={video:o.a.string,errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,handleSubmitClick:o.a.func.isRequired,values:o.a.object.isRequired},W.propTypes={video:o.a.string,errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,handleSubmitClick:o.a.func.isRequired,values:o.a.object.isRequired},Q.propTypes={video:o.a.string,errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,handleSubmitClick:o.a.func.isRequired,values:o.a.object.isRequired},$.propTypes={video:o.a.string,errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,handleSubmitClick:o.a.func.isRequired,values:o.a.object.isRequired},Y.propTypes={video:o.a.string,errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,handleSubmitClick:o.a.func.isRequired,values:o.a.object.isRequired},X.propTypes={errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,setFieldValue:o.a.func.isRequired,validate:o.a.func.isRequired,handleSubmit:o.a.func.isRequired,values:o.a.object.isRequired};var K=n("h4JF");function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ee(e){var t=e.video,n=e.integrationId,i=e.renderContent,o=J(Object(a.useState)(null),2),l=o[0],s=o[1],c=Object(u.a)().t;return Object(a.useEffect)((function(){b.a.call("get","/methods/integrations/".concat(n,"/setup-data")).data((function(e){s(e)}))}),[n]),l?r.a.createElement("div",{className:"video-player-block"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{color:"dark",fade:!1},c("integrations.form.msg-instead-of-video"))):null,i(l)):r.a.createElement(K.a,null)}function te(e){var t=e.values,n=Object(u.a)().t;return r.a.createElement(ee,{integrationId:t.id,video:"vlDzYIIOYmM",renderContent:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-main pt-4"},n("integrations.form.setup-screen.copy-html-text")),r.a.createElement("p",{className:"copy-html-text p-3 rounded"},e.script))}})}function ne(e){var t=e.values,n=Object(u.a)().t;return r.a.createElement(ee,{integrationId:t.id,video:"vlDzYIIOYmM",renderContent:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"limiter",label:n("integrations.form.setup-screen.callback-label"),name:"callbackUrl",value:e.callbackUrl,readOnly:1}),r.a.createElement(p.a,{className:"limiter",label:n("integrations.form.setup-screen.confirmation-token-label"),name:"token",value:e.verification,readOnly:1}))}})}function ae(e){var t=e.values,n=e.video,a=Object(u.a)().t;return r.a.createElement(ee,{integrationId:t.id,video:n,renderContent:function(e){return r.a.createElement(p.a,{className:"limiter",label:a("integrations.form.setup-screen.callback-label"),name:"callbackUrl",value:e.callbackUrl,readOnly:1})}})}function re(e){var t=e.values,n=e.changeStep,a=e.allowedSteps,i=Object(u.a)().t,o=null;switch(+t.service){case C.i:o=r.a.createElement(te,{values:t});break;case C.b:case C.j:o=r.a.createElement(ne,{values:t});break;case C.g:o=r.a.createElement(ae,{video:"5kUu97Vkwj4",values:t});break;case C.f:case C.a:o=r.a.createElement(ae,{video:"10byeZV5jcc",values:t})}return r.a.createElement(r.a.Fragment,null,o,r.a.createElement(f.a,{changeStep:n,allowedSteps:a,nextStep:ke,content:function(){return i("integrations.form.next-btn.step-setup")}}))}ee.propTypes={integrationId:o.a.number.isRequired,renderContent:o.a.func.isRequired,video:o.a.string},te.propTypes={values:o.a.object.isRequired},ne.propTypes={values:o.a.object.isRequired},ae.propTypes={video:o.a.string,values:o.a.object.isRequired},re.propTypes={allowedSteps:o.a.array.isRequired,changeStep:o.a.func.isRequired,values:o.a.object.isRequired};var ie=n("55Ip"),oe=n("3OM0"),le=n("76xo"),se=n("jrRI"),ce=n("L3zb");function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function me(e){var t=e.values,n=Object(u.a)().t,a=ue(Object(le.a)(),2),i=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement("p",{className:"color-blue title-middle mt-4 pb-2"},n("integrations.form.success-screen.title")),r.a.createElement("p",{className:"text-main mb-5"},n("integrations.form.success-screen.text")),r.a.createElement("p",{className:"text-main mb-5"},r.a.createElement(se.a,null,r.a.createElement(oe.a,null,n("integrations.form.success-screen.api-token-label")),r.a.createElement(ce.a,{id:"api-token",type:"text",value:t.apiToken,readOnly:!0})),r.a.createElement("div",{className:"text-right"},i?r.a.createElement("span",null,n("integrations.form.success-screen.copied-message")):null,r.a.createElement(k.a,{onClick:o},n("integrations.form.success-screen.copy-btn")))),r.a.createElement(ie.a,{to:"/integrations",className:"pt-2 px-4 mt-3 mb-sm-4 mb-5 btn btn-success"},n("integrations.form.next-btn.step-success")))}me.propTypes={values:o.a.object.isRequired};var fe=me;function pe(e){var t=e.isEdit,n=e.handleChange,a=e.handleBlur,i=e.validate,o=e.values,l=e.errors,s=e.isSubmitting,c=e.setFieldValue,u=e.allowedScreens,d=e.changeStep,f=e.handleSubmit;switch(o.step){case je:return r.a.createElement(m.a,{isEdit:t,handleChange:n,values:o,allowedSteps:u,changeStep:d,validate:i});case Ce:return r.a.createElement(j,{values:o,errors:l,setFieldValue:c,handleChange:n,handleBlur:a,allowedSteps:u,changeStep:d,validate:i});case Ae:return r.a.createElement(X,{values:o,errors:l,setFieldValue:c,handleChange:n,handleBlur:a,validate:i,handleSubmit:f});case Te:return r.a.createElement(re,{values:o,allowedSteps:u,changeStep:d});case ke:return r.a.createElement(fe,{handleChange:n,handleBlur:a,values:o,errors:l,isSubmitting:s,setFieldValue:c,allowedSteps:u})}}pe.propTypes={isEdit:o.a.bool,errors:o.a.object.isRequired,handleBlur:o.a.func.isRequired,handleChange:o.a.func.isRequired,isSubmitting:o.a.bool,setFieldValue:o.a.func.isRequired,validate:o.a.func.isRequired,values:o.a.object.isRequired,allowedScreens:o.a.array.isRequired,changeStep:o.a.func.isRequired,handleSubmit:o.a.func.isRequired};var he=n("clgt"),ve=n("BLzl"),be=n("afej"),ge=n("/kxI"),ye=n("PLmP");function _e(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je="service",Ce="chat-bot",Ae="configure",Te="setup",ke="success";function xe(e){var t=Oe({},e);return void 0!==e.max_live_chat_inactivity_duration&&(t.max_live_chat_inactivity_duration=e.max_live_chat_inactivity_duration?Object(ye.a)(e.max_live_chat_inactivity_duration)/1e3:null),t}function Ne(e){var t=e.isEdit,n=e.step,i=e.onSubmit,o=e.defaultData,s=Object(a.useCallback)((function(e,t){e=xe(e),i(e,t)}),[i]);return console.log("defaultData",o),r.a.createElement(l.a,{className:"integration-form",initialValues:Oe({step:t&&n?n:je},o),handleSubmit:s,renderForm:function(e){var n=e.handleChange,a=e.handleBlur,i=e.values,o=e.errors,l=e.isSubmitting,s=e.setFieldValue,c=e.setErrors,u=e.handleSubmit,m=[je],f=!!i.service;f&&m.push(Ce);var p=f&&function(e,t){return e.company_chat_bot_id&&e.name&&e.prefix&&e.locale&&!t.company_chat_bot_id&&!t.name&&!t.prefix&&!t.locale}(i,o);p&&m.push(Ae);var h=p&&T(i,o);t&&h&&(Object(he.a)(i.service)?m.push(Te):m.push(ke));var v=h&&Object(he.a)(i.service);t&&v&&m.push(ke);var g=function(e){return s("step",e)},y=function(e){return new Promise((function(t,n){var a,r={},o=_e(e);try{for(o.s();!(a=o.n()).done;){var l=a.value;r[l]=i[l]}}catch(e){o.e(e)}finally{o.f()}r=xe(r),b.a.call("post","/methods/integrations/validate",{},r).then((function(){t()})).validation((function(e,t){c(t),n&&n()}))}))};return r.a.createElement(w.a,null,r.a.createElement(O.a,{xl:9},r.a.createElement(ve.a,{className:"mb-5 card-navbar shadow"},r.a.createElement(be.a,{className:"p-0"},r.a.createElement(d,{allowedScreens:m,step:i.step,onChange:g,showSetUpScreen:Object(he.a)(i.service),errors:o,validate:y,values:i})),r.a.createElement(ge.a,{className:"px-4 rounded-bottom"},r.a.createElement(pe,{handleChange:n,handleBlur:a,values:i,errors:o,isSubmitting:l,setFieldValue:s,validate:y,isEdit:t,allowedScreens:m,changeStep:g,handleSubmit:u})))))}})}Ne.propTypes={step:o.a.oneOf([je,Ce,Ae,Te,ke]),isEdit:o.a.bool,defaultData:o.a.object.isRequired,onSubmit:o.a.func.isRequired}},zEWu:function(e,t,n){"use strict";function a(e){return(null==e?void 0:e.iso)||(null==e?void 0:e.city)||(null==e?void 0:e.country)}n.d(t,"a",(function(){return a}))},zl2q:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),o=n.n(i),l=n("ma3e");function s(e){var t=e.audioMessage,n=e.setAudioMessage;return r.a.createElement("div",{className:"d-flex my-1"},r.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:function(){n(null)}},r.a.createElement(l.fb,{className:"icon-size-20 color-gray mr-1"})),r.a.createElement("div",{style:{maxWidth:"400px"}},r.a.createElement("audio",{src:"string"==typeof t?t:URL.createObjectURL(t),controls:!0})))}s.propTypes={audioMessage:o.a.oneOfType([o.a.object,o.a.string]),setAudioMessage:o.a.func.isRequired}},zwA0:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("9Koi");function o(){var e=Object(i.a)().t;return r.a.createElement("div",null,e("common.site-error-message"))}}}]);