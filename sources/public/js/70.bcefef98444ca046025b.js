(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{"/r69":function(e,t,a){"use strict";var r=a("q1tI"),n=a.n(r),i=a("17x9"),l=a.n(i),o=a("sPdi"),s=a("jrRI"),c=a("3OM0"),u=a("TSYQ"),m=a.n(u),d=a("ma3e"),p=a("yzbm"),b=a("9Koi");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function f(e){var t,a,r=e.id,i=e.label,l=e.errors,u=e.name,f=e.className,v=e.value,y=e.setFieldValue,h=e.onRemove,E=e.disabled,j=e.types,q=void 0===j?[]:j,O=m()({"is-invalid":Boolean(l&&(null===(t=l[u])||void 0===t?void 0:t.length))}),k=Object(b.a)().t;return n.a.createElement(s.a,{className:m()(f)},n.a.createElement(c.a,{htmlFor:r,className:m()(O)},"function"==typeof i?i():i),n.a.createElement(p.a,{onDrop:function(e){y(u,e[0])},disabled:E,accept:q.length?q:null},(function(e){var t=e.getRootProps,a=e.getInputProps;return n.a.createElement("section",{className:m()("dropzone-class")},n.a.createElement("div",g({},t(),{className:"load-img d-flex justify-content-center flex-column align-items-center p-3"}),n.a.createElement("input",g({},a(),{multiple:!1})),n.a.createElement(d.d,{className:"icon-size-40 color-gray"}),n.a.createElement("div",{className:"load-img-tip mt-3 text-center"},k("common.drag-and-drop"))))})),v?n.a.createElement("div",{className:m()("position-relative file-preview mr-4",O)},v.name,n.a.createElement("button",{type:"button",className:"btn btn-link no-shadow position-absolute file-preview-close-btn py-0 px-1",onClick:function(){y(u,null),h&&h()}},n.a.createElement(d.wb,{className:"color-red position-relative"}))):null,l&&(null===(a=l[u])||void 0===a?void 0:a.length)?n.a.createElement(o.a,{errors:l[u]}):null)}f.propTypes={errors:l.a.object,id:l.a.oneOfType([l.a.string,l.a.number]),label:l.a.any,name:l.a.string.isRequired,className:l.a.string,value:l.a.object,setFieldValue:l.a.func.isRequired,onRemove:l.a.func,types:l.a.array,disabled:l.a.bool},t.a=n.a.memo(f)},YWqb:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),l=a.n(i),o=a("9Koi"),s=a("Ty5D"),c=a("nc57"),u=a("6Rhw"),m=a("x37D"),d=a("/r69"),p=a("t8fN"),b=a("zl2q"),g=a("3OM0"),f=a("jrRI"),v=a("pbA8");function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function E(e){var t=e.subjectId,a=e.initialFormData,i=e.submitData,l=Object(o.a)().t,h=y(Object(r.useState)(!1),2),E=h[0],j=h[1],q=Object(r.useCallback)((function(e,a){var r=e.name,n=e.message,l=e.trigger,o=e.audioMessage,s=e.removeAudioMessage,c=e.attachment,u=e.removeAttachment,m=a.setSubmitting,d=a.setErrors,p=new FormData;p.append("name",r||""),p.append("trigger",l||""),p.append("message",n||""),p.append("quick_reply_subject_id",t),p.append("removeAttachment",u),p.append("removeAudioMessage",s),!o&&c&&c instanceof File&&p.append("attachment",c),o&&!c&&p.append("audioMessage",o),i(p,{setSubmitting:m,setErrors:d,setRedirect:j})}),[i,j,t]);return E?n.a.createElement(s.a,{to:"/quick-reply-subjects/".concat(t,"/replies/1")}):n.a.createElement(c.a,{initialValues:a,handleSubmit:q,renderForm:function(e){var t=e.handleChange,a=e.setFieldValue,r=e.handleBlur,i=e.values,o=e.errors,s=e.isSubmitting,c=i.audioMessage;return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{className:"limiter",id:"name",name:"name",label:l("quick-replies.quick-replies.edit-page.name-label"),placeholder:l("quick-replies.quick-replies.edit-page.name-placeholder"),onChange:t,onBlur:r,value:i.name,errors:o}),n.a.createElement(v.a,{className:"limiter",name:"message",label:l("quick-replies.quick-replies.edit-page.message-label"),placeholder:l("quick-replies.quick-replies.edit-page.message-placeholder"),setFieldValue:a,value:i.message,errors:o}),n.a.createElement(u.a,{className:"limiter",id:"trigger",name:"trigger",label:l("quick-replies.quick-replies.edit-page.trigger-label"),placeholder:l("quick-replies.quick-replies.edit-page.trigger-placeholder"),onChange:t,onBlur:r,value:i.trigger,errors:o,disabled:s||i.attachment||i.message||i.audioMessage}),n.a.createElement(d.a,{name:"attachment",label:l("quick-replies.quick-replies.edit-page.attachment-label"),value:i.attachment,setFieldValue:a,errors:o,disabled:s||i.audioMessage,onRemove:function(){a("removeAttachment",1)}}),n.a.createElement(f.a,{className:"quick-reply-form"},n.a.createElement(g.a,null,l("quick-replies.quick-replies.edit-page.audio-message-label")),n.a.createElement(p.a,{className:"mb-3",setAudioMessage:function(e){a("audioMessage",e)},disabled:s||i.attachment}),c?n.a.createElement(b.a,{audioMessage:c.url?c.url:c,setAudioMessage:function(){a("audioMessage",null),a("removeAudioMessage",1)}}):null),n.a.createElement(m.a,{className:"pt-2 px-4 mt-3 mb-5",disabled:s},l("common.saveBtnText")))}})}E.propTypes={subjectId:l.a.number.isRequired,initialFormData:l.a.object.isRequired,submitData:l.a.func.isRequired}},ds8m:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var r=a("q1tI"),n=a.n(r),i=a("MwQV"),l=a("Ty5D"),o=a("TtP3"),s=a("9Koi"),c=a("YWqb");function u(){var e=Object(s.a)().t,t=Object(l.j)().subjectId,a=Object(r.useCallback)((function(e,t){var a=t.setSubmitting,r=t.setErrors,n=t.setRedirect;a(!1),i.a.call("post","/methods/quick-replies",{},e).data((function(){n(!0)})).validation((function(e,t){r(t)})).finally((function(){a(!1)}))}),[]);return n.a.createElement(o.a,{title:e("quick-replies.quick-replies.create-page.title")},n.a.createElement(c.a,{initialFormData:{name:"",message:"",trigger:"",attachment:null,removeAttachment:0,audioMessage:null,removeAudioMessage:0},submitData:a,subjectId:+t}))}},pbA8:function(e,t,a){"use strict";var r=a("q1tI"),n=a.n(r),i=a("17x9"),l=a.n(i),o=a("sPdi"),s=a("jrRI"),c=a("3OM0"),u=a("TSYQ"),m=a.n(u),d=a("AEIT"),p=a("+z1p");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function f(e){var t,a=e.value,r=e.label,i=e.errors,l=e.name,u=e.className,f=e.setFieldValue,v=g(e,["value","label","errors","name","className","setFieldValue"]);return n.a.createElement(s.a,{className:m()(u)},r?n.a.createElement(c.a,null,"function"==typeof r?r():r):null,n.a.createElement(d.CKEditor,b({editor:p.ClassicEditor,data:a,onChange:function(e,t){f(l,t.getData())},config:{toolbar:["bold","italic","underline","link","bulletedList","numberedList","undo","redo"]}},v)),i&&(null===(t=i[l])||void 0===t?void 0:t.length)?n.a.createElement(o.a,{errors:i[l]}):null)}f.propTypes={value:l.a.string,errors:l.a.object,label:l.a.any,name:l.a.string.isRequired,className:l.a.string,setFieldValue:l.a.func.isRequired},t.a=f},t8fN:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),l=a.n(i),o=a("R6dn"),s=a.n(o),c=a("T+da");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d={audio:!0,video:!1};var p=a("TSYQ"),b=a.n(p),g=a("ma3e");function f(e){var t=e.setAudioMessage,a=e.disabled,i=e.className,l=function(e){var t=u(Object(r.useState)(!1),2),a=t[0],n=t[1],i=u(Object(r.useState)(null),2),l=i[0],o=i[1],m=u(Object(r.useState)(!1),2),p=m[0],b=m[1],g=u(Object(r.useState)(!1),2),f=g[0],v=g[1],y=Object(r.useCallback)((function(){navigator.getUserMedia(d,(function(t){n(t);var a=new s.a(t);a.mimeType="audio/wav",o(a),a.ondataavailable=function(t){e(t)},a.start(36e5),b(!0),v(!1)}),(function(e){console.error(e),c.a.error("You have to grant privileges to access your microphone to send audio messages.")}))}),[e]),h=Object(r.useCallback)((function(){f?l.resume():l.pause(),v(!f)}),[f,l]),E=Object(r.useCallback)((function(){l.resume(),l.stop(),b(!1),v(!1),o(null),a.getAudioTracks().forEach((function(e){e.stop()})),n(null)}),[l,a]);return{active:!0,isRecording:p,isPaused:f,togglePause:h,startRecording:y,stopRecording:E}}(t),o=l.isRecording,m=l.isPaused,p=l.startRecording,f=l.stopRecording,v=l.togglePause,y=null;return a||(y=o?f:p),n.a.createElement("div",{className:b()("d-flex",{"is-recording":o,"is-paused":m},i)},n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:y,disabled:a},o?n.a.createElement(g.qb,{className:"icon-size-20 recording-stop-icon mr-1"}):n.a.createElement(g.P,{className:"icon-size-20 color-gray mr-1"})),o?n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:a?null:v,disabled:a},m?n.a.createElement(g.W,{className:"icon-size-20 recording-play-icon color-gray mr-1"}):n.a.createElement(g.T,{className:"icon-size-20 recording-pause-icon color-gray mr-1"})):null)}f.propTypes={setAudioMessage:l.a.func.isRequired,disabled:l.a.bool,className:l.a.string}},zl2q:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),l=a.n(i),o=a("ma3e");function s(e){var t=e.audioMessage,a=e.setAudioMessage;return n.a.createElement("div",{className:"d-flex my-1"},n.a.createElement("button",{type:"button",className:"audio-btn no-shadow border-0",onClick:function(){a(null)}},n.a.createElement(o.gb,{className:"icon-size-20 color-gray mr-1"})),n.a.createElement("div",{style:{maxWidth:"400px"}},n.a.createElement("audio",{src:"string"==typeof t?t:URL.createObjectURL(t),controls:!0})))}s.propTypes={audioMessage:l.a.oneOfType([l.a.object,l.a.string]),setAudioMessage:l.a.func.isRequired}}}]);