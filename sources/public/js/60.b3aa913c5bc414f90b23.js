(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"19iC":function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return m}));var r=a("rpa7"),n=a("J3gs"),i=a("YOdH"),c=a("gmZo"),l=a("q1tI");function u(){return function(e){return!e||e.is_am_pm?"hh:mm a":"HH:mm"}(Object(r.a)())}function o(){var e=Object(i.a)(),t=u();return Object(l.useCallback)((function(a){return Object(c.a)(1e3*a).tz(e).format(t)}),[t,e])}function s(){var e=Object(n.a)();return u()+" "+e}function m(){var e=Object(i.a)(),t=s();return Object(l.useCallback)((function(a){return Object(c.a)(1e3*a).tz(e).format(t)}),[t,e])}},Q59H:function(e,t,a){"use strict";var r=a("q1tI"),n=a.n(r),i=a("17x9"),c=a.n(i),l=a("9Koi"),u=a("BLzl"),o=a("/kxI"),s=c.a.shape({products_catalog_id:c.a.number,internal_product_id:c.a.string,image_link:c.a.string,link:c.a.string,title:c.a.string,description:c.a.string,price:c.a.string}),m=c.a.shape({quantity:c.a.number.isRequired,item_price:c.a.number.isRequired,catalog_id:c.a.number,internal_product_id:c.a.string.isRequired,product:s.isRequired});function d(e){var t=e.itemPrice,a=e.quantity,r=e.currency,i=Object(l.a)().t;return n.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},n.a.createElement("div",{className:"mr-4"},n.a.createElement("div",{className:"quantity"},n.a.createElement("b",{className:"quantity-label"},i("shop.order-item.quantity")," "),n.a.createElement("b",null,a))),n.a.createElement("div",{className:"product-info"},n.a.createElement("div",null,n.a.createElement("b",null,"Unknown product")),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("b",{className:"mr-1"},i("shop.order-item.item-price")),n.a.createElement("span",null,t,r)))))}function p(e){var t=e.itemPrice,a=e.quantity,r=e.product,i=e.currency,c=Object(l.a)().t;return n.a.createElement("div",{className:"mt-3 mb-3 pb-3 d-md-flex order-item"},n.a.createElement("div",{className:"mr-4"},n.a.createElement("a",{href:r.link,target:"_blank",className:"product-img-link"},n.a.createElement("img",{src:r.image_link,alt:r.title,className:"img-responsive product-img"})),n.a.createElement("div",{className:"quantity"},n.a.createElement("b",{className:"quantity-label"},c("shop.order-item.quantity")," "),n.a.createElement("b",null,a))),n.a.createElement("div",{className:"product-info"},n.a.createElement("div",null,n.a.createElement("b",null,r.title)),n.a.createElement("div",null,r.description),n.a.createElement("div",null,n.a.createElement("div",{className:"mr-2"},n.a.createElement("b",{className:"mr-2"},c("shop.order-item.price")),n.a.createElement("span",null,r.price)),n.a.createElement("div",null,n.a.createElement("b",{className:"mr-1"},c("shop.order-item.item-price")),n.a.createElement("span",null,t,i)))))}function b(e){var t=e.itemPrice,a=e.quantity,r=e.product,i=e.currency;return r?n.a.createElement(p,{quantity:a,itemPrice:t,currency:i,product:r}):n.a.createElement(d,{itemPrice:t,currency:i,quantity:a})}function f(e){var t=e.order,a=Object(l.a)().t;return n.a.createElement(u.a,{className:"m-1 mb-2 order-preview"},n.a.createElement(o.a,null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("h5",null,a("shop.order.preview.ordered-title")),n.a.createElement("div",null,t.accepted.products.map((function(e){return n.a.createElement(b,{key:"".concat(e.quantity,"-").concat(e.internal_product_id),quantity:e.quantity,itemPrice:e.item_price,product:e.product,currency:t.currency})})))),t.productsNotEnough&&t.productsNotEnough.length?n.a.createElement("div",{className:"text-danger mb-3"},n.a.createElement("h2",null,a("shop.order.preview.failed-to-order-title")),n.a.createElement("div",null,t.productsNotEnough.map((function(e){return n.a.createElement(b,{key:"".concat(e.quantity,"-").concat(e.internal_product_id),quantity:e.quantity,itemPrice:e.item_price,product:e.product,currency:t.currency})})))):null,n.a.createElement("h5",{className:"d-flex justify-content-between"},n.a.createElement("span",null,a("shop.order.preview.total")),n.a.createElement("span",null,t.price," ",t.currency))))}d.propTypes={quantity:c.a.number.isRequired,itemPrice:c.a.number.isRequired,currency:c.a.string.isRequired},p.propTypes={product:s.isRequired,quantity:c.a.number.isRequired,itemPrice:c.a.number.isRequired,currency:c.a.string.isRequired},b.propTypes={product:s,quantity:c.a.number.isRequired,itemPrice:c.a.number.isRequired,currency:c.a.string.isRequired},f.propTypes={order:c.a.shape({currency:c.a.string.isRequired,price:c.a.string.isRequired,accepted:c.a.shape({sum:c.a.number.isRequired,products:c.a.arrayOf(m)}),productsNotEnough:c.a.arrayOf(m)})},t.a=f},RYal:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),n=a.n(r),i=a("dbgk"),c=a("TtP3"),l=a("MwQV"),u=a("Ty5D"),o=a("h4JF"),s=a("9Koi"),m=a("XAkp"),d=a("BLzl"),p=a("/kxI"),b=a("19iC"),f=a("gvs2"),E=a("Q59H"),y=a("55Ip"),v=a("nc57"),g=a("x37D"),h=a("Buep"),q=a("ok4j");function _(e){return new Promise((function(t){l.a.call("get","/methods/order-statuses/".concat(e)).data((function(e){t({label:e.name,value:e.id})}))}))}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}t.default=function(){var e=Object(s.a)().t,t=N(Object(r.useState)(null),2),a=t[0],w=t[1],j=Object(u.j)().id,O=Object(b.a)();Object(r.useEffect)((function(){l.a.call("get","/methods/orders/".concat(j)).data((function(e){w(f.a.instantiate(e))}))}),[j]);var k,R=Object(r.useCallback)((function(e,t){return t.setSubmitting(!1),l.a.call("patch","/methods/orders/".concat(j,"/change-status"),{},e).data((function(){t.setSubmitting(!1)})).validation((function(e,a){t.setErrors(a),t.setSubmitting(!1)}))}),[j]);return k=a?n.a.createElement("div",null,n.a.createElement(v.a,{initialValues:{order_status_id:a.order_status_id},handleSubmit:R,renderForm:function(t){var r=t.setFieldValue,i=t.isSubmitting,c=t.values,l=t.errors;return n.a.createElement("div",null,n.a.createElement(m.a,{striped:!0,bordered:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,e("shop.order.view-page.client-column")),n.a.createElement("td",null,n.a.createElement(y.a,{to:'/clients/1?filters=[{"column":"clients.id","operator":"eq","value":"'.concat(a.client_id,'","filterValue":"').concat(a.client_id,'","display":"ID","displayingType":"text"}]')},a.client.name))),n.a.createElement("tr",null,n.a.createElement("th",null,e("shop.order.view-page.status-column")),n.a.createElement("td",null,n.a.createElement(h.a,{className:"limiter",label:!1,name:"order_status_id",value:c.order_status_id,setFieldValue:r,loadOptions:q.a,loadValue:_,errors:l,isClearable:!0}))),n.a.createElement("tr",null,n.a.createElement("th",null,e("shop.order.view-page.created-column")),n.a.createElement("td",null,O(a.created_at))))),n.a.createElement(g.a,{className:"pt-2 px-4 mb-4",disabled:i},e("common.saveBtnText")))}}),n.a.createElement(E.a,{order:a.extended_details})):n.a.createElement(o.a,null),n.a.createElement(c.a,null,n.a.createElement(i.a,null,e("shop.order.view-page.title")),n.a.createElement(d.a,{className:"instant-messages-view mb-4 shadow"},n.a.createElement(p.a,{className:"px-sm-4 px-2 rounded"},k)))}},dbgk:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("q1tI"),n=a.n(r),i=a("17x9"),c=a.n(i);function l(e){var t=e.children;return n.a.createElement("h1",{className:"title-main mb-3"},t)}l.propTypes={children:c.a.any.isRequired}},gmZo:function(e,t,a){"use strict";a("iYuL");var r=a("f0Wu");r.locale(window.locale),t.a=r},ok4j:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("MwQV");function n(e){return new Promise((function(t){var a={q:e};r.a.call("get","/methods/order-statuses/search",a).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id,orderStatus:e}})))}))}))}}}]);