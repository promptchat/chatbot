(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"19iC":function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var a=n("rpa7"),r=n("J3gs"),i=n("YOdH"),l=n("gmZo"),o=n("q1tI");function s(){return function(e){return!e||e.is_am_pm?"hh:mm a":"HH:mm"}(Object(a.a)())}function u(){var e=Object(r.a)();return s()+" "+e}function c(){var e=Object(i.a)(),t=u();return Object(o.useCallback)((function(n){return Object(l.a)(1e3*n).tz(e).format(t)}),[t,e])}},"6jMY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n("MwQV");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return new Promise((function(n){var r={q:t};e&&(r.type=e),a.a.call("get","/methods/integrations/search",r).data((function(e){n(e.map((function(e){return{label:e.name,value:e.id,integration:e}})))}))}))}}var i=r();t.a=i},"6ukn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("MwQV");function r(e){return new Promise((function(t){a.a.call("get","/methods/tags/search-company-tags",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id}})))}))}))}},"Bg/h":function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("R5y6"),s=n("9Koi"),u=function(e){return e.map((function(e){var t=e,n=[];return t.variables.phone_number&&n.push(t.variables.phone_number),t.variables.first_name&&n.push(t.variables.first_name),t.variables.last_name&&n.push(t.variables.last_name),{label:n.join(" ")||t.name,value:t.id}}))};function c(e){var t=e.values,n=e.errors,a=e.setFieldValue,i=e.className,l=Object(s.a)().t;return r.a.createElement(o.a,{className:i,name:"clients",label:l("instantMessages.form.to-label"),value:t.clients,setFieldValue:a,errors:n,loadOptions:function(){return[]},defaultOptions:[],isMulti:!0})}c.propTypes={values:l.a.object.isRequired,errors:l.a.object.isRequired,setFieldValue:l.a.func.isRequired,className:l.a.string},t.a=c},CEGB:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("sPdi"),s=n("jrRI"),u=n("3OM0"),c=n("TSYQ"),d=n.n(c),m=n("c0+T");function f(e){var t,n,a=e.id,i=e.label,l=e.errors,c=e.name,f=e.className,p=e.value,g=e.setFieldValue,b=e.minDate,v=e.maxDate,h=e.customInput,y=d()({"is-invalid":l&&(null===(t=l[c])||void 0===t?void 0:t.length)});return r.a.createElement(s.a,{className:d()(f)},i?r.a.createElement(u.a,{htmlFor:a},"function"==typeof i?i():i):null,r.a.createElement(m.a,{id:a,name:c,value:p,onChange:function(e){return g(c,e)},formGroupClass:d()("py-0",y),inputClass:y,minDate:b,maxDate:v,customInput:h}),l&&(null===(n=l[c])||void 0===n?void 0:n.length)?r.a.createElement(o.a,{errors:l[c]}):null)}f.propTypes={errors:l.a.object,id:l.a.oneOfType([l.a.string,l.a.number]),label:l.a.any,name:l.a.string.isRequired,className:l.a.string,setFieldValue:l.a.func.isRequired,value:l.a.any,minDate:l.a.object,maxDate:l.a.object,customInput:l.a.any},t.a=r.a.memo(f)},FPNo:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("nc57"),s=n("19iC"),u=n("6Rhw"),c=n("x37D"),d=n("9Koi"),m=n("ok1R"),f=n("rhny"),p=n("MwQV");function g(e){return new Promise((function(t){p.a.call("get","/methods/instant-messages/templates/search",{q:e}).data((function(e){t(e.map((function(e){return{label:e.name,value:e.id,template:e}})))}))}))}var b=n("R5y6"),v=n("bFnZ"),h=n.n(v),y=n("sPdi"),O=n("TSYQ"),j=n.n(O);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _(e){var t=e.text,n=e.disabled,i=e.onSending,l=e.onSent,o=Object(d.a)().t,s=C(Object(a.useState)(!1),2),u=s[0],c=s[1],m=C(Object(a.useState)([]),2),f=m[0],g=m[1],b=C(Object(a.useState)(""),2),v=b[0],O=b[1],w=Object(a.useCallback)((function(){i(),p.a.call("post","/methods/instant-messages/templates",{},{name:v,message:t}).validation((function(e,t){g(t.name)})).data((function(){c(!1)})).finally((function(){l()}))}),[v,l,i,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:u,title:o("instantMessages.form.template-name-label"),onConfirm:w,onCancel:function(){return c(!1)},dependencies:[u,O,f,w]},(function(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",ref:e.setAutoFocusInputRef,className:j()("form-control",{"is-invalid":!!f.length}),value:v,onKeyDown:e.onEnterKeyDownConfirm,onChange:function(e){return O(e.target.value)},placeholder:o("instantMessages.form.template-name-label")}),f.length?r.a.createElement(y.a,{errors:f}):null)})),r.a.createElement("button",{className:"pt-2 px-4 mb-3 btn btn-primary",type:"button",disabled:n||!t,onClick:function(){return c(!0)}},o("instantMessages.form.save-template-btn")))}_.propTypes={text:l.a.string,disabled:l.a.bool,onSending:l.a.func,onSent:l.a.func};var S=_,E=n("6jMY"),T=n("CEGB"),I=n("CXWj"),N=n("INJS"),M=n("Bg/h"),q=n("6ukn"),R=n("AEIT"),V=n("+z1p"),D=n.n(V),x=n("XRgj");function A(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function k(e){var t,n,i,l=e.handleSendInstantlyChange,o=e.handleStartChange,s=e.handleTextChange,p=e.handleClientChange,v=e.handleBlur,h=e.handleTagsChange,O=e.values,C=e.errors,w=e.isSubmitting,_=e.handleNameChange,V=e.handleTemplateChange,P=e.handleIntegrationChange,L=e.handleSendViaIntegrationChange,k=e.fromList,Y=e.calculation,B=Object(d.a)().t,Q=F(Object(a.useState)(!1),2),U=Q[0],K=Q[1],H=F(Object(a.useState)(!1),2),J=H[0],G=H[1];return r.a.createElement(m.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(u.a,{className:"limiter",id:"name",name:"name",label:B("instantMessages.form.name-label"),placeholder:B("instantMessages.form.name-placeholder"),onChange:_,onBlur:v,value:O.name,errors:C}),r.a.createElement("div",{className:"limiter form-group"},r.a.createElement("label",null,B("instantMessages.form.text-label")),r.a.createElement("div",{className:j()({"is-invalid":C&&(null===(t=C.message)||void 0===t?void 0:t.length)})},r.a.createElement(R.CKEditor,{editor:D.a,data:O.message,onChange:function(e,t){s(t.getData())},placeholder:B("instantMessages.form.text-placeholder"),config:{toolbar:["bold","italic","underline","link","bulletedList","numberedList","undo","redo"],mention:{feeds:[{marker:"@",feed:function(e){return Promise.resolve([{id:"@".concat(e)}].concat(A([{id:"@first_name"},{id:"@last_name"},{id:"@email"},{id:"@phone_number"}].filter((function(t){return t.id.toLowerCase().includes(e.toLowerCase())})))))}}]}}})),C&&(null===(n=C.message)||void 0===n?void 0:n.length)?r.a.createElement(y.a,{errors:C.message}):null),r.a.createElement(S,{text:O.message,disabled:!!O.template,onSending:function(){return K(!0)},onSent:function(){return K(!1)}}),U?null:r.a.createElement(b.a,{className:"limiter",id:"template",name:"template",label:B("instantMessages.form.template-label"),value:O.template,setFieldValue:V,errors:C,loadOptions:g,cacheOptions:!1}),r.a.createElement(b.a,{className:"limiter",id:"sendViaIntegration",name:"sendViaIntegration",label:B("instantMessages.form.send_via-label"),value:O.sendViaIntegration,setFieldValue:L,errors:C,loadOptions:Object(E.b)(x.c)}),O.send_instantly?null:r.a.createElement(m.a,null,r.a.createElement(f.a,{sm:6},r.a.createElement(T.a,{id:"1",name:"start_date",label:B("instantMessages.form.start-date-label"),value:O.start_date,setFieldValue:o,errors:C,minDate:new Date,showTimeInput:!0})),r.a.createElement(f.a,{sm:6},r.a.createElement(N.a,{id:"start_time",name:"start_time",label:B("instantMessages.form.start-time-label"),value:O.start_time,setFieldValue:o,errors:C,disabled:!O.start_date,date:O.start_date,minTime:new Date}))),r.a.createElement(I.a,{id:"send_instantly",name:"send_instantly",label:B("instantMessages.form.send-instantly-label"),value:O.send_instantly,setFieldValue:l})),r.a.createElement(f.a,{md:6},!k&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"limiter",name:"tags",label:B("instantMessages.form.tags-label"),value:O.tags,setFieldValue:h,errors:C,loadOptions:q.a,isMulti:!0,isClearable:!1}),r.a.createElement(b.a,{className:"limiter",id:"integration",name:"integration",label:B("instantMessages.form.channel-label"),value:O.integration,setFieldValue:P,errors:C,loadOptions:E.a})),r.a.createElement("div",{className:"sub-label-bottom text-middle mb-4"},r.a.createElement("p",null,B("instantMessages.form.clients-count",{count:Y?B("instantMessages.form.calculation"):null===(i=O.clients)||void 0===i?void 0:i.length})),r.a.createElement("a",{onClick:function(){return G(!J)}},B(J?"instantMessages.form.hide":"instantMessages.form.see-all"))),J&&r.a.createElement(M.a,{values:O,errors:C,setFieldValue:p})),r.a.createElement(f.a,{sm:12},r.a.createElement(c.a,{className:"pt-2 px-4 mb-4",disabled:w},B("common.saveBtnText"))))}k.propTypes={handleTagsChange:l.a.func.isRequired,handleSendInstantlyChange:l.a.func.isRequired,handleClientChange:l.a.func.isRequired,handleTextChange:l.a.func.isRequired,handleStartChange:l.a.func.isRequired,handleIntegrationChange:l.a.func.isRequired,handleSendViaIntegrationChange:l.a.func.isRequired,handleTemplateChange:l.a.func.isRequired,handleNameChange:l.a.func.isRequired,handleBlur:l.a.func.isRequired,values:l.a.object.isRequired,errors:l.a.object.isRequired,isSubmitting:l.a.bool,fromList:l.a.bool,calculation:l.a.bool};var Y=k;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function W(e){var t=e.initialData,n=e.handleSubmit,i=e.afterSave,l=e.fromFilters,u=Object(a.useCallback)((function(e,t){var a,r,l,o,s;s=e.new_clients?e.new_clients:e.clients;var u=e.message||null;(null===(a=e.template)||void 0===a?void 0:a.value)&&(u=null);var c={name:e.name||null,message:u,filters:e.filters||null,selected:e.selected||null,integration_id:(null===(r=e.integration)||void 0===r?void 0:r.value)||null,send_via_integration_id:(null===(l=e.sendViaIntegration)||void 0===l?void 0:l.value)||null,message_template_id:(null===(o=e.template)||void 0===o?void 0:o.value)||null,send_instantly:~~e.send_instantly,start_date:e.start_date?Math.ceil(e.start_date):null,start_time:e.start_time?Math.ceil(e.start_time):null,tags:e.tags?e.tags.map((function(e){return e.value})):[],clients:s?s.map((function(e){return{id:e.__isNew__?null:e.value,name:e.label}})):[]};n(c).data((function(e){t.setSubmitting(!1),i(e)})).validation((function(e,n){var a={name:n.name,message:n.message,start_time:n.start_time,start_date:n.start_date,template:n.message_template_id,integration:n.integration_id,tags:n.tags,clients:n.clients,new_clients:n.clients,sendViaIntegration:n.send_via_integration_id};t.setErrors(a),t.setSubmitting(!1)})).catch((function(){t.setSubmitting(!1)}))}),[n,i]),c=Object(s.a)(),d=Object(a.useCallback)((function(e,t){var n;return(n=t||(e||null))?c(n):null}),[c]),m=Object(a.useCallback)((function(e,t,n,a){var r=[];return e&&r.push(e.label),n&&r.push(d(n,a)),t&&r.push(t.label),r.join(" ")}),[d]),f=J(Object(a.useState)(!1),2),g=f[0],b=f[1],v=Object(a.useCallback)((function(e,n,a,r){b(!0),l?p.a.call("get","/methods/instant-messages/clients-from-filters",{filters:JSON.stringify(t.filters),selected:JSON.stringify(t.selected),sent_via_integration_id:a}).data((function(e){b(!1),setTimeout((function(){r(Object(M.b)(e.clients))}))})):p.a.call("get","/methods/instant-messages/clients",{tags:null==n?void 0:n.map((function(e){return e.value})),integration_id:e,sent_via_integration_id:a}).data((function(e){b(!1),setTimeout((function(){r(Object(M.b)(e.clients))}))}))}),[l,t.filters,t.selected]);return r.a.createElement(o.a,{initialValues:K(K({},t),{},{isNameChanged:!1}),handleSubmit:u,renderForm:function(e){var t=e.setFieldValue,n=e.handleChange,a=e.values,i=Q(e,["setFieldValue","handleChange","values"]);null!==a.clients||g||setTimeout((function(){var e,n;v(null===(e=a.integration)||void 0===e?void 0:e.value,a.tags,null===(n=a.sendViaIntegration)||void 0===n?void 0:n.value,(function(e){return t("clients",e)}))}));return r.a.createElement(Y,B({},i,{values:a,fromList:l,handleTagsChange:function(e,n){var r,i;t(e,n),v(null===(r=a.integration)||void 0===r?void 0:r.value,n,null===(i=a.sendViaIntegration)||void 0===i?void 0:i.value,(function(e){return t("clients",e)}))},handleTextChange:function(e){t("message",e),t("template",null)},handleNameChange:function(e){n(e),t("isNameChanged",!!e.target.value)},handleTemplateChange:function(e,n){t(e,n),n?t("message",n.template.message):!n&&a.template&&t("message",""),a.isNameChanged||t("name",m(a.integration,n,a.start_date,a.start_time))},handleIntegrationChange:function(e,n){var r;t(e,n),a.isNameChanged||t("name",m(n,a.template,a.start_date,a.start_time)),n||(t("clients",null),t("new_clients",null)),v(n?n.value:null,a.tags,null===(r=a.sendViaIntegration)||void 0===r?void 0:r.value,(function(e){return t("clients",e)}))},handleStartChange:function(e,n){t(e,n);var r=a.start_time;if("start_date"===e){var i=new Date(r),l=new Date(1e3*n);l.setHours(i.getHours()),l.setMinutes(i.getMinutes()),t("start_time",r=l.getTime()/1e3)}a.isNameChanged||t("name",m(a.integration,a.template,"start_date"===e?n:a.start_date,"start_time"===e?n:r))},handleSendInstantlyChange:function(e,n){t(e,n),a.isNameChanged||t("name",m(a.integration,a.template,n?null:a.start_date,n?null:a.start_time))},handleClientChange:function(e,n){t(e,n)},handleSendViaIntegrationChange:function(e,n){t(e,n),v(n?n.value:null,a.tags,n?n.value:null,(function(e){return t("clients",e)}))},calculation:g}))}})}W.propTypes={initialData:l.a.object.isRequired,handleSubmit:l.a.func.isRequired,afterSave:l.a.func.isRequired,fromFilters:l.a.bool};t.a=W},INJS:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("sPdi"),s=n("jrRI"),u=n("3OM0"),c=n("TSYQ"),d=n.n(c),m=n("NRhA"),f=n.n(m),p=n("Opvh"),g=(n("5Buo"),n("19iC"));function b(e){var t=e.value,n=e.onChange,i=e.customInput,l=e.placeholder,o=e.formGroupClass,u=e.inputClass,c=e.minTime,b=e.maxTime,v=e.disabled,h=e.date;Object(a.useEffect)((function(){Object(m.registerLocale)(window.locale,p[window.locale])}),[]);var y=Object(g.c)();return r.a.createElement(s.a,{className:d()(o)},r.a.createElement(f.a,{selected:t?new Date(1e3*t):null,onChange:function(e){var t=e;h&&((t=new Date(1e3*h)).setHours(e.getHours()),t.setMinutes(e.getMinutes())),n(t.getTime()/1e3)},className:d()("form-control",u),dateFormat:y,customInput:i,placeholderText:l,locale:window.locale,showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:1,timeFormat:y,filterTime:function(e){var t;return h?((t=new Date(1e3*h)).setHours(e.getHours()),t.setMinutes(e.getMinutes())):t=new Date(e),c&&b?c.getTime()<t.getTime()&&t.getTime()<b.getTime():c?c.getTime()<t.getTime():!b||t.getTime()<b.getTime()},disabled:v}))}function v(e){var t,n,a=e.id,i=e.label,l=e.errors,c=e.name,m=e.className,f=e.value,p=e.setFieldValue,g=e.minTime,v=e.maxTime,h=e.disabled,y=e.date,O=d()({"is-invalid":l&&(null===(t=l[c])||void 0===t?void 0:t.length)});return r.a.createElement(s.a,{className:d()(m)},i?r.a.createElement(u.a,{htmlFor:a},"function"==typeof i?i():i):null,r.a.createElement(b,{id:a,name:c,value:f,onChange:function(e){return p(c,e)},formGroupClass:d()("py-0",O),inputClass:O,minTime:g,maxTime:v,disabled:h,date:y}),l&&(null===(n=l[c])||void 0===n?void 0:n.length)?r.a.createElement(o.a,{errors:l[c]}):null)}b.propTypes={onChange:l.a.func.isRequired,customInput:l.a.any,value:l.a.number,placeholder:l.a.string,formGroupClass:l.a.string,inputClass:l.a.string,minTime:l.a.object,maxTime:l.a.object,disabled:l.a.bool,date:l.a.number},v.propTypes={errors:l.a.object,id:l.a.oneOfType([l.a.string,l.a.number]),label:l.a.any,name:l.a.string.isRequired,className:l.a.string,setFieldValue:l.a.func.isRequired,value:l.a.any,minTime:l.a.object,maxTime:l.a.object,disabled:l.a.bool,date:l.a.number};t.a=r.a.memo(v)},QDav:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=(n("qKvR"),n("i8i4"),n("17x9"),n("q/f6")),l=n("njTy"),o=(n("iYmT"),n("FUBA"),n("1m/E"));function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var u={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},c=function(e){var t,n;return n=t=function(t){var n,a;function l(e){var n;return(n=t.call(this)||this).select=void 0,n.lastRequest=void 0,n.mounted=!1,n.optionsCache={},n.handleInputChange=function(e,t){var a=n.props,r=a.cacheOptions,l=a.onInputChange,o=Object(i.k)(e,t,l);if(!o)return delete n.lastRequest,void n.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(r&&n.optionsCache[o])n.setState({inputValue:o,loadedInputValue:o,loadedOptions:n.optionsCache[o],isLoading:!1,passEmptyOptions:!1});else{var s=n.lastRequest={};n.setState({inputValue:o,isLoading:!0,passEmptyOptions:!n.state.loadedInputValue},(function(){n.loadOptions(o,(function(e){n.mounted&&(e&&(n.optionsCache[o]=e),s===n.lastRequest&&(delete n.lastRequest,n.setState({isLoading:!1,loadedInputValue:o,loadedOptions:e||[],passEmptyOptions:!1})))}))}))}return o},n.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:void 0!==e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},n}a=t,(n=l).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var o=l.prototype;return o.componentDidMount=function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,n=this.state.inputValue;!0===t&&this.loadOptions(n,(function(t){if(e.mounted){var n=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:n})}}))},o.UNSAFE_componentWillReceiveProps=function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})},o.componentWillUnmount=function(){this.mounted=!1},o.focus=function(){this.select.focus()},o.blur=function(){this.select.blur()},o.loadOptions=function(e,t){var n=this.props.loadOptions;if(!n)return t();var a=n(e,t);a&&"function"==typeof a.then&&a.then(t,(function(){return t()}))},o.render=function(){var t=this,n=this.props,a=(n.loadOptions,n.isLoading),i=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(n,["loadOptions","isLoading"]),l=this.state,o=l.defaultOptions,u=l.inputValue,c=l.isLoading,d=l.loadedInputValue,m=l.loadedOptions,f=l.passEmptyOptions?[]:u&&d?m:o||[];return r.a.createElement(e,s({},i,{ref:function(e){t.select=e},options:f,isLoading:c||a,onInputChange:this.handleInputChange}))},l}(a.Component),t.defaultProps=u,n},d=Object(o.a)(l.a),m=c(d);t.a=m},R5y6:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n("q1tI"),r=n.n(a),i=n("QDav"),l=n("xilt"),o=n("jrRI"),s=n("3OM0"),u=n("TSYQ"),c=n.n(u),d=n("sPdi"),m=n("17x9"),f=n.n(m),p=n("9Koi");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={control:function(e){return b(b({},e),{},{"&, &:hover, &:focus":{borderColor:"#ced4da",boxShadow:"none"}})}};function y(e){var t,n,a=e.id,u=e.label,m=e.errors,f=e.loadOptions,g=e.name,b=e.setFieldValue,v=e.handleBlur,y=e.value,O=e.className,j=e.placeholder,C=e.isClearable,w=e.cacheOptions,_=e.isMulti,S=e.isDisabled,E=e.defaultOptions,T=Object(p.a)().t,I=C?l.a:i.a;return r.a.createElement(o.a,{className:c()(O)},r.a.createElement(s.a,{htmlFor:a},u),r.a.createElement(I,{cacheOptions:w,defaultOptions:E,loadOptions:f,onChange:function(e){b(g,e)},value:y,isClearable:C,className:c()({"is-invalid":!!(null===(t=m[g])||void 0===t?void 0:t.length)}),placeholder:j||T("common.default-select-placeholder"),styles:h,isMulti:_,isDisabled:S,onBlur:v}),(null===(n=m[g])||void 0===n?void 0:n.length)?r.a.createElement(d.a,{errors:m[g]}):null)}y.defaultProps={isClearable:!0,cacheOptions:!0,defaultOptions:!0},y.propTypes={errors:f.a.object.isRequired,id:f.a.oneOfType([f.a.string,f.a.number]),value:f.a.oneOfType([f.a.shape({label:f.a.string,value:f.a.oneOfType([f.a.string,f.a.number])}),f.a.array]),label:f.a.any.isRequired,name:f.a.string.isRequired,handleBlur:f.a.func,setFieldValue:f.a.func.isRequired,loadOptions:f.a.func.isRequired,className:f.a.string,placeholder:f.a.string,isClearable:f.a.bool,isMulti:f.a.bool,isDisabled:f.a.bool,cacheOptions:f.a.bool,defaultOptions:f.a.oneOfType([f.a.bool,f.a.array])}},"SKh+":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),i=n("dbgk"),l=n("TtP3"),o=n("FPNo"),s=n("MwQV"),u=n("Ty5D"),c=n("h4JF"),d=n("Bg/h"),m=n("9Koi"),f=n("BLzl"),p=n("/kxI");function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){var e=Object(m.a)().t,t=g(Object(a.useState)(null),2),n=t[0],b=t[1],v=g(Object(a.useState)(null),2),h=v[0],y=v[1],O=Object(u.j)().id;Object(a.useEffect)((function(){s.a.call("get","/methods/instant-messages/".concat(O)).data((function(e){b(e)}))}),[O]);var j,C=Object(a.useCallback)((function(e){return s.a.call("patch","/methods/instant-messages/".concat(O),{},e)}),[O]),w=Object(a.useCallback)((function(){y("/instant-messages/1")}),[]);if(null!==h)return r.a.createElement(u.a,{to:h});if(n){var _,S,E,T=Object(d.b)(n.clients);j=r.a.createElement(o.a,{afterSave:w,handleSubmit:C,fromFilters:!!(null===(_=n.selected)||void 0===_?void 0:_.selected),initialData:{name:n.name,message:n.message||"",integration:n.integration?{label:n.integration.name,value:n.integration.id,integration:n.integration}:null,sendViaIntegration:n.send_via_integration?{label:n.send_via_integration.name,value:n.send_via_integration.id,integration:n.send_via_integration}:null,template:n.message_template?{label:n.message_template.name,value:n.message_template.id,template:n.message_template}:null,start_date:+n.start_at,start_time:+n.start_at,tags:n.tags.map((function(e){return{label:e.name,value:e.id}})),filters:(null===(S=n.selected)||void 0===S?void 0:S.filters)||{},selected:null===(E=n.selected)||void 0===E?void 0:E.selected,clients:T,integration_type:null,send_instantly:!n.start_at}})}else j=r.a.createElement(c.a,null);return r.a.createElement(l.a,null,r.a.createElement(i.a,null,e("instantMessages.edit-title")),r.a.createElement(f.a,{className:"instant-messages-view mb-4 shadow"},r.a.createElement(p.a,{className:"px-4 rounded"},j)))}},"c0+T":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i),o=n("jrRI"),s=n("NRhA"),u=n.n(s),c=n("Opvh"),d=n("J3gs");n("5Buo");var m=n("TSYQ"),f=n.n(m);function p(e){var t=e.value,n=e.onChange,i=e.customInput,l=e.placeholder,m=e.formGroupClass,p=e.inputClass,g=e.minDate,b=e.maxDate;Object(a.useEffect)((function(){Object(s.registerLocale)(window.locale,c[window.locale])}),[]);var v=function(e){switch(e){case"MM/DD/YYYY":return"MM/dd/yyyy";case"DD.MM.YYYY":return"dd.MM.yyyy"}}(Object(d.a)());return r.a.createElement(o.a,{className:f()(m)},r.a.createElement(u.a,{selected:t?new Date(1e3*t):null,onChange:function(e){return n(e?Math.ceil(e.getTime()/1e3):null)},className:f()("form-control",p),dateFormat:v,customInput:i,placeholderText:l,locale:window.locale,minDate:g,maxDate:b}))}p.propTypes={onChange:l.a.func.isRequired,customInput:l.a.any,value:l.a.number,placeholder:l.a.string,formGroupClass:l.a.string,inputClass:l.a.string,minDate:l.a.object,maxDate:l.a.object}},dbgk:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("17x9"),l=n.n(i);function o(e){var t=e.children;return r.a.createElement("h1",{className:"title-main mb-3"},t)}o.propTypes={children:l.a.any.isRequired}},gmZo:function(e,t,n){"use strict";n("iYuL");var a=n("f0Wu");a.locale(window.locale),t.a=a},vwsU:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var a=n("q1tI"),r=n.n(a),i=(n("qKvR"),n("i8i4"),n("17x9"),n("q/f6")),l=n("njTy"),o=(n("iYmT"),n("FUBA"),n("1m/E"));function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var u=function(e,t){void 0===e&&(e="");var n=String(e).toLowerCase(),a=String(t.value).toLowerCase(),r=String(t.label).toLowerCase();return a===n||r===n},c=s({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'+e+'"'},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return u(e,t)}))||n.some((function(t){return u(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),d=function(e){var t,n;return n=t=function(t){var n,a;function l(e){var n;(n=t.call(this,e)||this).select=void 0,n.onChange=function(e,t){var a=n.props,r=a.getNewOptionData,l=a.inputValue,o=a.isMulti,s=a.onChange,u=a.onCreateOption,c=a.value,d=a.name;if("select-option"!==t.action)return s(e,t);var m=n.state.newOption,f=Array.isArray(e)?e:[e];if(f[f.length-1]!==m)s(e,t);else if(u)u(l);else{var p=r(l,l),g={action:"create-option",name:d};s(o?[].concat(Object(i.e)(c),[p]):p,g)}};var a=e.options||[];return n.state={newOption:void 0,options:a},n}a=t,(n=l).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var o=l.prototype;return o.UNSAFE_componentWillReceiveProps=function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,a=e.formatCreateLabel,r=e.getNewOptionData,l=e.inputValue,o=e.isLoading,s=e.isValidNewOption,u=e.value,c=e.options||[],d=this.state.newOption;d=s(l,Object(i.e)(u),c)?r(l,a(l)):void 0,this.setState({newOption:d,options:!t&&o||!d?c:"first"===n?[d].concat(c):[].concat(c,[d])})},o.focus=function(){this.select.focus()},o.blur=function(){this.select.blur()},o.render=function(){var t=this,n=this.state.options;return r.a.createElement(e,s({},this.props,{ref:function(e){t.select=e},options:n,onChange:this.onChange}))},l}(a.Component),t.defaultProps=c,n},m=d(l.a),f=Object(o.a)(m);t.a=f},xilt:function(e,t,n){"use strict";n("q1tI"),n("qKvR"),n("i8i4"),n("17x9");var a=n("njTy"),r=(n("iYmT"),n("FUBA"),n("1m/E")),i=n("QDav"),l=n("vwsU"),o=Object(l.b)(a.a),s=Object(r.a)(o),u=Object(i.b)(s);t.a=u}}]);